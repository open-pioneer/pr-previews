import{as as p,r as l,M as E,K as v,at as h,L as F,au as D,w as L}from"./J_WxYcBzn5mw.js";function g(e){return w(e)?.defaultView??window}function w(e){return p(e)?e.ownerDocument:document}function O(e){return w(e).activeElement}function A(e){const{wasSelected:n,enabled:t,isSelected:s,mode:o="unmount"}=e;return!!(!t||s||o==="keepMounted"&&n)}function C(e){const{isOpen:n,ref:t}=e,[s,o]=l.useState(n),[u,r]=l.useState(!1);return l.useEffect(()=>{u||(o(n),r(!0))},[n,u,s]),E(()=>t.current,"animationend",()=>{o(n)}),{present:!(n?!1:!s),onComplete(){const f=g(t.current),d=new f.CustomEvent("animationend",{bubbles:!0});t.current?.dispatchEvent(d)}}}function R(e){const n=e.current;if(!n)return!1;const t=O(n);return!t||n.contains(t)?!1:!!h(t)}function k(e,n){const{shouldFocus:t,visible:s,focusRef:o}=n,u=t&&!s;v(()=>{if(!u||R(e))return;const r=o?.current||e.current;let c;if(r)return c=requestAnimationFrame(()=>{r.focus({preventScroll:!0})}),()=>{cancelAnimationFrame(c)}},[u,e,o])}const S={preventScroll:!0,shouldFocus:!1};function V(e,n=S){const{focusRef:t,preventScroll:s,shouldFocus:o,visible:u}=n,r=M(e)?e.current:e,c=o&&u,f=l.useRef(c),d=l.useRef(u);F(()=>{!d.current&&u&&(f.current=c),d.current=u},[u,c]);const i=l.useCallback(()=>{if(!(!u||!r||!f.current)&&(f.current=!1,!r.contains(document.activeElement)))if(t?.current)requestAnimationFrame(()=>{t.current?.focus({preventScroll:s})});else{const a=D(r);a.length>0&&requestAnimationFrame(()=>{a[0].focus({preventScroll:s})})}},[u,s,r,t]);v(()=>{i()},[i]),E(r,"transitionend",i)}function M(e){return"current"in e}function q(e){const{ref:n,handler:t,enabled:s=!0}=e,o=L(t),r=l.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;l.useEffect(()=>{if(!s)return;const c=a=>{m(a,n)&&(r.isPointerDown=!0)},f=a=>{if(r.ignoreEmulatedMouseEvents){r.ignoreEmulatedMouseEvents=!1;return}r.isPointerDown&&t&&m(a,n)&&(r.isPointerDown=!1,o(a))},d=a=>{r.ignoreEmulatedMouseEvents=!0,t&&r.isPointerDown&&m(a,n)&&(r.isPointerDown=!1,o(a))},i=b(n.current);return i.addEventListener("mousedown",c,!0),i.addEventListener("mouseup",f,!0),i.addEventListener("touchstart",c,!0),i.addEventListener("touchend",d,!0),()=>{i.removeEventListener("mousedown",c,!0),i.removeEventListener("mouseup",f,!0),i.removeEventListener("touchstart",c,!0),i.removeEventListener("touchend",d,!0)}},[t,n,o,r,s])}function m(e,n){const t=e.target;return t&&!b(t).contains(t)?!1:!n.current?.contains(e.composedPath?.()[0]??t)}function b(e){return e?.ownerDocument??document}export{k as a,V as b,q as c,A as l,C as u};
