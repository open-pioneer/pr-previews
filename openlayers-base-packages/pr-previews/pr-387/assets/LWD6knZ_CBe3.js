import{r,k as G,N as U,$ as ne,Y as re,a7 as ue,K as q,O as H,u as ce,o as ae,aa as ie,j as V,a1 as le,l as X,g as de}from"./J_WxYcBzn5mw.js";import{c as fe,a as pe,u as me,l as he}from"./B6iw593KCf_N.js";function be(t,e){const n=r.useId();return r.useMemo(()=>t||[e,n].filter(Boolean).join("-"),[t,e,n])}function Ce(t,...e){const n=be(t);return r.useMemo(()=>e.map(s=>`${s}-${n}`),[n,e])}function Z(t){return t.sort((e,n)=>{const s=e.compareDocumentPosition(n);if(s&Node.DOCUMENT_POSITION_FOLLOWING||s&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(s&Node.DOCUMENT_POSITION_PRECEDING||s&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(s&Node.DOCUMENT_POSITION_DISCONNECTED||s&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}const Ie=t=>typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE;function J(t,e,n){let s=t+1;return n&&s>=e&&(s=0),s}function Q(t,e,n){let s=t-1;return n&&s<0&&(s=e),s}const z=typeof window<"u"?r.useLayoutEffect:r.useEffect,ee=t=>t;var xe=Object.defineProperty,ye=(t,e,n)=>e in t?xe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,h=(t,e,n)=>(ye(t,typeof e!="symbol"?e+"":e,n),n);class Me{constructor(){h(this,"descendants",new Map),h(this,"register",e=>{if(e!=null)return Ie(e)?this.registerNode(e):n=>{this.registerNode(n,e)}}),h(this,"unregister",e=>{this.descendants.delete(e);const n=Z(Array.from(this.descendants.keys()));this.assignIndex(n)}),h(this,"destroy",()=>{this.descendants.clear()}),h(this,"assignIndex",e=>{this.descendants.forEach(n=>{const s=e.indexOf(n.node);n.index=s,n.node.dataset.index=n.index.toString()})}),h(this,"count",()=>this.descendants.size),h(this,"enabledCount",()=>this.enabledValues().length),h(this,"values",()=>Array.from(this.descendants.values()).sort((n,s)=>n.index-s.index)),h(this,"enabledValues",()=>this.values().filter(e=>!e.disabled)),h(this,"item",e=>{if(this.count()!==0)return this.values()[e]}),h(this,"enabledItem",e=>{if(this.enabledCount()!==0)return this.enabledValues()[e]}),h(this,"first",()=>this.item(0)),h(this,"firstEnabled",()=>this.enabledItem(0)),h(this,"last",()=>this.item(this.descendants.size-1)),h(this,"lastEnabled",()=>{const e=this.enabledValues().length-1;return this.enabledItem(e)}),h(this,"indexOf",e=>e?this.descendants.get(e)?.index??-1:-1),h(this,"enabledIndexOf",e=>e==null?-1:this.enabledValues().findIndex(n=>n.node.isSameNode(e))),h(this,"next",(e,n=!0)=>{const s=J(e,this.count(),n);return this.item(s)}),h(this,"nextEnabled",(e,n=!0)=>{const s=this.item(e);if(!s)return;const u=this.enabledIndexOf(s.node),o=J(u,this.enabledCount(),n);return this.enabledItem(o)}),h(this,"prev",(e,n=!0)=>{const s=Q(e,this.count()-1,n);return this.item(s)}),h(this,"prevEnabled",(e,n=!0)=>{const s=this.item(e);if(!s)return;const u=this.enabledIndexOf(s.node),o=Q(u,this.enabledCount()-1,n);return this.enabledItem(o)}),h(this,"registerNode",(e,n)=>{if(!e||this.descendants.has(e))return;const s=Array.from(this.descendants.keys()).concat(e),u=Z(s);n?.disabled&&(n.disabled=!!n.disabled);const o={node:e,index:-1,...n};this.descendants.set(e,o),this.assignIndex(u)})}}function Ee(){const[t,e]=G({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});return[t,e,()=>{const u=r.useRef(new Me);return z(()=>()=>u.current.destroy()),u.current},u=>{const o=e(),[a,i]=r.useState(-1),p=r.useRef(null);z(()=>()=>{p.current&&o.unregister(p.current)},[]),z(()=>{if(!p.current)return;const f=Number(p.current.dataset.index);a!=f&&!Number.isNaN(f)&&i(f)});const b=ee(u?o.register(u):o.register);return{descendants:o,index:a,enabledIndex:o.enabledIndexOf(p.current),register:U(b,p)}}]}function ke(t,e,n,s){if(e==null)return s;if(!s)return t.find(a=>n(a).toLowerCase().startsWith(e.toLowerCase()));const u=t.filter(o=>n(o).toLowerCase().startsWith(e.toLowerCase()));if(u.length>0){let o;return u.includes(s)?(o=u.indexOf(s)+1,o===u.length&&(o=0),u[o]):(o=t.indexOf(u[0]),t[o])}return s}function De(t){const{key:e}=t;return e.length===1||e.length>1&&/[^a-zA-Z0-9]/.test(e)}function Oe(t={}){const{timeout:e=300,preventDefault:n=()=>!0}=t,[s,u]=r.useState([]),o=r.useRef(),a=()=>{o.current&&(clearTimeout(o.current),o.current=null)},i=()=>{a(),o.current=setTimeout(()=>{u([]),o.current=null},e)};r.useEffect(()=>a,[]);function p(b){return f=>{if(f.key==="Backspace"){const M=[...s];M.pop(),u(M);return}if(De(f)){const M=s.concat(f.key);n(f)&&(f.preventDefault(),f.stopPropagation()),u(M),b(M.join("")),i()}}}return p}function ge(){const t=r.useRef(new Map),e=t.current,n=r.useCallback((u,o,a,i)=>{t.current.set(a,{type:o,el:u,options:i}),u.addEventListener(o,a,i)},[]),s=r.useCallback((u,o,a,i)=>{u.removeEventListener(o,a,i),t.current.delete(a)},[]);return r.useEffect(()=>()=>{e.forEach((u,o)=>{s(u.el,u.type,o,u.options)})},[s,e]),{add:n,remove:s}}function $(t){const e=t.composedPath?.()?.[0]??t.target,{tagName:n,isContentEditable:s}=e;return n!=="INPUT"&&n!=="TEXTAREA"&&s!==!0}function Ne(t={}){const{ref:e,isDisabled:n,isFocusable:s,clickOnEnter:u=!0,clickOnSpace:o=!0,onMouseDown:a,onMouseUp:i,onClick:p,onKeyDown:b,onKeyUp:f,tabIndex:M,onMouseOver:g,onMouseLeave:C,...v}=t,[E,x]=r.useState(!0),[O,l]=r.useState(!1),d=ge(),T=c=>{c&&c.tagName!=="BUTTON"&&x(!1)},k=E?M:M||0,S=n&&!s,I=r.useCallback(c=>{if(n){c.stopPropagation(),c.preventDefault();return}c.currentTarget.focus(),p?.(c)},[n,p]),m=r.useCallback(c=>{O&&$(c)&&(c.preventDefault(),c.stopPropagation(),l(!1),d.remove(document,"keyup",m,!1))},[O,d]),D=r.useCallback(c=>{if(b?.(c),n||c.defaultPrevented||c.metaKey||!$(c.nativeEvent)||E)return;const F=u&&c.key==="Enter";o&&c.key===" "&&(c.preventDefault(),l(!0)),F&&(c.preventDefault(),c.currentTarget.click()),d.add(document,"keyup",m,!1)},[n,E,b,u,o,d,m]),R=r.useCallback(c=>{if(f?.(c),n||c.defaultPrevented||c.metaKey||!$(c.nativeEvent)||E)return;o&&c.key===" "&&(c.preventDefault(),l(!1),c.currentTarget.click())},[o,E,n,f]),_=r.useCallback(c=>{c.button===0&&(l(!1),d.remove(document,"mouseup",_,!1))},[d]),L=r.useCallback(c=>{if(c.button!==0)return;if(n){c.stopPropagation(),c.preventDefault();return}E||l(!0),c.currentTarget.focus({preventScroll:!0}),d.add(document,"mouseup",_,!1),a?.(c)},[n,E,a,d,_]),N=r.useCallback(c=>{c.button===0&&(E||l(!1),i?.(c))},[i,E]),y=r.useCallback(c=>{if(n){c.preventDefault();return}g?.(c)},[n,g]),j=r.useCallback(c=>{O&&(c.preventDefault(),l(!1)),C?.(c)},[O,C]),K=U(e,T);return E?{...v,ref:K,type:"button","aria-disabled":S?void 0:n,disabled:S,onClick:I,onMouseDown:a,onMouseUp:i,onKeyUp:f,onKeyDown:b,onMouseOver:g,onMouseLeave:C}:{...v,ref:K,role:"button","data-active":ne(O),"aria-disabled":n?"true":void 0,tabIndex:S?void 0:k,onClick:I,onMouseDown:L,onMouseUp:N,onKeyUp:R,onKeyDown:D,onMouseOver:y,onMouseLeave:j}}const[Pe,we,Te,Se]=Ee(),[ve,B]=G({strict:!1,name:"MenuContext"});function te(t){return t?.ownerDocument??document}function _e(t){return te(t).activeElement===t}function Re(t={}){const{id:e,closeOnSelect:n=!0,closeOnBlur:s=!0,initialFocusRef:u,autoSelect:o=!0,isLazy:a,isOpen:i,defaultIsOpen:p,onClose:b,onOpen:f,placement:M="bottom-start",lazyBehavior:g="unmount",direction:C,computePositionOnMount:v=!1,...E}=t,x=r.useRef(null),O=r.useRef(null),l=r.useRef(!0),d=Te(),T=r.useCallback(()=>{requestAnimationFrame(()=>{x.current?.focus({preventScroll:!1})})},[]),k=r.useCallback(()=>{const P=setTimeout(()=>{if(u)u.current?.focus();else if(!d.count())x.current?.focus({preventScroll:!1});else{const w=d.firstEnabled();w&&y(w.index)}});A.current.add(P)},[d,u]),S=r.useCallback(()=>{const P=setTimeout(()=>{if(!d.count())x.current?.focus({preventScroll:!1});else{const w=d.lastEnabled();w&&y(w.index)}});A.current.add(P)},[d]),I=r.useCallback(()=>{f?.(),o?k():T()},[o,k,T,f]),{isOpen:m,onOpen:D,onClose:R,onToggle:_}=re({isOpen:i,defaultIsOpen:p,onClose:b,onOpen:I});fe({enabled:m&&s,ref:x,handler:P=>{const w=P.composedPath?.()?.[0]??P.target;O.current?.contains(w)||R()}});const L=ue({...E,enabled:m||v,placement:M,direction:C}),[N,y]=r.useState(-1);pe(x,{focusRef:O,visible:m,shouldFocus:!0});const j=me({isOpen:m,ref:x}),[K,c]=Ce(e,"menu-button","menu-list"),F=r.useCallback(()=>{D(),T()},[D,T]),A=r.useRef(new Set([]));r.useEffect(()=>{const P=A.current;return()=>{P.forEach(w=>clearTimeout(w)),P.clear()}},[]),q(()=>{m||(y(-1),x.current?.scrollTo(0,0))},[m]),q(()=>{m&&N===-1&&T()},[N,m]),r.useEffect(()=>{if(!m)return;d.item(N)?.node?.focus({preventScroll:!l.current})},[d,N,m]);const Y=r.useCallback(()=>{D(),k()},[k,D]),se=r.useCallback(()=>{l.current=!0,D(),S()},[D,S]),oe=r.useCallback(()=>{const P=te(x.current),w=x.current?.contains(P.activeElement);if(!(m&&!w))return;d.item(N)?.node?.focus({preventScroll:!l.current})},[m,N,d]);return{openAndFocusMenu:F,openAndFocusFirstItem:Y,openAndFocusLastItem:se,onTransitionEnd:oe,unstable__animationState:j,descendants:d,popper:L,buttonId:K,menuId:c,forceUpdate:L.forceUpdate,orientation:"vertical",isOpen:m,onToggle:_,onOpen:D,onClose:R,menuRef:x,buttonRef:O,focusedIndex:N,closeOnSelect:n,closeOnBlur:s,autoSelect:o,setFocusedIndex:y,isLazy:a,lazyBehavior:g,initialFocusRef:u,scrollIntoViewRef:l}}function He(t={},e=null){const n=B(),{onToggle:s,popper:u,openAndFocusFirstItem:o,openAndFocusLastItem:a,scrollIntoViewRef:i}=n,p=r.useCallback(b=>{const f=b.key,g={Enter:o,ArrowDown:o,ArrowUp:a}[f];g&&(i.current=!0,b.preventDefault(),b.stopPropagation(),g(b))},[o,a,i]);return{...t,ref:U(n.buttonRef,e,u.referenceRef),id:n.buttonId,"data-active":ne(n.isOpen),"aria-expanded":n.isOpen,"aria-haspopup":"menu","aria-controls":n.menuId,onClick:H(t.onClick,s),onKeyDown:H(t.onKeyDown,p)}}function W(t){return Le(t)&&!!t?.getAttribute("role")?.startsWith("menuitem")}function We(t={},e=null){const n=B();if(!n)throw new Error("useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>");const{focusedIndex:s,setFocusedIndex:u,menuRef:o,isOpen:a,onClose:i,menuId:p,isLazy:b,lazyBehavior:f,scrollIntoViewRef:M,unstable__animationState:g}=n,C=we(),v=Oe({preventDefault:l=>l.key!==" "&&W(l.target)}),E=r.useCallback(l=>{if(!l.currentTarget.contains(l.target))return;const d=l.key,k={Tab:I=>I.preventDefault(),Escape:I=>{I.stopPropagation(),i()},ArrowDown:()=>{M.current=!0;const I=C.nextEnabled(s)??C.firstEnabled();I&&u(I.index)},ArrowUp:()=>{M.current=!0;const I=C.prevEnabled(s)??C.firstEnabled();I&&u(I.index)}}[d];if(k){l.preventDefault(),k(l);return}const S=v(I=>{const m=ke(C.values(),I,D=>D?.node?.textContent??"",C.item(s));if(m){const D=C.indexOf(m.node);u(D)}});W(l.target)&&S(l)},[C,s,v,i,u,M]),x=r.useRef(!1);a&&(x.current=!0);const O=he({wasSelected:x.current,enabled:b,mode:f,isSelected:g.present});return{...t,ref:U(o,e),children:O?t.children:null,tabIndex:-1,role:"menu",id:p,style:{...t.style,transformOrigin:"var(--popper-transform-origin)"},"aria-orientation":"vertical",onKeyDown:H(t.onKeyDown,E)}}function Ge(t={}){const{popper:e,isOpen:n}=B();return e.getPopperProps({...t,style:{visibility:n?"visible":"hidden",...t.style}})}function Ye(t={},e=null){const{onMouseEnter:n,onMouseMove:s,onMouseLeave:u,onClick:o,onFocus:a,isDisabled:i,isFocusable:p,closeOnSelect:b,type:f,...M}=t,g=B(),{setFocusedIndex:C,focusedIndex:v,closeOnSelect:E,onClose:x,menuId:O,scrollIntoViewRef:l}=g,d=r.useRef(null),T=`${O}-menuitem-${r.useId()}`,{index:k,register:S}=Se({disabled:i&&!p}),I=r.useCallback(y=>{n?.(y),!i&&(l.current=!1,C(k))},[C,k,i,n,l]),m=r.useCallback(y=>{s?.(y),d.current&&!_e(d.current)&&I(y)},[I,s]),D=r.useCallback(y=>{u?.(y),!i&&C(-1)},[C,i,u]),R=r.useCallback(y=>{o?.(y),W(y.currentTarget)&&(b??E)&&x()},[x,o,E,b]),_=r.useCallback(y=>{a?.(y),C(k)},[C,a,k]),L=k===v,N=Ne({onClick:R,onFocus:_,onMouseEnter:I,onMouseMove:m,onMouseLeave:D,ref:U(S,d,e),isDisabled:i,isFocusable:p});return{...M,...N,type:f??N.type,id:T,role:"menuitem",tabIndex:L?0:-1}}function Le(t){if(!Fe(t))return!1;const e=t.ownerDocument.defaultView??window;return t instanceof e.HTMLElement}function Fe(t){return t!=null&&typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE}const[Ae,Ue]=G({name:"MenuStylesContext",errorMessage:`useMenuStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Menu />" `}),Ke=t=>{const{children:e}=t,n=ce("Menu",t),s=ae(t),{direction:u}=ie(),{descendants:o,...a}=Re({...s,direction:u}),i=r.useMemo(()=>a,[a]),{isOpen:p,onClose:b,forceUpdate:f}=i;return V.jsx(Pe,{value:o,children:V.jsx(ve,{value:i,children:V.jsx(Ae,{value:n,children:le(e,{isOpen:p,onClose:b,forceUpdate:f})})})})};Ke.displayName="Menu";const Ve=t=>{const{className:e,children:n,...s}=t,u=Ue(),o=r.Children.only(n),a=r.isValidElement(o)?r.cloneElement(o,{focusable:"false","aria-hidden":!0,className:X("chakra-menu__icon",o.props.className)}):null,i=X("chakra-menu__icon-wrapper",e);return V.jsx(de.span,{className:i,...s,__css:u.icon,children:a})};Ve.displayName="MenuIcon";export{Ke as M,Ve as a,He as b,Ye as c,B as d,We as e,Ge as f,Ue as u};
