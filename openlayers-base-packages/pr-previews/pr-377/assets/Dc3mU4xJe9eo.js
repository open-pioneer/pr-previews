import{a_ as Me,af as M,bR as v,ay as ht,bS as bt,ak as Fe,an as Pt,am as xt,bT as vt,bU as wt,bV as jt,bW as Ct,ac as Ot,bX as E,bY as Ne,bZ as St,aZ as Le,b3 as Te,u as Mt,k as ne,r as Ft,i as Nt,e as Lt,g as Pe,h as xe}from"./j0mck_Meu7Xh.js";import{G as Tt,a as It,b as Gt,M as kt}from"./BWf1FusGPLsb.js";import{L as At}from"./ajAX9OmvUsbZ.js";import{J as Et,r as i,j as a,K as Rt,L as Ie,l as R,k as Ge,M as _t,N as Bt,O as re,P as D,Q as C,u as Dt,o as Ht,R as Jt,w as Vt,g as A,h as V,D as Ut,T as zt,U as $t,q as ke,b as ie,F as Ae,B as H}from"./B60Dx_GOYdnk.js";import{u as J,B as Wt}from"./DSjrbd_eKbZM.js";import{f as Ee,F as Kt}from"./2C0geDG_OBHU.js";import{u as Yt,a as qt,b as Zt,c as Qt,l as Xt,i as ve,M as er}from"./C9VJq5Ka7299.js";import{S as Re,I as tr}from"./BXfBNJYYR7xb.js";import{C as rr,a as or,b as nr,M as we}from"./CMfwYEDRd35m.js";import{c as sr}from"./BlACKGYldMfy.js";import{C as ar}from"./CG5nmvkyugDn.js";import{T as se,L as ir}from"./BKR6R-cAnIXt.js";const lr=t=>{const{condition:e,message:r}=t};function cr(t){return"current"in t}const _e=()=>typeof window<"u";function ur(){return navigator.userAgentData?.platform??navigator.platform}const dr=t=>_e()&&t.test(navigator.vendor),pr=t=>_e()&&t.test(ur()),mr=()=>pr(/mac|iphone|ipad|ipod/i),fr=()=>mr()&&dr(/apple/i);function gr(t){const{ref:e,elements:r,enabled:o}=t,n=()=>e.current?.ownerDocument??document;Et(n,"pointerdown",s=>{if(!fr()||!o)return;const l=s.composedPath?.()?.[0]??s.target,m=(r??[e]).some(c=>{const g=cr(c)?c.current:c;return g?.contains(l)||g===l});n().activeElement!==l&&m&&(s.preventDefault(),l.focus())})}const k={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]},xo={enter:{duration:.2,ease:k.easeOut},exit:{duration:.1,ease:k.easeIn}},je={enter:(t,e)=>({...t,delay:typeof e=="number"?e:e?.enter}),exit:(t,e)=>({...t,delay:typeof e=="number"?e:e?.exit})},yr=t=>t!=null&&parseInt(t.toString(),10)>0,Ce={exit:{height:{duration:.2,ease:k.ease},opacity:{duration:.3,ease:k.ease}},enter:{height:{duration:.3,ease:k.ease},opacity:{duration:.4,ease:k.ease}}},hr={exit:({animateOpacity:t,startingHeight:e,transition:r,transitionEnd:o,delay:n})=>({...t&&{opacity:yr(e)?1:0},height:e,transitionEnd:o?.exit,transition:r?.exit??je.exit(Ce.exit,n)}),enter:({animateOpacity:t,endingHeight:e,transition:r,transitionEnd:o,delay:n})=>({...t&&{opacity:1},height:e,transitionEnd:o?.enter,transition:r?.enter??je.enter(Ce.enter,n)})},Be=i.forwardRef((t,e)=>{const{in:r,unmountOnExit:o,animateOpacity:n=!0,startingHeight:s=0,endingHeight:l="auto",style:d,className:m,transition:c,transitionEnd:g,animatePresenceProps:h,...b}=t,[w,O]=i.useState(!1);i.useEffect(()=>{const T=setTimeout(()=>{O(!0)});return()=>clearTimeout(T)},[]),lr({condition:Number(s)>0&&!!o,message:"startingHeight and unmountOnExit are mutually exclusive. You can't use them together"});const S=parseFloat(s.toString())>0,u={startingHeight:s,endingHeight:l,animateOpacity:n,transition:w?c:{enter:{duration:0}},transitionEnd:{enter:g?.enter,exit:o?g?.exit:{...g?.exit,display:S?"block":"none"}}},f=o?r:!0,y=r||o?"enter":"exit";return a.jsx(Rt,{...h,initial:!1,custom:u,children:f&&a.jsx(Ie.div,{ref:e,...b,className:R("chakra-collapse",m),style:{overflow:"hidden",display:"block",...d},custom:u,variants:hr,initial:o?"exit":!1,animate:y,exit:"exit"})})});Be.displayName="Collapse";const[br,L]=Ge({name:"PopoverContext",errorMessage:"usePopoverContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Popover />`"}),[Pr,U]=Ge({name:"PopoverStylesContext",errorMessage:`usePopoverStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Popover />" `}),G={click:"click",hover:"hover"};function xr(t={}){const{closeOnBlur:e=!0,closeOnEsc:r=!0,initialFocusRef:o,id:n,returnFocusOnClose:s=!0,autoFocus:l=!0,arrowSize:d,arrowShadowColor:m,trigger:c=G.click,openDelay:g=200,closeDelay:h=200,isLazy:b,lazyBehavior:w="unmount",computePositionOnMount:O,...S}=t,{isOpen:u,onClose:f,onOpen:y,onToggle:T}=_t(t),[tt,Q]=i.useState(s);i.useEffect(()=>Q(s),[s]);const X=i.useRef(null),_=i.useRef(null),F=i.useRef(null),B=i.useRef(!1),de=i.useRef(!1);u&&(de.current=!0);const[pe,rt]=i.useState(!1),[me,ot]=i.useState(!1),nt=i.useId(),st=n??nt,[fe,$,W,K]=["popover-trigger","popover-content","popover-header","popover-body"].map(p=>`${p}-${st}`),{referenceRef:Y,getArrowProps:at,getPopperProps:ge,getArrowInnerProps:it,forceUpdate:lt}=Bt({...S,enabled:u||!!O}),ye=Yt({isOpen:u,ref:F});gr({enabled:u,ref:_}),qt(F,{focusRef:_,visible:u,shouldFocus:tt&&c===G.click}),Zt(F,{focusRef:o,visible:u,shouldFocus:l&&c===G.click}),Qt({enabled:u&&e,ref:F,handler(p){const x=p.composedPath?.()[0]??[p.target];q(_.current,x)||(x&&Q(!ve(x)),f())}});const he=Xt({wasSelected:de.current,enabled:b,mode:w,isSelected:ye.present}),ct=i.useCallback((p={},x=null)=>{const P={...p,style:{...p.style,transformOrigin:re.transformOrigin.varRef,[re.arrowSize.var]:d?`${d}px`:void 0,[re.arrowShadowColor.var]:m},ref:D(F,x),children:he?p.children:null,id:$,tabIndex:-1,role:"dialog",onKeyDown:C(p.onKeyDown,j=>{j.nativeEvent.isComposing||r&&j.key==="Escape"&&(j.preventDefault(),j.stopPropagation(),f())}),onBlur:C(p.onBlur,j=>{const I=Oe(j),te=q(F.current,I),gt=q(_.current,I),yt=!te&&!gt;I&&Q(!ve(I)),u&&e&&yt&&f()}),"aria-labelledby":pe?W:void 0,"aria-describedby":me?K:void 0};return c===G.hover&&(P.role="tooltip",P.onMouseEnter=C(p.onMouseEnter,()=>{B.current=!0}),P.onMouseLeave=C(p.onMouseLeave,j=>{j.nativeEvent.relatedTarget!==null&&(B.current=!1,setTimeout(()=>f(),h))})),P},[he,$,pe,W,me,K,c,r,f,u,e,h,m,d]),ut=i.useCallback((p={},x=null)=>ge({...p,style:{visibility:u?"visible":"hidden",...p.style}},x),[u,ge]),dt=i.useCallback((p,x=null)=>({...p,ref:D(x,X,Y)}),[X,Y]),N=i.useRef(),ee=i.useRef(),be=i.useCallback(p=>{X.current==null&&Y(p)},[Y]),pt=i.useCallback((p={},x=null)=>{const P={...p,ref:D(_,x,be),id:fe,"aria-haspopup":"dialog","aria-expanded":u,"aria-controls":$};return c===G.click&&(P.onClick=C(p.onClick,T)),c===G.hover&&(P.onFocus=C(p.onFocus,()=>{N.current===void 0&&y()}),P.onBlur=C(p.onBlur,j=>{const I=Oe(j),te=!q(F.current,I);u&&e&&te&&f()}),P.onKeyDown=C(p.onKeyDown,j=>{j.key==="Escape"&&f()}),P.onMouseEnter=C(p.onMouseEnter,()=>{B.current=!0,N.current=window.setTimeout(()=>y(),g)}),P.onMouseLeave=C(p.onMouseLeave,()=>{B.current=!1,N.current&&(clearTimeout(N.current),N.current=void 0),ee.current=window.setTimeout(()=>{B.current===!1&&f()},h)})),P},[fe,u,$,c,be,T,y,e,f,g,h]);i.useEffect(()=>()=>{N.current&&clearTimeout(N.current),ee.current&&clearTimeout(ee.current)},[]);const mt=i.useCallback((p={},x=null)=>({...p,id:W,ref:D(x,P=>{rt(!!P)})}),[W]),ft=i.useCallback((p={},x=null)=>({...p,id:K,ref:D(x,P=>{ot(!!P)})}),[K]);return{forceUpdate:lt,isOpen:u,onAnimationComplete:ye.onComplete,onClose:f,getAnchorProps:dt,getArrowProps:at,getArrowInnerProps:it,getPopoverPositionerProps:ut,getPopoverProps:ct,getTriggerProps:pt,getHeaderProps:mt,getBodyProps:ft}}function q(t,e){return t===e||t?.contains(e)}function Oe(t){const e=t.currentTarget.ownerDocument.activeElement;return t.relatedTarget??e}function De(t){const e=Dt("Popover",t),{children:r,...o}=Ht(t),n=Jt(),s=xr({...o,direction:n.direction});return a.jsx(br,{value:s,children:a.jsx(Pr,{value:e,children:Vt(r,{isOpen:s.isOpen,onClose:s.onClose,forceUpdate:s.forceUpdate})})})}De.displayName="Popover";const oe=(t,e)=>e?`${t}.${e}, ${e}`:void 0;function He(t){const{bg:e,bgColor:r,backgroundColor:o,shadow:n,boxShadow:s,shadowColor:l,...d}=t,{getArrowProps:m,getArrowInnerProps:c}=L(),g=U(),h=e??r??o,b=n??s;return a.jsx(A.div,{...m(),className:"chakra-popover__arrow-positioner",children:a.jsx(A.div,{className:R("chakra-popover__arrow",t.className),...c(d),__css:{"--popper-arrow-shadow-color":oe("colors",l),"--popper-arrow-bg":oe("colors",h),"--popper-arrow-shadow":oe("shadows",b),...g.arrow}})})}He.displayName="PopoverArrow";const Je=V(function(e,r){const{getBodyProps:o}=L(),n=U();return a.jsx(A.div,{...o(e,r),className:R("chakra-popover__body",e.className),__css:n.body})});Je.displayName="PopoverBody";const Ve=V(function(e,r){const{onClose:o}=L(),n=U();return a.jsx(Ut,{size:"sm",onClick:o,className:R("chakra-popover__close-btn",e.className),__css:n.closeButton,ref:r,...e})});Ve.displayName="PopoverCloseButton";function vr(t){if(t)return{enter:{...t.enter,visibility:"visible"},exit:{...t.exit,transitionEnd:{visibility:"hidden"}}}}const wr={exit:{opacity:0,scale:.95,transition:{duration:.1,ease:[.4,0,1,1]}},enter:{scale:1,opacity:1,transition:{duration:.15,ease:[0,0,.2,1]}}},jr=A(Ie.section),Ue=V(function(e,r){const{variants:o=wr,...n}=e,{isOpen:s}=L();return a.jsx(jr,{ref:r,variants:vr(o),initial:!1,animate:s?"enter":"exit",...n})});Ue.displayName="PopoverTransition";const ze=V(function(e,r){const{rootProps:o,motionProps:n,...s}=e,{getPopoverProps:l,getPopoverPositionerProps:d,onAnimationComplete:m}=L(),c=U(),g=zt({position:"relative",display:"flex",flexDirection:"column",...c.content});return a.jsx(A.div,{...d(o),__css:c.popper,className:"chakra-popover__popper",children:a.jsx(Ue,{...n,...l(s,r),onAnimationComplete:$t(m,s.onAnimationComplete),className:R("chakra-popover__content",e.className),__css:g})})});ze.displayName="PopoverContent";const $e=V(function(e,r){const{getHeaderProps:o}=L(),n=U();return a.jsx(A.header,{...o(e,r),className:R("chakra-popover__header",e.className),__css:n.header})});$e.displayName="PopoverHeader";function We(t){const e=i.Children.only(t.children),{getTriggerProps:r}=L();return a.jsx(a.Fragment,{children:i.cloneElement(e,r(e.props,e.ref))})}We.displayName="PopoverTrigger";function Cr(t){return"parentLayer"in t}function vo(t){return"olLayer"in t}class Or{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Me,this.supportedMediaTypes=null}getReadOptions(e,r){if(r){let o=r.dataProjection?M(r.dataProjection):this.readProjection(e);r.extent&&o&&o.getUnits()==="tile-pixels"&&(o=M(o),o.setWorldExtent(r.extent)),r={dataProjection:o,featureProjection:r.featureProjection}}return this.adaptOptions(r)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return v()}readFeature(e,r){return v()}readFeatures(e,r){return v()}readGeometry(e,r){return v()}readProjection(e){return v()}writeFeature(e,r){return v()}writeFeatures(e,r){return v()}writeGeometry(e,r){return v()}}function le(t,e,r){const o=r?M(r.featureProjection):null,n=r?M(r.dataProjection):null;let s=t;if(o&&n&&!ht(o,n)){e&&(s=t.clone());const l=e?o:n,d=e?n:o;l.getUnits()==="tile-pixels"?s.transform(l,d):s.applyTransform(bt(l,d))}if(e&&r&&r.decimals!==void 0){const l=Math.pow(10,r.decimals),d=function(m){for(let c=0,g=m.length;c<g;++c)m[c]=Math.round(m[c]*l)/l;return m};s===t&&(s=t.clone()),s.applyTransform(d)}return s}const Sr={Point:Pt,LineString:At,Polygon:xt,MultiPoint:It,MultiLineString:Gt,MultiPolygon:kt};function Mr(t,e,r){return Array.isArray(e[0])?(vt(t,0,e,r)||(t=t.slice(),wt(t,0,e,r)),t):(jt(t,0,e,r)||(t=t.slice(),Ct(t,0,e,r)),t)}function Ke(t,e){const r=t.geometry;if(!r)return[];if(Array.isArray(r))return r.map(s=>Ke({...t,geometry:s})).flat();const o=r.type==="MultiPolygon"?"Polygon":r.type;if(o==="GeometryCollection"||o==="Circle")throw new Error("Unsupported geometry type: "+o);const n=r.layout.length;return le(new Fe(o,o==="Polygon"?Mr(r.flatCoordinates,r.ends,n):r.flatCoordinates,r.ends?.flat(),n,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function ce(t,e){if(!t)return null;if(Array.isArray(t)){const o=t.map(n=>ce(n,e));return new Tt(o)}const r=Sr[t.type];return le(new r(t.flatCoordinates,t.layout,t.ends),!1,e)}class Fr extends Or{constructor(){super()}getType(){return"json"}readFeature(e,r){return this.readFeatureFromObject(Z(e),this.getReadOptions(e,r))}readFeatures(e,r){return this.readFeaturesFromObject(Z(e),this.getReadOptions(e,r))}readFeatureFromObject(e,r){return v()}readFeaturesFromObject(e,r){return v()}readGeometry(e,r){return this.readGeometryFromObject(Z(e),this.getReadOptions(e,r))}readGeometryFromObject(e,r){return v()}readProjection(e){return this.readProjectionFromObject(Z(e))}readProjectionFromObject(e){return v()}writeFeature(e,r){return JSON.stringify(this.writeFeatureObject(e,r))}writeFeatureObject(e,r){return v()}writeFeatures(e,r){return JSON.stringify(this.writeFeaturesObject(e,r))}writeFeaturesObject(e,r){return v()}writeGeometry(e,r){return JSON.stringify(this.writeGeometryObject(e,r))}writeGeometryObject(e,r){return v()}}function Z(t){if(typeof t=="string"){const e=JSON.parse(t);return e||null}return t!==null?t:null}class wo extends Fr{constructor(e){e=e||{},super(),this.dataProjection=M(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=M(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,r){let o=null;e.type==="Feature"?o=e:o={type:"Feature",geometry:e,properties:null};const n=ue(o.geometry);if(this.featureClass===Fe)return Ke({geometry:n,id:o.id,properties:o.properties},r);const s=new Me;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&o.geometry_name&&s.setGeometryName(o.geometry_name),s.setGeometry(ce(n,r)),"id"in o&&s.setId(o.id),o.properties&&s.setProperties(o.properties,!0),s}readFeaturesFromObject(e,r){const o=e;let n=null;if(o.type==="FeatureCollection"){const s=e;n=[];const l=s.features;for(let d=0,m=l.length;d<m;++d){const c=this.readFeatureFromObject(l[d],r);c&&n.push(c)}}else n=[this.readFeatureFromObject(e,r)];return n.flat()}readGeometryFromObject(e,r){return Nr(e,r)}readProjectionFromObject(e){const r=e.crs;let o;if(r)if(r.type=="name")o=M(r.properties.name);else if(r.type==="EPSG")o=M("EPSG:"+r.properties.code);else throw new Error("Unknown SRS type");else o=this.dataProjection;return o}writeFeatureObject(e,r){r=this.adaptOptions(r);const o={type:"Feature",geometry:null,properties:null},n=e.getId();if(n!==void 0&&(o.id=n),!e.hasProperties())return o;const s=e.getProperties(),l=e.getGeometry();return l&&(o.geometry=ae(l,r),delete s[e.getGeometryName()]),Ot(s)||(o.properties=s),o}writeFeaturesObject(e,r){r=this.adaptOptions(r);const o=[];for(let n=0,s=e.length;n<s;++n)o.push(this.writeFeatureObject(e[n],r));return{type:"FeatureCollection",features:o}}writeGeometryObject(e,r){return ae(e,this.adaptOptions(r))}}function ue(t,e){if(!t)return null;let r;switch(t.type){case"Point":{r=Tr(t);break}case"LineString":{r=Ir(t);break}case"Polygon":{r=Er(t);break}case"MultiPoint":{r=kr(t);break}case"MultiLineString":{r=Gr(t);break}case"MultiPolygon":{r=Ar(t);break}case"GeometryCollection":{r=Lr(t);break}default:throw new Error("Unsupported GeoJSON type: "+t.type)}return r}function Nr(t,e){const r=ue(t);return ce(r,e)}function Lr(t,e){return t.geometries.map(function(o){return ue(o)})}function Tr(t){const e=t.coordinates;return{type:"Point",flatCoordinates:e,layout:E(e.length)}}function Ir(t){const e=t.coordinates,r=e.flat();return{type:"LineString",flatCoordinates:r,ends:[r.length],layout:E(e[0]?.length||2)}}function Gr(t){const e=t.coordinates,r=e[0]?.[0]?.length||2,o=[],n=Ne(o,0,e,r);return{type:"MultiLineString",flatCoordinates:o,ends:n,layout:E(r)}}function kr(t){const e=t.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:E(e[0]?.length||2)}}function Ar(t){const e=t.coordinates,r=[],o=e[0]?.[0]?.[0].length||2,n=St(r,0,e,o);return{type:"MultiPolygon",flatCoordinates:r,ends:n,layout:E(o)}}function Er(t){const e=t.coordinates,r=[],o=e[0]?.[0]?.length,n=Ne(r,0,e,o);return{type:"Polygon",flatCoordinates:r,ends:n,layout:E(o)}}function ae(t,e){t=le(t,!0,e);const r=t.getType();let o;switch(r){case"Point":{o=Jr(t);break}case"LineString":{o=_r(t);break}case"Polygon":{o=Vr(t,e);break}case"MultiPoint":{o=Dr(t);break}case"MultiLineString":{o=Br(t);break}case"MultiPolygon":{o=Hr(t,e);break}case"GeometryCollection":{o=Rr(t,e);break}case"Circle":{o={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+r)}return o}function Rr(t,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(o){return ae(o,e)})}}function _r(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}function Br(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}function Dr(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}function Hr(t,e){let r;return e&&(r=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(r)}}function Jr(t,e){return{type:"Point",coordinates:t.getCoordinates()}}function Vr(t,e){let r;return e&&(r=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(r)}}const Ur=sr({d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z",displayName:"ChevronRightIcon"}),jo=i.forwardRef(function(e,r){const{label:o,icon:n,onClick:s,isLoading:l,isDisabled:d,isActive:m,tooltipProps:c,buttonProps:g}=e,{containerProps:{className:h,...b}}=Le("tool-button",e),w=Te(h,{"tool-button--active":m,"tool-button--loading":l,"tool-button--disabled":d}),O=typeof m=="boolean"?m?"true":"false":void 0,[S,u]=i.useState(!1),f=y=>{u(!1),s?.(y)};return a.jsx(ke,{label:o,placement:"auto",openDelay:500,...c,isOpen:S,onOpen:()=>u(!0),onClose:()=>u(!1),children:a.jsx(zr,{className:w,ref:r,"aria-label":o,leftIcon:n,iconSpacing:0,padding:0,isDisabled:d,isLoading:l,isActive:m,"aria-pressed":O,...b,...g,onClick:f})})}),zr=i.forwardRef(function(e,r){const{"aria-labelledby":o,"aria-describedby":n,...s}=e;return a.jsx(ie,{ref:r,...s})}),$r="@open-pioneer/toc",z=Mt.bind(void 0,$r),Ye=i.createContext(void 0),Wr=Ye.Provider;function Kr(){const t=i.useContext(Ye);if(!t)throw new Error("useTocWidgetOptions must be used within a TocWidgetOptionsProvider");return t}const qe=i.createContext(void 0),Yr=qe.Provider;function Ze(){const t=i.useContext(qe);if(!t)throw new Error("Internal error: TocModel not found in context");return t}function qr(t){return t.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}function Zr(t){return J(()=>{const e=t.layers.getOperationalLayers({sortByDisplayOrder:!0})??[];return e.reverse(),e},[t])}function Qr(t){return J(()=>{const e=t.children?.getItems({sortByDisplayOrder:!0});return e?.reverse(),e},[t])}function Qe(t){return J(()=>(Cr(t)?t.parentLayer:t).loadState,[t])}function Xr(t){const{layer:e,title:r,description:o,intl:n}=t,s=!!o,l=n.formatMessage({id:"descriptionLabel"}),d=Qe(e)!=="error";return s&&a.jsxs(De,{placement:"bottom-start",children:[a.jsx(We,{children:a.jsx(ie,{isDisabled:!d,className:"toc-layer-item-details-button","aria-label":l,borderRadius:"full",iconSpacing:0,padding:0,variant:"ghost",leftIcon:a.jsx(Ee,{})})}),a.jsx(Ae,{children:a.jsxs(ze,{className:"toc-layer-item-details",overflowY:"auto",maxHeight:"400",children:[a.jsx(He,{}),a.jsx(Ve,{mt:1}),a.jsx($e,{children:r}),a.jsx(Je,{children:o})]})})]})}const eo=i.memo(function(e){const{layer:r}=e,o=z(),[n,s,l]=ro(r),d=J(()=>n.isExpanded,[n]),m=l?l.collapsibleGroups:!1,c=i.useId(),g=Qr(r),h=Qe(r)!=="error",b=o.formatMessage({id:"layerNotAvailable"}),{title:w,description:O,isVisible:S}=J(()=>({title:r.title,description:r.description,isVisible:r.visible}),[r]);let u;return g?.length&&(u=a.jsx(et,{layers:g,ml:4,"aria-label":o.formatMessage({id:"childgroupLabel"},{title:w})})),a.jsxs(H,{as:"li",className:Te("toc-layer-item",`layer-${qr(r.id)}`),children:[a.jsxs(ne,{className:"toc-layer-item-content",width:"100%",flexDirection:"row",align:"center",justifyContent:"space-between",gap:2,minHeight:10,children:[m&&a.jsx(to,{layerTitle:w,layerGroupId:c,expanded:d,onClick:()=>n.setExpanded(!d),hasNestedChildren:!!u}),a.jsx(ar,{"aria-label":w+(h?"":" "+b),isChecked:S,isDisabled:!h,onChange:f=>Xe(r,f.target.checked,l.autoShowParents),children:w}),!h&&a.jsx(ke,{className:"toc-layer-item-content-tooltip",label:b,placement:"right",openDelay:500,children:a.jsx("span",{children:a.jsx(Kt,{className:"toc-layer-item-content-icon",color:"red","aria-label":b})})}),a.jsx(Re,{}),a.jsx(Xr,{layer:r,title:w,description:O,intl:o})]}),u&&a.jsx(Be,{in:d,id:c,className:"toc-collapsible-item",children:u})]})});function to(t){const{layerTitle:e,layerGroupId:r,expanded:o,onClick:n,hasNestedChildren:s}=t,l=z();return a.jsx(tr,{variant:"ghost",borderRadius:"full",padding:0,className:"toc-layer-item-collapse-button",onClick:n,icon:o?a.jsx(rr,{}):a.jsx(Ur,{}),"aria-label":o?l.formatMessage({id:"group.collapse"},{title:e}):l.formatMessage({id:"group.expand"},{title:e}),"aria-expanded":o,"aria-controls":r,visibility:s?"visible":"hidden"})}function ro(t){const e=Ze(),r=Kr(),o=r.isCollapsed,n=i.useMemo(()=>{const s=Ft(!o);return{layerId:t.id,get isExpanded(){return s.value},setExpanded(l){s.value=l}}},[t,o]);return i.useEffect(()=>(e.registerItem(n),()=>e.unregisterItem(n)),[e,n]),[n,e,r]}function Xe(t,e,r){t.setVisible(e),e&&r&&t.parent&&Xe(t.parent,!0,!0)}const oo=i.memo(function(e){const{map:r,"aria-label":o}=e,n=z(),s=Zr(r);return s.length?a.jsx(et,{layers:s,"aria-label":o}):a.jsx(se,{className:"toc-missing-layers","aria-label":o,children:n.formatMessage({id:"missingLayers"})})}),et=i.memo(function(e){const{layers:r,...o}=e,n=i.useMemo(()=>r.map(s=>a.jsx(eo,{layer:s},s.id)),[r]);return a.jsx(H,{children:a.jsx(ir,{as:"ul",className:"toc-layer-list",listStyleType:"none",role:"group",...o,children:n})})}),no=i.memo(function(e){const r=z(),{map:o,showHideAllLayers:n=!0,showCollapseAllGroups:s=!0}=e,l=Ze();return!(!n&&!s)&&a.jsx(H,{className:"toc-tools",children:a.jsxs(er,{placement:"bottom-start",children:[a.jsx(or,{as:ie,className:"toc-tools-button","aria-label":r.formatMessage({id:"toolsLabel"}),borderRadius:"full",iconSpacing:0,padding:3,variant:"ghost",leftIcon:a.jsx(Ee,{})}),a.jsx(Ae,{children:a.jsxs(nr,{className:"tools-menu",children:[n&&a.jsx(we,{"aria-label":r.formatMessage({id:"tools.hideAllLayers"}),onClick:()=>{so(o)},children:r.formatMessage({id:"tools.hideAllLayers"})}),s&&a.jsx(we,{"aria-label":r.formatMessage({id:"tools.collapseAllGroups"}),onClick:()=>{ao(l)},children:r.formatMessage({id:"tools.collapseAllGroups"})})]})})]})})});function so(t){const e=r=>{r.setVisible(!1);const o=r.children?.getItems();if(o)for(const n of o)e(n)};t?.layers.getOperationalLayers().forEach(r=>{e(r)})}function ao(t){t.getItems().forEach(e=>e.setExpanded(!1))}const Se=2,Co=t=>{const e=z(),[r,o]=i.useState(t.isCollapsed||!1),{showTools:n=!1,toolsConfig:s,showBasemapSwitcher:l=!0,basemapSwitcherProps:d,collapsibleGroups:m=!1,autoShowParents:c=!0}=t,{containerProps:g}=Le("toc",t),h=i.useId(),b=i.useMemo(()=>({autoShowParents:c,collapsibleGroups:m,isCollapsed:r}),[c,m,r]),w=Nt(t),O=s?s.showCollapseAllGroups&&b.collapsibleGroups:b.collapsibleGroups;!b.collapsibleGroups&&r&&o(!1);const S=i.useMemo(()=>{const f=Lt();return{getItem(y){return f.get(y)},getItems(){return Array.from(f.values())},registerItem(y){if(f.has(y.layerId))throw new Error(`Item with layerId '${y.layerId}' already registered.`);f.set(y.layerId,y)},unregisterItem(y){if(f.get(y.layerId)!==y)throw new Error(`Item with layerId '${y.layerId}' not registered.`);f.delete(y.layerId)}}},[]);let u;switch(w.kind){case"loading":u=null;break;case"rejected":u=a.jsx(se,{className:"toc-error",children:e.formatMessage({id:"error"})});break;case"resolved":{const f=w.map,y=l&&a.jsx(H,{className:"toc-basemap-switcher",children:a.jsx(Pe,{title:a.jsx(xe,{id:h,size:"sm",mb:Se,children:e.formatMessage({id:"basemapsLabel"})}),children:a.jsx(Wt,{map:f,"aria-labelledby":h,...d})})}),T=a.jsx(Yr,{value:S,children:a.jsx(H,{className:"toc-operational-layers",children:a.jsx(Pe,{title:a.jsx(xe,{size:"sm",mb:2,children:a.jsxs(ne,{children:[a.jsx(se,{my:3,children:e.formatMessage({id:"operationalLayerLabel"})}),a.jsx(Re,{}),n&&a.jsx(no,{map:f,showHideAllLayers:s?.showHideAllLayers,showCollapseAllGroups:O})]})}),children:a.jsx(oo,{map:f,"aria-label":e.formatMessage({id:"operationalLayerLabel"})})})})});u=a.jsxs(a.Fragment,{children:[y,T]});break}}return a.jsx(ne,{...g,direction:"column",gap:Se,children:a.jsx(Wr,{value:b,children:u})})};export{Or as F,wo as G,De as P,jo as T,We as a,ze as b,He as c,Je as d,Co as e,vo as i,le as t,L as u};
