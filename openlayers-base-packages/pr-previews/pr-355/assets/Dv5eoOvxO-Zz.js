import{c as fe,f as I,u as be,o as ve,a as _,r as p,j as t,b as F,d as oe,e as xe,B as $,i as Se,g as ye,h as K,F as we,k as ke}from"./GKRI1gy3_jM5.js";import{B as f,V as Ie,S as T,T as je,O as Me,a as q,b as re,c as Ce,C as Le,F as _e,H as ze,M as Pe,u as ie,d as Ee,e as j,f as M,g as z,h as P,i as Ae,j as L,k as Z,t as Re,P as De,l as Ne,m as Fe}from"./1Ldsgposjnib.js";import{W as ne,P as Te,a as qe,b as Ge,c as Ve,d as Oe,e as He,f as We,g as Be,h as Ue}from"./ClJif9K-JWOE.js";import{W as Y,r as J,a as X,b as $e,E as Ke,V as Ze,S as Ye,O as Je,u as Xe,I as Qe,C as et,c as tt,d as ot,L as rt,e as k,M as it,f as nt,g as at,P as st,N as lt}from"./IW3g58dlMZJc.js";import{G as ae,u as ct,T as w,P as dt,a as pt,b as ut,c as mt,d as gt,e as ht}from"./BVQLpSdFcOrd.js";import{g as ft,c as bt,T as G}from"./B-_-_ilWuicu.js";import{N as vt,P as xt}from"./DZzLIBUEbl3m.js";import{V as St,S as yt,I as wt,Z as kt,a as It}from"./B_i-DRKOs3yy.js";import{_ as Q}from"./Dch09mLNbtBx.js";import{H as se}from"./Bz3n5GBrEqnw.js";import{r as jt,D as Mt}from"./BmThhVzX1ofY.js";import{c as Ct}from"./DAQgTaE-umT1.js";import{I as Lt}from"./C0E4r1kSnl_t.js";import{G as le}from"./BgvcGJC7Ryub.js";import{R as _t}from"./Czk05Yspi68c.js";import{C as zt}from"./BTCspHesR0l9.js";import"./BHiRYJ5HYoFS.js";import"./DXffrmqtQR7f.js";import"./nSoAmxzVJojj.js";import"./lld5JJthhGaR.js";import"./BOLMhMzlBk3i.js";import"./CWFxSAvg3EwL.js";import"./C-BuCPgk5JVK.js";import"./D2ixFaMdy0ws.js";import"./coO0B-EAbm8F.js";var[Pt,ce]=fe({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),N=I(function(e,o){const i=be("Input",e),{children:n,className:a,...s}=ve(e),c=_("chakra-input__group",a),l={},g=ft(n),m=i.field;g.forEach(d=>{var S,b;i&&(m&&d.type.id==="InputLeftElement"&&(l.paddingStart=(S=m.height)!=null?S:m.h),m&&d.type.id==="InputRightElement"&&(l.paddingEnd=(b=m.height)!=null?b:m.h),d.type.id==="InputRightAddon"&&(l.borderEndRadius=0),d.type.id==="InputLeftAddon"&&(l.borderStartRadius=0))});const v=g.map(d=>{var S,b;const C=bt({size:((S=d.props)==null?void 0:S.size)||e.size,variant:((b=d.props)==null?void 0:b.variant)||e.variant});return d.type.id!=="Input"?p.cloneElement(d,C):p.cloneElement(d,Object.assign(C,l,d.props))});return t.jsx(F.div,{className:c,ref:o,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...i.group},"data-group":!0,...s,children:t.jsx(Pt,{value:i,children:v})})});N.displayName="InputGroup";var Et={left:{marginEnd:"-1px",borderEndRadius:0,borderEndColor:"transparent"},right:{marginStart:"-1px",borderStartRadius:0,borderStartColor:"transparent"}},At=F("div",{baseStyle:{flex:"0 0 auto",width:"auto",display:"flex",alignItems:"center",whiteSpace:"nowrap"}}),V=I(function(e,o){var i;const{placement:n="left",...a}=e,s=(i=Et[n])!=null?i:{},c=ce();return t.jsx(At,{ref:o,...a,__css:{...c.addon,...s}})});V.displayName="InputAddon";var de=I(function(e,o){return t.jsx(V,{ref:o,placement:"left",...e,className:_("chakra-input__left-addon",e.className)})});de.displayName="InputLeftAddon";de.id="InputLeftAddon";var O=I(function(e,o){return t.jsx(V,{ref:o,placement:"right",...e,className:_("chakra-input__right-addon",e.className)})});O.displayName="InputRightAddon";O.id="InputRightAddon";var Rt=F("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),E=I(function(e,o){var i,n;const{placement:a="left",...s}=e,c=ce(),l=c.field,m={[a==="left"?"insetStart":"insetEnd"]:"0",width:(i=l?.height)!=null?i:l?.h,height:(n=l?.height)!=null?n:l?.h,fontSize:l?.fontSize,...c.element};return t.jsx(Rt,{ref:o,__css:m,...s})});E.id="InputElement";E.displayName="InputElement";var pe=I(function(e,o){const{className:i,...n}=e,a=_("chakra-input__left-element",i);return t.jsx(E,{ref:o,placement:"left",className:a,...n})});pe.id="InputLeftElement";pe.displayName="InputLeftElement";var H=I(function(e,o){const{className:i,...n}=e,a=_("chakra-input__right-element",i);return t.jsx(E,{ref:o,placement:"right",className:a,...n})});H.id="InputRightElement";H.displayName="InputRightElement";const Dt={height:"25px",width:"25px",borderColor:"#4cb3ff",borderWidth:"3px",borderRadius:"50%",display:"inline-block "};function Nt(r){return t.jsxs(f,{children:[t.jsx(G,{children:r.layer.title}),t.jsx(f,{style:Dt})]})}const u="main";class Ft{mapId=u;vectorSourceFactory;constructor(e){this.vectorSourceFactory=e.references.vectorSourceFactory}async getMapConfig(){return{advanced:{view:new Ie({center:[404747,5757920],zoom:13,constrainResolution:!0,projection:"EPSG:25832"})},layers:[...Tt(),Vt(),qt(this.vectorSourceFactory),Gt(),Ot()]}}}function Tt(){return[new Y({isBaseLayer:!0,title:"Topplus grau",url:"https://www.wmts.nrw.de/topplus_open/1.0.0/WMTSCapabilities.xml",name:"topplus_grau",matrixSet:"EPSG_25832_14",visible:!1,sourceOptions:{attributions:`Kartendarstellung und Präsentationsgraphiken: &copy; Bundesamt für Kartographie und Geodäsie ${new Date().getFullYear()}, <a title="Datenquellen öffnen" aria-label="Datenquellen öffnen" href="https://sg.geodatenzentrum.de/web_public/gdz/datenquellen/Datenquellen_TopPlusOpen.html " target="_blank">Datenquellen</a>`}}),new Y({isBaseLayer:!0,title:"Topplus farbig",url:"https://www.wmts.nrw.de/topplus_open/1.0.0/WMTSCapabilities.xml",name:"topplus_col",matrixSet:"EPSG_25832_14",visible:!0,sourceOptions:{attributions:`Kartendarstellung und Präsentationsgraphiken: &copy; Bundesamt für Kartographie und Geodäsie ${new Date().getFullYear()}, <a title="Datenquellen öffnen" aria-label="Datenquellen öffnen" href="https://sg.geodatenzentrum.de/web_public/gdz/datenquellen/Datenquellen_TopPlusOpen.html " target="_blank">Datenquellen</a>`}}),new T({title:"OpenStreetMaps",visible:!1,isBaseLayer:!0,olLayer:new je({source:new Me})})]}function qt(r){const e="https://ogc-api-test.nrw.de/inspire-us-krankenhaus/v1",o="governmentalservice",i=r.createVectorSource({strategy:"next",baseUrl:e,collectionId:o,limit:1e3,crs:"http://www.opengis.net/def/crs/EPSG/0/25832",attributions:`Land NRW (${new Date().getFullYear()}), <a href='https://www.govdata.de/dl-de/by-2-0'>Datenlizenz Deutschland - Namensnennung - Version 2.0</a>, <a href='https://ogc-api-test.nrw.de/inspire-us-krankenhaus/v1'>Datenquelle</a>`}),n=new q({source:i});return new T({id:"krankenhaus",title:"Krankenhäuser",visible:!1,olLayer:n,attributes:{collectionURL:e+"/collections/"+o}})}function Gt(){return new ne({title:"Schulstandorte",description:"Der vorliegende Datenbestand / Dienst zu den Schulstandorten in NRW stammt aus der Schuldatenbank. Die Informationen werden von den Schulträgern bzw. Schulen selbst eingetragen und aktuell gehalten. Die Daten werden tagesaktuell bereitgestellt und enthalten alle grundlegenden Informationen zu Schulen wie Schulnummer, Schulbezeichnung und Adresse.Der vorliegende Datenbestand / Dienst zu den Schulstandorten in NRW stammt aus der Schuldatenbank. Die Informationen werden von den Schulträgern bzw. Schulen selbst eingetragen und aktuell gehalten. Die Daten werden tagesaktuell bereitgestellt und enthalten alle grundlegenden Informationen zu Schulen wie Schulnummer, Schulbezeichnung und Adresse.Der vorliegende Datenbestand / Dienst zu den Schulstandorten in NRW stammt aus der Schuldatenbank. Die Informationen werden von den Schulträgern bzw. Schulen selbst eingetragen und aktuell gehalten. Die Daten werden tagesaktuell bereitgestellt und enthalten alle grundlegenden Informationen zu Schulen wie Schulnummer, Schulbezeichnung und Adresse.Der vorliegende Datenbestand / Dienst zu den Schulstandorten in NRW stammt aus der Schuldatenbank. Die Informationen werden von den Schulträgern bzw. Schulen selbst eingetragen und aktuell gehalten. Die Daten werden tagesaktuell bereitgestellt und enthalten alle grundlegenden Informationen zu Schulen wie Schulnummer, Schulbezeichnung und Adresse.",visible:!0,url:"https://www.wms.nrw.de/wms/wms_nw_inspire-schulen",sublayers:[{name:"US.education",title:"INSPIRE - WMS Schulstandorte NRW",attributes:{legend:{}}}],sourceOptions:{ratio:1}})}function Vt(){return new ne({title:"Straßennetz Landesbetrieb Straßenbau NRW",url:"https://www.wms.nrw.de/wms/strassen_nrw_wms",visible:!0,sublayers:[{name:"1",title:"Verwaltungen",attributes:{legend:{imageUrl:"https://www.wms.nrw.de/legends/wms/strassen_nrw_wms/1.png"}}},{name:"4",title:"Abschnitte und Äste"},{name:"6",title:"Unfälle"}]})}function Ot(){const r={Component:Nt},e=new re({url:"https://ogc-api.nrw.de/inspire-us-kindergarten/v1/collections/governmentalservice/items?f=json&limit=10000",format:new ae,attributions:'&copy; <a href="http://www.bkg.bund.de" target="_blank">Bundesamt f&uuml;r Kartographie und Geod&auml;sie</a> 2017, <a href="http://sg.geodatenzentrum.de/web_public/Datenquellen_TopPlus_Open.pdf" target="_blank">Datenquellen</a>'}),o=new q({source:e,style:new Ce({image:new Le({fill:new _e({color:"blue"}),radius:4})})});return new T({id:"ogc_kitas",title:"Kindertagesstätten",visible:!0,olLayer:o,attributes:{legend:r,resultListMetadata:[{id:"id",displayName:"ID",width:100,getPropertyValue(i){return i.id}},{propertyName:"pointOfContact.address.postCode",displayName:"PLZ",width:120},{propertyName:"name",displayName:"Name"},{propertyName:"inspireId",displayName:"inspireID"},{displayName:"Gefördert",width:160,getPropertyValue(i){switch(i.properties?.gefoerdert){case"ja":return!0;case"nein":return!1;default:return i.properties?.gefoerdert}}}]}})}class Ht{label;filteredTypes;httpService;constructor(e,o,i){this.label=e,this.filteredTypes=o,this.httpService=i}async search(e,{mapProjection:o,signal:i}){const n=await this.request(e,100,i),a=new ae({dataProjection:"EPSG:4326",featureProjection:o});return n.features.filter(s=>this.filteredTypes.includes(s.properties.type)).map((s,c)=>{const l=a.readGeometry(s.geometry);return{id:s.properties.osm_id||c,label:this.createLabel(s),geometry:l,properties:s.properties}})}async request(e,o,i){const n=new URL("https://photon.komoot.io/api?");n.searchParams.set("q",e),n.searchParams.set("lang","de"),n.searchParams.set("lat","51.961563"),n.searchParams.set("lon","7.628202"),n.searchParams.set("limit",o.toString());const a=await this.httpService.fetch(n,{signal:i});if(!a.ok)throw new Error("Request failed: "+a.status);return await a.json()}createLabel(e){return`${e.properties.name} (${e.properties.osm_value?e.properties.osm_value+", ":""}${e.properties.postcode?e.properties.postcode+", ":""}${e.properties.city?e.properties.city+", ":""}${e.properties.country?e.properties.country+")":")"}`}}const Wt=oe("ol-app:AppModel");function D(r){return r==="selection"||r==="measurement"||r.startsWith("editing-")}class Bt{_mapRegistry;_vectorSelectionSourceFactory;_httpService;_resources=[];_featureHighlight=void 0;_mainContent=J(["toc"]);_searchSources=X();_selectionSources=X();_sourceMetadata=$e();_resultListState=J({key:0,open:!1,input:void 0});constructor({references:e}){this._mapRegistry=e.mapRegistry,this._vectorSelectionSourceFactory=e.vectorSelectionSourceFactory,this._httpService=e.httpService,this.initSearchSources(),this.initSelectionSources().catch(o=>{Wt.error("Failed to initialize selection sources",o)})}destroy(){this.clearHighlight(),this._resources.forEach(e=>e.destroy())}get mainContent(){return this._mainContent.value}get searchSources(){return this._searchSources}get selectionSources(){return this._selectionSources}get sourceMetadata(){return this._sourceMetadata}get resultListState(){return this._resultListState.value}toggleMainContent(e){const o=this._mainContent.value;if(o.includes(e)){this._mainContent.value=o.filter(n=>n!==e);return}let i;D(e)?(i=[e],this.clearHighlight()):(i=o.filter(n=>!D(n)),i.push(e)),this._mainContent.value=i}hideContent(e){this._mainContent.value=this._mainContent.value.filter(o=>o!==e)}clearInteractions(){this._mainContent.value=this._mainContent.value.filter(e=>!D(e))}setResultListInput(e){const o=this._resultListState.value;this._resultListState.value={open:!0,key:o.key+1,input:e}}setResultListVisibility(e){this._resultListState.value={...this._resultListState.value,open:e}}highlightAndZoom(e,o){const i=e.olMap.getViewport();this.clearHighlight(),this._featureHighlight=e.highlightAndZoom(o,{viewPadding:i&&i.offsetWidth<1e3?{top:150,right:75,bottom:50,left:75}:{top:150,right:400,bottom:50,left:400}})}zoom(e,o){const i=e.olMap.getViewport();e.zoom(o,{viewPadding:i&&i.offsetWidth<1e3?{top:150,right:75,bottom:50,left:75}:{top:150,right:400,bottom:50,left:400}})}clearHighlight(){this._featureHighlight&&(this._featureHighlight.destroy(),this._featureHighlight=void 0)}initSearchSources(){const e=new Ht("Photon Geocoder",["city","street"],this._httpService);this._searchSources.push(e)}async initSelectionSources(){const e=["ogc_kitas","ogc_kataster"],i=(await this._mapRegistry.expectMapModel(u)).layers.getOperationalLayers({sortByDisplayOrder:!0});for(const n of i){if(!e.includes(n.id)||!Ut(n.olLayer))continue;const a=this._vectorSelectionSourceFactory.createSelectionSource({vectorLayer:n.olLayer,label:n.title}),s=a.on("changed:status",()=>{a.status!=="available"&&(a.status==="unavailable"||a.status?.kind==="unavailable")&&this.clearHighlight()});this._resources.push(s,a),this._selectionSources.unshift(a),this._sourceMetadata.set(a,n.attributes.resultListMetadata)}}}function Ut(r){return r instanceof q&&r.getSource()instanceof re}const $t={"ol-map":{name:"ol-map",services:{MapConfigProviderImpl:{name:"MapConfigProviderImpl",clazz:Ft,provides:[{name:"map.MapConfigProvider",qualifier:void 0}],references:{vectorSourceFactory:{name:"ogc-features.VectorSourceFactory",qualifier:void 0,all:!1}}},AppModel:{name:"AppModel",clazz:Bt,provides:[{name:"ol-app.AppModel",qualifier:void 0}],references:{vectorSelectionSourceFactory:{name:"selection.VectorSelectionSourceFactory",qualifier:void 0,all:!1},httpService:{name:"http.HttpService",qualifier:void 0,all:!1},mapRegistry:{name:"map.MapRegistry",qualifier:void 0,all:!1}}}},ui:{references:[{name:"map.MapRegistry",qualifier:void 0,all:!1},{name:"ol-app.AppModel",qualifier:void 0,all:!1},{name:"notifier.NotificationService",qualifier:void 0,all:!1},{name:"editing.EditingService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/chakra-integration":{name:"@open-pioneer/chakra-integration",services:{},ui:{references:[]},properties:{}},"@open-pioneer/coordinate-viewer":{name:"@open-pioneer/coordinate-viewer",services:{},ui:{references:[]},properties:{}},"@open-pioneer/editing":{name:"@open-pioneer/editing",services:{EditingServiceImpl:{name:"EditingServiceImpl",clazz:Ke,provides:[{name:"editing.EditingService",qualifier:void 0}],references:{mapRegistry:{name:"map.MapRegistry",qualifier:void 0,all:!1},httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[]},properties:{polygonStyle:{value:{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"red","stroke-width":1.25,"circle-radius":3,"circle-fill-color":"red","circle-stroke-width":1.25,"circle-stroke-color":"red"},required:!1},vertexStyle:{value:{"circle-radius":3,"circle-fill-color":"red","circle-stroke-width":1.25,"circle-stroke-color":"red"},required:!1}}},"@open-pioneer/http":{name:"@open-pioneer/http",services:{HttpServiceImpl:{name:"HttpServiceImpl",clazz:ze,provides:[{name:"http.HttpService",qualifier:"http.HttpService"}],references:{interceptors:{name:"http.Interceptor",qualifier:void 0,all:!0}}}},ui:{references:[]},properties:{}},"@open-pioneer/legend":{name:"@open-pioneer/legend",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map":{name:"@open-pioneer/map",services:{MapRegistryImpl:{name:"MapRegistryImpl",clazz:Pe,provides:[{name:"map.MapRegistry",qualifier:void 0}],references:{providers:{name:"map.MapConfigProvider",qualifier:void 0,all:!0},httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[{name:"map.MapRegistry",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/map-navigation":{name:"@open-pioneer/map-navigation",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map-ui-components":{name:"@open-pioneer/map-ui-components",services:{},ui:{references:[]},properties:{}},"@open-pioneer/measurement":{name:"@open-pioneer/measurement",services:{},ui:{references:[]},properties:{}},"@open-pioneer/notifier":{name:"@open-pioneer/notifier",services:{NotificationServiceImpl:{name:"NotificationServiceImpl",clazz:vt,provides:[{name:"notifier.NotificationService",qualifier:"notifier.NotificationService"}],references:{}}},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/ogc-features":{name:"@open-pioneer/ogc-features",services:{VectorSourceFactory:{name:"VectorSourceFactory",clazz:St,provides:[{name:"ogc-features.VectorSourceFactory",qualifier:void 0}],references:{httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}},SearchSourceFactory:{name:"SearchSourceFactory",clazz:yt,provides:[{name:"ogc-features.SearchSourceFactory",qualifier:void 0}],references:{httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[]},properties:{}},"@open-pioneer/printing":{name:"@open-pioneer/printing",services:{PrintingServiceImpl:{name:"PrintingServiceImpl",clazz:xt,provides:[{name:"printing.PrintingService",qualifier:void 0}],references:{}}},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1},{name:"printing.PrintingService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/react-utils":{name:"@open-pioneer/react-utils",services:{},ui:{references:[]},properties:{}},"@open-pioneer/reactivity":{name:"@open-pioneer/reactivity",services:{},ui:{references:[]},properties:{}},"@open-pioneer/result-list":{name:"@open-pioneer/result-list",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime":{name:"@open-pioneer/runtime",services:{},ui:{references:[]},properties:{}},"@open-pioneer/scale-bar":{name:"@open-pioneer/scale-bar",services:{},ui:{references:[]},properties:{}},"@open-pioneer/scale-viewer":{name:"@open-pioneer/scale-viewer",services:{},ui:{references:[]},properties:{}},"@open-pioneer/search":{name:"@open-pioneer/search",services:{},ui:{references:[]},properties:{}},"@open-pioneer/selection":{name:"@open-pioneer/selection",services:{VectorSelectionSourceFactory:{name:"VectorSelectionSourceFactory",clazz:Ze,provides:[{name:"selection.VectorSelectionSourceFactory",qualifier:void 0}],references:{}}},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/theme":{name:"@open-pioneer/theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/toc":{name:"@open-pioneer/toc",services:{},ui:{references:[]},properties:{}},"@open-pioneer/core":{name:"@open-pioneer/core",services:{},ui:{references:[]},properties:{}},"@open-pioneer/base-theme":{name:"@open-pioneer/base-theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/basemap-switcher":{name:"@open-pioneer/basemap-switcher",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime-react-support":{name:"@open-pioneer/runtime-react-support",services:{},ui:{references:[]},properties:{}},"@open-pioneer/coordinate-search":{name:"@open-pioneer/coordinate-search",services:{},ui:{references:[]},properties:{}}},Kt='.search-box{position:absolute;width:500px;max-width:100%;z-index:1}.editing-tooltip{position:relative;background:#fffc;border-radius:4px;color:#000;padding:4px 8px;opacity:1;white-space:nowrap;font-size:12px;cursor:default;-webkit-user-select:none;user-select:none;font-weight:700}.editing-tooltip-hidden{visibility:hidden}:root,:host{--ol-background-color: white;--ol-accent-background-color: #F5F5F5;--ol-subtle-background-color: rgba(128, 128, 128, .25);--ol-partial-background-color: rgba(255, 255, 255, .75);--ol-foreground-color: #333333;--ol-subtle-foreground-color: #666666;--ol-brand-color: #00AAFF}.ol-box{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner{display:flex}.ol-scale-step-marker{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text{position:absolute;bottom:-5px;font-size:10px;z-index:11;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text{position:absolute;font-size:12px;text-align:center;bottom:25px;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-singlebar{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd{background-color:var(--ol-background-color)}.ol-unsupported{display:none}.ol-viewport,.ol-unselectable{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport canvas{all:unset;overflow:hidden}.ol-viewport{touch-action:pan-x pan-y}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.ol-control{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:hover,.ol-control button:focus{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution a{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution ul{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button{flex-shrink:0}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:block}.ol-overviewmap .ol-overviewmap-map{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}.measurement-tooltip{position:relative;background:#fffc;border-radius:4px;color:#000;padding:4px 8px;opacity:1;white-space:nowrap;font-size:12px;cursor:default;-webkit-user-select:none;user-select:none;font-weight:700}.measurement-active-tooltip{background:#000000e6;border-radius:4px;border-color:#000000e6;opacity:.9;color:#fff}.measurement-finished-tooltip{background-color:#4cb3ffe6;color:#000;border:1px solid white}.measurement-active-tooltip:before,.measurement-finished-tooltip:before{border-top:6px solid rgba(0,0,0,.9);border-right:6px solid transparent;border-left:6px solid transparent;content:"";position:absolute;bottom:-6px;margin-left:-7px;left:50%}.measurement-finished-tooltip:before{border-top-color:#4cb3ff}.printing-overlay{position:absolute;top:0;right:0;bottom:0;left:0;z-index:10000;-webkit-user-select:none;user-select:none;pointer-events:all;cursor:wait;display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#b4b4b4cc}.printing-overlay-status{flex:1 1 auto;font-size:1.5em;text-align:center}.printing-scale-bar.ol-scale-bar{left:var(--printing-scale-bar-left);bottom:var(--printing-scale-bar-bottom)}.search-component .chakra-divider{display:none}.search-component .search-highlighted-match{font-weight:700}.search-component .search-value-container{cursor:text;padding-left:30px!important}.search-component .search-invisible{display:none}.selection-drag-box{background-color:#ffffff4d!important;border:3px solid var(--chakra-colors-background_primary)!important}.selection-tooltip{position:relative;background:#fffc;border-radius:4px;color:#000;padding:4px 8px;opacity:1;white-space:nowrap;font-size:12px;cursor:default;-webkit-user-select:none;user-select:none;font-weight:700}.selection .react-select{cursor:default}.map-container .selection-active{cursor:crosshair}.map-container .selection-inactive{cursor:no-drop}.selection-source-value.selection-source-value--disabled{opacity:.4}.selection-source-value.selection-source-value--disabled span{margin:0 6px 0 0}.result-list-no-data-message{text-align:center;margin-top:50px;font-weight:700;font-size:larger}.result-list-table th,.result-list-table td{overflow-wrap:break-word}.result-list-table.result-list-table--is-resizing *{cursor:col-resize}.result-list-table thead{position:sticky;top:0;z-index:1;background:var(--chakra-colors-background_body)}.result-list-table th{position:relative;border-right-width:thin}.result-list-table tbody tr:hover{background:var(--chakra-colors-background_light)}.result-list-table .result-list-resizer{position:absolute;top:0;height:100%;right:0;width:8px;background:var(--chakra-colors-trails-100);transform:scaleX(.25);cursor:col-resize;-webkit-user-select:none;user-select:none;touch-action:none;padding-left:0}.result-list-table th:last-child .result-list-resizer{width:8px;transform:translate(50%) scaleX(.25)}.result-list-table th .result-list-resizer.result-list-resizer--is-resizing{background:var(--chakra-colors-trails-500);transform:scale(1)}.result-list-table th .result-list-resizer:hover{transform:scale(1)}.scale-bar .ol-scale-bar{margin-bottom:8px;margin-right:8px}.scale-bar .ol-scale-bar,.scale-bar .ol-scale-line{position:relative;bottom:0;left:0;background:none}.scale-bar .ol-scale-bar .ol-scale-bar-inner,.scale-bar .ol-scale-bar .ol-scale-line-inner,.scale-bar .ol-scale-line .ol-scale-bar-inner,.scale-bar .ol-scale-line .ol-scale-line-inner{color:var(--chakra-white);border-color:var(--chakra-white)}',Zt=["en","de"];function Yt(r){switch(r){case"en":return Q(()=>import("./CvJ3958x1k_N.js"),[],import.meta.url).then(e=>e.default);case"de":return Q(()=>import("./C_DKA0u3UQS1.js"),[],import.meta.url).then(e=>e.default)}throw new Error(`Unsupported locale: '${r}'`)}const Jt=xe(Kt),Xt=Object.freeze(Object.defineProperty({__proto__:null,loadMessages:Yt,locales:Zt,packages:$t,styles:Jt},Symbol.toStringTag,{value:"Module"}));var Qt=Ct({displayName:"CloseIcon",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"});const ue="ol-map",y=Ee.bind(void 0,ue),x=ie.bind(void 0,ue),eo=oe("ol-app:Editing");function ee(r){const e=to(r.kind),o=p.useId(),i=x();return t.jsx(f,{role:"dialog","aria-labelledby":o,children:t.jsx(j,{title:t.jsx(M,{id:o,size:"md",mb:2,children:i.formatMessage({id:"editing.title"})}),children:t.jsxs(f,{overflowY:"auto",maxHeight:300,children:[t.jsx(G,{textAlign:"center",children:i.formatMessage({id:"editing.active"})}),t.jsxs(se,{mt:4,align:"center",justify:"center",children:[t.jsx($,{onClick:()=>{e?.reset()},children:i.formatMessage({id:"editing.resetGeometry"})}),t.jsx($,{onClick:()=>{e?.destroy()},children:i.formatMessage({id:"editing.abort"})})]})]})})})}function to(r){const e=y("notifier.NotificationService"),o=y("editing.EditingService"),i=x(),n=y("ol-app.AppModel"),{map:a}=z(u),[s,c]=p.useState();return p.useEffect(()=>{if(!a)return;const l=new oo(e,o,a,i,n,r);return c(l),()=>{l.destroy(),c(void 0)}},[n,o,i,a,e,r]),s}class oo{notificationService;editingService;map;intl;appModel;kind;job;constructor(e,o,i,n,a,s){this.notificationService=e,this.editingService=o,this.map=i,this.intl=n,this.appModel=a,this.kind=s;let c;switch(s){case"create":c=this.createJob();break;case"update":c=this.updateJob();break}this.job=c,this.job.run().catch(l=>{Se(l)||(eo.error("Edit operation failed",l),this.notificationService.notify({level:"error",message:this.intl.formatMessage({id:"editing.error"})}))}).finally(()=>{this.destroy()})}destroy(){this.job?.destroy(),this.job=void 0,this.appModel.hideContent(`editing-${this.kind}`)}reset(){this.job?.reset()}createJob(){let e;return{destroy(){e?.stop(),e=void 0},reset(){e?.reset()},run:async()=>{const o=this.findLayer(),i=new URL(o.attributes.collectionURL+"/items");e=this.editingService.createFeature(this.map,i);const n=await e.whenComplete();if(e=void 0,!n)return;this.notificationService.notify({level:"info",message:this.intl.formatMessage({id:"editing.create.featureCreated"},{featureId:n.featureId})}),(o?.olLayer).getSource()?.refresh()}}}updateJob(){const e=this.map,o=new AbortController,i=o.signal;let n,a,s;function c(){a&&e.olMap.removeInteraction(a),a&&a.dispose(),n&&n.destroy(),o.abort(),a=void 0,n=void 0}return{destroy(){c(),s?.stop(),s=void 0},reset(){s?.reset()},run:async()=>{const l=this.findLayer(),g=l.olLayer,m=new URL(l.attributes.collectionURL+"/items");a=new Ye({layers:[g]}),e.olMap.addInteraction(a),n=ro(this.intl,e.olMap),n.element.classList.remove("editing-tooltip-hidden");let v;for(;;){const{selected:S,deselected:b}=await io(a,i);if(S.length===1&&b.length===0){c(),v=S[0];break}}if(!v)throw Error("Feature is undefined");s=this.editingService.updateFeature(e,m,v);const d=await s.whenComplete();d&&(this.notificationService.notify({level:"info",message:this.intl.formatMessage({id:"editing.update.featureModified"},{featureId:d.featureId})}),g.getSource()?.refresh())}}}findLayer(){const e=this.map.layers.getLayerById("krankenhaus");if(!e)throw new Error("Layer not found");return e}}function ro(r,e){const o=document.createElement("div");o.className="editing-tooltip editing-tooltip-hidden",o.textContent=r.formatMessage({id:"editing.update.tooltip.select"});const i=new Je({element:o,offset:[15,0],positioning:"center-left"}),n=e.on("pointermove",a=>{a.dragging||i.setPosition(a.coordinate)});return e.addOverlay(i),{overlay:i,element:o,destroy(){P(n),e.removeOverlay(i)}}}function io(r,e){let o;const{promise:i,resolve:n,reject:a}=ye();if(e.aborted)return a(K()),i;const s=()=>{o&&P(o),o=void 0,a(K())};return e.addEventListener("abort",s),o=r.on("select",c=>{e.removeEventListener("abort",s),o&&P(o),o=void 0,n(c)}),i}const no="@open-pioneer/coordinate-search",me=ie.bind(void 0,no),ao=3,so=r=>{const{mapId:e,onSelect:o,onClear:i}=r,{containerProps:n}=Ae("coordinate-search",r),{map:a}=z(e),s=me(),c=a?.olMap,l=Xe(c)?.getCode()??"",g=[{label:"EPSG:25832",value:"EPSG:25832"},{label:"EPSG:4326",value:"EPSG:4326"},{label:"EPSG:3857",value:"EPSG:3857"},{label:"EPSG:25833",value:"EPSG:25833"}],[m,v]=p.useState(g[0]),[d,S]=p.useState("");let{coordinates:b}=uo(c);b=b&&l?W(b,l,m.value):b;const C=co(b,ao),B=C||"",[A,R]=p.useState(!1),U=!A&&ge(s,d,m.value);return p.useEffect(()=>{d===""&&R(!0),d!==""&&R(!1)},[d]),t.jsx(f,{...n,children:t.jsx(L,{flexDirection:"row",flexDir:"row",children:t.jsxs(N,{className:"coordinateSearchGroup",children:[t.jsxs(N,{className:"coordinateInputGroup",children:[t.jsx(Qe,{type:"text",value:A?B:d,id:"coordinateInput",onChange:h=>{S(h.target.value)},isInvalid:U,backgroundColor:U?"red.100":"unset",placeholder:B,errorBorderColor:"red.500","aria-label":s.formatMessage({id:"coordinateSearch.ariaLabel"}),onKeyDown:h=>{A&&!h.ctrlKey&&R(!1),h.key=="Enter"&&te(s,d,m.value,l,o)}}),t.jsx(H,{children:d!==""&&t.jsx(Lt,{id:"clearCoordinateSearch",size:"sm",onClick:()=>{S(""),i&&i()},isDisabled:d=="",padding:"0px",icon:t.jsx(Qt,{}),"aria-label":s.formatMessage({id:"coordinateSearch.ariaLabel"})})})]}),t.jsx(O,{padding:"0px",borderLeft:"0px",children:t.jsx(jt,{...n,id:"selectCoordinateSystem",value:m,defaultValue:m,options:g,menuPlacement:"top","aria-label":s.formatMessage({id:"coordinateSearch.ariaLabel"}),classNamePrefix:"coordinate-Search-Select",isSearchable:!1,chakraStyles:{menu:h=>({...h,width:"max-content",minWidth:"100%"}),control:h=>({...h,width:"max-content",minWidth:"100%",color:"white",borderleftstyle:"none",borderLeftRadius:0,padding:0}),valueContainer:h=>({...h,paddingEnd:0}),dropdownIndicator:(h,{selectProps:{menuIsOpen:he}})=>({...h,paddingStart:0,"> svg":{transitionDuration:"normal",transform:`rotate(${he?0:-180}deg)`}})},onChange:h=>{h?.value!==void 0&&(v(h),te(s,d,h?.value,l,o))}})})]})})})};function ge(r,e,o){if(console.log("test"),e=="")return!1;if(!e.includes(" ")||e.split(" ").length!=2)return!0;let i=e;if(r.locale==="de"){if(!/^\d+(,\d+)? \d+(,\d+)?$/.test(e.replaceAll(".","")))return!0;i=e.replaceAll(".","")}else if(r.locale==="en"){if(!/^\d+(.\d+)? \d+(.\d+)?$/.test(e.replaceAll(",","")))return!0;i=e.replaceAll(",","")}console.log(i);const n=Z(o);if(n!==null&&n.getExtent()!==null&&n.getExtent().length==4&&n.getExtent()[0]>parseFloat(i.split(" ")[0])&&n.getExtent()[1]>parseFloat(i.split(" ")[1])&&n.getExtent()[2]<parseFloat(i.split(" ")[0])&&n.getExtent()[3]<parseFloat(i.split(" ")[1]))return console.log("test1"),!0;const a=i.split(" "),s=[parseFloat(a[0].replace(",",".")),parseFloat(a[1].replace(",","."))];try{const c=W(s,o,"EPSG:4326"),l=Z(o);if(l!==null&&l.getExtent()!==null&&l.getExtent().length==4&&l.getExtent()[0]>c[0]&&l.getExtent()[1]>c[1]&&l.getExtent()[2]<c[0]&&l.getExtent()[3]<c[1])return!0}catch{return!0}return!1}function te(r,e,o,i,n){if(o==null||e==""||ge(r,e,o))return;let a=e;if(r.locale==="de"){if(!/^\d+(,\d+)? \d+(,\d+)?$/.test(e.replaceAll(".","")))return!0;a=e.replaceAll(".","")}else if(r.locale==="en"){if(!/^\d+(.\d+)? \d+(.\d+)?$/.test(e.replaceAll(",","")))return!0;a=e.replaceAll(",","")}const s=lo(a,o,i);n&&n({coords:s,projection:i})}function lo(r,e,o){const i=r.split(" "),n=[parseFloat(i[0].replace(",",".")),parseFloat(i[1].replace(",","."))];return W(n,e,o)}function W(r,e,o){return Re(r,e,o)}function co(r,e){const o=me();return r?po(r,e,o):""}function po(r,e,o){if(r[0]==null||r[1]==null)return"";const i=e,[n,a]=r,s=o.formatNumber(n,{maximumFractionDigits:i,minimumFractionDigits:i}),c=o.formatNumber(a,{maximumFractionDigits:i,minimumFractionDigits:i});return s+" "+c}function uo(r){const[e,o]=p.useState();return p.useEffect(()=>{if(!r)return;const i=r.on("pointermove",n=>{o(n.coordinate)});return()=>P(i)},[r]),{coordinates:e}}function mo(){const{map:r}=z(u),e=y("ol-app.AppModel");function o(n){if(!r)return;const a=new De(n);a&&e.highlightAndZoom(r,[a])}function i(){e.clearHighlight()}return t.jsx(so,{mapId:u,onSelect:({coords:n})=>o(n),onClear:i})}function go(){const r=x();return t.jsxs(L,{role:"region","aria-label":r.formatMessage({id:"ariaLabel.footer"}),gap:3,alignItems:"center",justifyContent:"center",children:[t.jsx(et,{mapId:u,precision:2,displayProjectionCode:"EPSG:4326"}),t.jsx(mo,{}),t.jsx(tt,{mapId:u}),t.jsx(ot,{mapId:u})]})}function ho(){const r=p.useId(),e=x();return t.jsx(f,{role:"dialog","aria-labelledby":r,children:t.jsx(j,{title:t.jsx(M,{id:r,size:"md",mb:2,children:e.formatMessage({id:"legendTitle"})}),children:t.jsx(f,{overflowY:"auto",maxHeight:300,children:t.jsx(rt,{mapId:u,showBaseLayers:!0})})})})}function fo(r){return le({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M19 8m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M5 11m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M15 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M6.5 9.5l1.546 -1.311"},child:[]},{tag:"path",attr:{d:"M14 5.5l3 1.5"},child:[]},{tag:"path",attr:{d:"M18.5 10l-1.185 3.318m-1.062 2.972l-.253 .71"},child:[]},{tag:"path",attr:{d:"M13.5 17.5l-7 -5"},child:[]},{tag:"path",attr:{d:"M3 3l18 18"},child:[]}]})(r)}function bo(r){return le({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M19 8m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M5 11m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M15 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M6.5 9.5l3.5 -3"},child:[]},{tag:"path",attr:{d:"M14 5.5l3 1.5"},child:[]},{tag:"path",attr:{d:"M18.5 10l-2.5 7"},child:[]},{tag:"path",attr:{d:"M13.5 17.5l-7 -5"},child:[]}]})(r)}function vo(){const r=x(),e=y("ol-app.AppModel"),o=k(()=>e.resultListState,[e]),i=o.open,{isTocActive:n,isLegendActive:a,isPrintingActive:s}=k(()=>({isTocActive:e.mainContent.includes("toc"),isLegendActive:e.mainContent.includes("legend"),isPrintingActive:e.mainContent.includes("printing")}),[e]);return t.jsxs(L,{role:"toolbar","aria-label":r.formatMessage({id:"ariaLabel.toolbar"}),direction:"column",gap:1,padding:1,children:[t.jsx(xo,{}),o.input&&t.jsx(w,{label:r.formatMessage({id:"resultListTitle"}),icon:t.jsx(qe,{}),isActive:o.open,onClick:()=>e.setResultListVisibility(!i)}),t.jsx(w,{label:r.formatMessage({id:"tocTitle"}),icon:t.jsx(Ge,{}),isActive:n,onClick:()=>e.toggleMainContent("toc")}),t.jsx(w,{label:r.formatMessage({id:"legendTitle"}),icon:t.jsx(Ve,{}),isActive:a,onClick:()=>e.toggleMainContent("legend")}),t.jsx(w,{label:r.formatMessage({id:"printingTitle"}),icon:t.jsx(Oe,{}),isActive:s,onClick:()=>e.toggleMainContent("printing")}),t.jsx(wt,{mapId:u}),t.jsx(kt,{mapId:u}),t.jsx(It,{mapId:u})]})}function xo(){const r=x(),e=y("ol-app.AppModel"),[o,i]=p.useState(!1),{isSelectionActive:n,isMeasurementActive:a,isEditingCreateActive:s,isEditingUpdateActive:c}=k(()=>({isSelectionActive:e.mainContent.includes("selection"),isMeasurementActive:e.mainContent.includes("measurement"),isEditingCreateActive:e.mainContent.includes("editing-create"),isEditingUpdateActive:e.mainContent.includes("editing-update")}),[e]),l=v=>()=>{v(),i(!1)},g={placement:"top"},m=t.jsxs(t.Fragment,{children:[t.jsx(w,{label:s?r.formatMessage({id:"editing.stopTitle"}):r.formatMessage({id:"editing.create.startTitle"}),icon:s?t.jsx(fo,{}):t.jsx(bo,{}),isActive:s,onClick:l(()=>e.toggleMainContent("editing-create")),tooltipProps:g}),t.jsx(w,{label:c?r.formatMessage({id:"editing.stopTitle"}):r.formatMessage({id:"editing.update.startTitle"}),icon:c?t.jsx(He,{}):t.jsx(We,{}),isActive:c,onClick:l(()=>e.toggleMainContent("editing-update")),tooltipProps:g}),t.jsx(w,{label:r.formatMessage({id:"measurementTitle"}),icon:t.jsx(Be,{}),isActive:a,onClick:l(()=>e.toggleMainContent("measurement")),tooltipProps:g}),t.jsx(w,{label:r.formatMessage({id:"selectionTitle"}),icon:t.jsx(Ue,{}),isActive:n,onClick:l(()=>e.toggleMainContent("selection")),tooltipProps:g})]});return t.jsxs(dt,{placement:"left",isLazy:!0,onOpen:()=>i(!0),onClose:()=>i(!1),isOpen:o,children:[t.jsx(pt,{children:t.jsx(So,{})}),t.jsx(we,{children:t.jsxs(ut,{width:"auto",children:[t.jsx(mt,{}),t.jsx(gt,{children:t.jsx(se,{spacing:2,children:m})})]})})]})}const So=p.forwardRef(function(e,o){const i=x(),n=ct(),{onClick:a,...s}=n.getTriggerProps();return t.jsx(w,{ref:o,label:i.formatMessage({id:"mapInteractions.title"}),icon:t.jsx(Te,{}),onClick:a,buttonProps:s})});function yo(){const r=p.useId(),e=x();return t.jsx(f,{role:"dialog","aria-labelledby":r,children:t.jsx(j,{title:t.jsx(M,{id:r,size:"md",mb:2,children:e.formatMessage({id:"measurementTitle"})}),children:t.jsx(it,{mapId:u})})})}function wo(){const r=y("ol-app.AppModel"),e=k(()=>r.resultListState,[r]),[o,i]=p.useState([]),[n,a]=p.useState([]),s=p.useCallback(c=>{i(c.features),a(c.getFeatureIds())},[]);return p.useEffect(()=>{console.log("Anzahl Features: "+o.length),console.log("SelectedIds: "+n.toString())},[o,n]),e.input&&t.jsx(f,{className:"result-list-container",position:"absolute",visibility:e.open?"visible":"hidden",bottom:"0",backgroundColor:"white",width:"100%",height:"400px",zIndex:1,borderTop:"2px solid",borderBottom:"2px solid",borderColor:"trails.100",children:t.jsx(_t,{input:e.input,mapId:u,onSelectionChange:s},e.key)})}function ko(){const{map:r}=z(u),e=y("ol-app.AppModel"),o=k(()=>e.searchSources.getItems(),[e]);function i(a){if(console.debug("The user selected the following item: ",a.result),!r)return;const s=a.result.geometry;s&&e.highlightAndZoom(r,[s])}function n(){console.debug("The user cleared the search"),e.clearHighlight()}return t.jsx(f,{backgroundColor:"white",borderWidth:"1px",borderRadius:"lg",padding:2,boxShadow:"lg",mt:5,className:"search-box",children:t.jsx(nt,{mapId:u,sources:o,maxResultsPerGroup:10,onSelect:i,onClear:n})})}function Io(){const r=x(),e=y("notifier.NotificationService"),o=p.useId(),{map:i}=z(u),n=y("ol-app.AppModel"),a=k(()=>n.selectionSources.getItems(),[n]),s={numberOptions:{maximumFractionDigits:3},dateOptions:{dateStyle:"medium",timeStyle:"medium",timeZone:"UTC"}};function c(g){const{source:m,results:v}=g;if(!i){console.debug("Map not ready");return}const d=n.sourceMetadata.get(m);if(!d){console.warn("Can not show results because no metadata could be found");return}n.setResultListInput({columns:d,data:v,formatOptions:s}),e.notify({level:"info",message:r.formatMessage({id:"foundResults"},{resultsCount:v.length}),displayDuration:4e3})}function l(g){n.clearHighlight()}return t.jsx(f,{role:"dialog","aria-labelledby":o,children:t.jsx(j,{title:t.jsx(M,{id:o,size:"md",mb:2,children:r.formatMessage({id:"selectionTitle"})}),children:t.jsx(at,{mapId:u,sources:a,onSelectionComplete:c,onSelectionSourceChanged:l})})})}function jo(){const r=p.useId(),e=x();return t.jsx(f,{role:"dialog","aria-labelledby":r,children:t.jsx(j,{title:t.jsx(M,{id:r,size:"md",mb:2,children:t.jsx(G,{children:e.formatMessage({id:"tocTitle"})})}),children:t.jsx(f,{overflowY:"auto",maxHeight:300,children:t.jsx(ht,{mapId:u,showTools:!0,basemapSwitcherProps:{allowSelectingEmptyBasemap:!0}})})})})}function Mo(){const r=p.useId(),e=x();return t.jsx(f,{role:"dialog","aria-labelledby":r,children:t.jsx(j,{title:t.jsx(M,{id:r,size:"md",mb:2,children:e.formatMessage({id:"printingTitle"})}),children:t.jsx(st,{mapId:u})})})}function Co(){const r=x(),e=y("ol-app.AppModel"),{resultListState:o,mainContent:i}=k(()=>({resultListState:e.resultListState,mainContent:e.mainContent}),[e]),n=o.input&&o.open;return t.jsxs(L,{height:"100%",direction:"column",overflow:"hidden",children:[t.jsx(lt,{position:"top-right"}),t.jsxs(j,{title:t.jsx(f,{role:"region","aria-label":r.formatMessage({id:"ariaLabel.header"}),textAlign:"center",py:1,children:t.jsx(M,{size:"md",children:"Sample Application"})}),children:[t.jsx(L,{flex:"1",direction:"column",position:"relative",children:t.jsxs(Ne,{mapId:u,role:"main","aria-label":r.formatMessage({id:"ariaLabel.map"}),viewPadding:n?{bottom:400}:void 0,children:[t.jsx(zt,{centerContent:!0,children:t.jsx(ko,{})}),t.jsx(Lo,{mainContent:i}),t.jsx(Fe,{position:"bottom-right",horizontalGap:10,verticalGap:45,children:t.jsx(vo,{})}),t.jsx(wo,{})]})}),t.jsx(go,{})]})]})}function Lo(r){const{mainContent:e}=r,o=p.useMemo(()=>{const i=n=>{switch(n){case"toc":return t.jsx(jo,{},n);case"legend":return t.jsx(ho,{},n);case"printing":return t.jsx(Mo,{},n);case"selection":return t.jsx(Io,{},n);case"measurement":return t.jsx(yo,{},n);case"editing-create":return t.jsx(ee,{kind:"create"},n);case"editing-update":return t.jsx(ee,{kind:"update"},n)}};return e.map(n=>i(n))},[e]);return t.jsx(_o,{children:o})}function _o(r){const e=r.children,o=[];for(const i of e)i&&(o.length&&o.push(t.jsx(Mt,{mt:4,mb:4},o.length)),o.push(i));if(o.length!==0)return t.jsx(f,{position:"absolute",top:"100px",left:4,maxHeight:"calc(100% - 140px)",width:350,maxWidth:350,zIndex:1,backgroundColor:"white",borderWidth:"1px",borderRadius:"lg",padding:2,boxShadow:"lg",overflow:"auto",children:o})}const zo=new URLSearchParams(window.location.search),Po=zo.get("lang")||void 0,Eo=ke({component:Co,appMetadata:Xt,config:{locale:Po,properties:{"@open-pioneer/local-storage":{storageId:"ol-app-state"}}}});customElements.define("ol-map-app",Eo);
