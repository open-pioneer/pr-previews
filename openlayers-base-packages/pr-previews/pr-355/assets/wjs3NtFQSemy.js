import{c as ve,f as j,u as xe,o as Se,a as _,r as u,j as t,b as T,d as re,e as ye,B as Z,i as we,g as ke,h as Y,F as je,k as Ce,l as Ie}from"./CD-18dKV5pkg.js";import{B as h,V as Me,S as q,T as Le,O as _e,a as V,b as ie,c as Pe,C as Ee,F as ze,H as Ae,M as Re,u as ne,d as De,e as C,f as I,g as P,h as E,i as Fe,j as N,k as M,t as Ne,P as Ge,D as Te,l as qe,m as Ve}from"./AoeNcYuRtWQ6.js";import{W as ae,P as Oe,a as He,b as We,c as Be,d as Ue,e as Ke,f as $e,g as Ze,h as Ye}from"./C7G7vF3NnUIa.js";import{W as J,r as X,a as Q,b as Je,E as Xe,V as Qe,S as et,O as tt,u as ot,I as rt,C as it,c as nt,d as at,L as st,e as k,M as lt,f as ct,g as dt,P as pt,N as ut}from"./v2FJ-h-1q5xG.js";import{G as se,u as mt,T as y,P as gt,a as ht,b as ft,c as bt,d as vt,e as xt}from"./_WdQnFqeMWLn.js";import{g as St,c as yt,T as O}from"./BLIC5VecVxZZ.js";import{N as wt,P as kt}from"./I8B6AwwoDoHy.js";import{V as jt,S as Ct,I as It,Z as Mt,a as Lt}from"./DnvUX7hLC7wS.js";import{_ as ee}from"./CmsKOCeNyeyo.js";import{H as le}from"./gA7OqDPTw3cF.js";import{r as _t,D as Pt}from"./qTksxUH-B49T.js";import{c as Et}from"./BopYrmYmGRTh.js";import{I as zt}from"./DrjXy5KhTNTy.js";import{G as ce}from"./C424_tI-d1cG.js";import{R as At}from"./Cie4jM-h49Kc.js";import{C as Rt}from"./75YRiI63rrqg.js";import"./A4wh6kuVSqAF.js";import"./A_GRpKmqIneZ.js";import"./CVnQBdhZEw3G.js";import"./33trO6j0Jpx2.js";import"./BXewjEN4hrMh.js";import"./DHzzyoS_YCcI.js";import"./B06hq_FZvFKt.js";import"./DjSOkTPjD6Qz.js";import"./DxtePs2sXceF.js";var[Dt,de]=ve({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),G=j(function(e,o){const r=xe("Input",e),{children:n,className:a,...s}=Se(e),c=_("chakra-input__group",a),l={},p=St(n),m=r.field;p.forEach(d=>{var v,S;r&&(m&&d.type.id==="InputLeftElement"&&(l.paddingStart=(v=m.height)!=null?v:m.h),m&&d.type.id==="InputRightElement"&&(l.paddingEnd=(S=m.height)!=null?S:m.h),d.type.id==="InputRightAddon"&&(l.borderEndRadius=0),d.type.id==="InputLeftAddon"&&(l.borderStartRadius=0))});const f=p.map(d=>{var v,S;const w=yt({size:((v=d.props)==null?void 0:v.size)||e.size,variant:((S=d.props)==null?void 0:S.variant)||e.variant});return d.type.id!=="Input"?u.cloneElement(d,w):u.cloneElement(d,Object.assign(w,l,d.props))});return t.jsx(T.div,{className:c,ref:o,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...r.group},"data-group":!0,...s,children:t.jsx(Dt,{value:r,children:f})})});G.displayName="InputGroup";var Ft={left:{marginEnd:"-1px",borderEndRadius:0,borderEndColor:"transparent"},right:{marginStart:"-1px",borderStartRadius:0,borderStartColor:"transparent"}},Nt=T("div",{baseStyle:{flex:"0 0 auto",width:"auto",display:"flex",alignItems:"center",whiteSpace:"nowrap"}}),H=j(function(e,o){var r;const{placement:n="left",...a}=e,s=(r=Ft[n])!=null?r:{},c=de();return t.jsx(Nt,{ref:o,...a,__css:{...c.addon,...s}})});H.displayName="InputAddon";var pe=j(function(e,o){return t.jsx(H,{ref:o,placement:"left",...e,className:_("chakra-input__left-addon",e.className)})});pe.displayName="InputLeftAddon";pe.id="InputLeftAddon";var W=j(function(e,o){return t.jsx(H,{ref:o,placement:"right",...e,className:_("chakra-input__right-addon",e.className)})});W.displayName="InputRightAddon";W.id="InputRightAddon";var Gt=T("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),z=j(function(e,o){var r,n;const{placement:a="left",...s}=e,c=de(),l=c.field,m={[a==="left"?"insetStart":"insetEnd"]:"0",width:(r=l?.height)!=null?r:l?.h,height:(n=l?.height)!=null?n:l?.h,fontSize:l?.fontSize,...c.element};return t.jsx(Gt,{ref:o,__css:m,...s})});z.id="InputElement";z.displayName="InputElement";var ue=j(function(e,o){const{className:r,...n}=e,a=_("chakra-input__left-element",r);return t.jsx(z,{ref:o,placement:"left",className:a,...n})});ue.id="InputLeftElement";ue.displayName="InputLeftElement";var B=j(function(e,o){const{className:r,...n}=e,a=_("chakra-input__right-element",r);return t.jsx(z,{ref:o,placement:"right",className:a,...n})});B.id="InputRightElement";B.displayName="InputRightElement";const Tt={height:"25px",width:"25px",borderColor:"#4cb3ff",borderWidth:"3px",borderRadius:"50%",display:"inline-block "};function qt(i){return t.jsxs(h,{children:[t.jsx(O,{children:i.layer.title}),t.jsx(h,{style:Tt})]})}const L="main";class Vt{mapId=L;vectorSourceFactory;constructor(e){this.vectorSourceFactory=e.references.vectorSourceFactory}async getMapConfig(){return{advanced:{view:new Me({center:[404747,5757920],zoom:13,constrainResolution:!0,projection:"EPSG:25832"})},layers:[...Ot(),Bt(),Ht(this.vectorSourceFactory),Wt(),Ut()]}}}function Ot(){return[new J({isBaseLayer:!0,title:"Topplus grau",url:"https://www.wmts.nrw.de/topplus_open/1.0.0/WMTSCapabilities.xml",name:"topplus_grau",matrixSet:"EPSG_25832_14",visible:!1,sourceOptions:{attributions:`Kartendarstellung und Präsentationsgraphiken: &copy; Bundesamt für Kartographie und Geodäsie ${new Date().getFullYear()}, <a title="Datenquellen öffnen" aria-label="Datenquellen öffnen" href="https://sg.geodatenzentrum.de/web_public/gdz/datenquellen/Datenquellen_TopPlusOpen.html " target="_blank">Datenquellen</a>`}}),new J({isBaseLayer:!0,title:"Topplus farbig",url:"https://www.wmts.nrw.de/topplus_open/1.0.0/WMTSCapabilities.xml",name:"topplus_col",matrixSet:"EPSG_25832_14",visible:!0,sourceOptions:{attributions:`Kartendarstellung und Präsentationsgraphiken: &copy; Bundesamt für Kartographie und Geodäsie ${new Date().getFullYear()}, <a title="Datenquellen öffnen" aria-label="Datenquellen öffnen" href="https://sg.geodatenzentrum.de/web_public/gdz/datenquellen/Datenquellen_TopPlusOpen.html " target="_blank">Datenquellen</a>`}}),new q({title:"OpenStreetMaps",visible:!1,isBaseLayer:!0,olLayer:new Le({source:new _e})})]}function Ht(i){const e="https://ogc-api-test.nrw.de/inspire-us-krankenhaus/v1",o="governmentalservice",r=i.createVectorSource({strategy:"next",baseUrl:e,collectionId:o,limit:1e3,crs:"http://www.opengis.net/def/crs/EPSG/0/25832",attributions:`Land NRW (${new Date().getFullYear()}), <a href='https://www.govdata.de/dl-de/by-2-0'>Datenlizenz Deutschland - Namensnennung - Version 2.0</a>, <a href='https://ogc-api-test.nrw.de/inspire-us-krankenhaus/v1'>Datenquelle</a>`}),n=new V({source:r});return new q({id:"krankenhaus",title:"Krankenhäuser",visible:!1,olLayer:n,attributes:{collectionURL:e+"/collections/"+o}})}function Wt(){return new ae({title:"Schulstandorte",description:"Der vorliegende Datenbestand / Dienst zu den Schulstandorten in NRW stammt aus der Schuldatenbank. Die Informationen werden von den Schulträgern bzw. Schulen selbst eingetragen und aktuell gehalten. Die Daten werden tagesaktuell bereitgestellt und enthalten alle grundlegenden Informationen zu Schulen wie Schulnummer, Schulbezeichnung und Adresse.Der vorliegende Datenbestand / Dienst zu den Schulstandorten in NRW stammt aus der Schuldatenbank. Die Informationen werden von den Schulträgern bzw. Schulen selbst eingetragen und aktuell gehalten. Die Daten werden tagesaktuell bereitgestellt und enthalten alle grundlegenden Informationen zu Schulen wie Schulnummer, Schulbezeichnung und Adresse.Der vorliegende Datenbestand / Dienst zu den Schulstandorten in NRW stammt aus der Schuldatenbank. Die Informationen werden von den Schulträgern bzw. Schulen selbst eingetragen und aktuell gehalten. Die Daten werden tagesaktuell bereitgestellt und enthalten alle grundlegenden Informationen zu Schulen wie Schulnummer, Schulbezeichnung und Adresse.Der vorliegende Datenbestand / Dienst zu den Schulstandorten in NRW stammt aus der Schuldatenbank. Die Informationen werden von den Schulträgern bzw. Schulen selbst eingetragen und aktuell gehalten. Die Daten werden tagesaktuell bereitgestellt und enthalten alle grundlegenden Informationen zu Schulen wie Schulnummer, Schulbezeichnung und Adresse.",visible:!0,url:"https://www.wms.nrw.de/wms/wms_nw_inspire-schulen",sublayers:[{name:"US.education",title:"INSPIRE - WMS Schulstandorte NRW",attributes:{legend:{}}}],sourceOptions:{ratio:1}})}function Bt(){return new ae({title:"Straßennetz Landesbetrieb Straßenbau NRW",url:"https://www.wms.nrw.de/wms/strassen_nrw_wms",visible:!0,sublayers:[{name:"1",title:"Verwaltungen",attributes:{legend:{imageUrl:"https://www.wms.nrw.de/legends/wms/strassen_nrw_wms/1.png"}}},{name:"4",title:"Abschnitte und Äste"},{name:"6",title:"Unfälle"}]})}function Ut(){const i={Component:qt},e=new ie({url:"https://ogc-api.nrw.de/inspire-us-kindergarten/v1/collections/governmentalservice/items?f=json&limit=10000",format:new se,attributions:'&copy; <a href="http://www.bkg.bund.de" target="_blank">Bundesamt f&uuml;r Kartographie und Geod&auml;sie</a> 2017, <a href="http://sg.geodatenzentrum.de/web_public/Datenquellen_TopPlus_Open.pdf" target="_blank">Datenquellen</a>'}),o=new V({source:e,style:new Pe({image:new Ee({fill:new ze({color:"blue"}),radius:4})})});return new q({id:"ogc_kitas",title:"Kindertagesstätten",visible:!0,olLayer:o,attributes:{legend:i,resultListMetadata:[{id:"id",displayName:"ID",width:100,getPropertyValue(r){return r.id}},{propertyName:"pointOfContact.address.postCode",displayName:"PLZ",width:120},{propertyName:"name",displayName:"Name"},{propertyName:"inspireId",displayName:"inspireID"},{displayName:"Gefördert",width:160,getPropertyValue(r){switch(r.properties?.gefoerdert){case"ja":return!0;case"nein":return!1;default:return r.properties?.gefoerdert}}}]}})}class Kt{label;filteredTypes;httpService;constructor(e,o,r){this.label=e,this.filteredTypes=o,this.httpService=r}async search(e,{mapProjection:o,signal:r}){const n=await this.request(e,100,r),a=new se({dataProjection:"EPSG:4326",featureProjection:o});return n.features.filter(s=>this.filteredTypes.includes(s.properties.type)).map((s,c)=>{const l=a.readGeometry(s.geometry);return{id:s.properties.osm_id||c,label:this.createLabel(s),geometry:l,properties:s.properties}})}async request(e,o,r){const n=new URL("https://photon.komoot.io/api?");n.searchParams.set("q",e),n.searchParams.set("lang","de"),n.searchParams.set("lat","51.961563"),n.searchParams.set("lon","7.628202"),n.searchParams.set("limit",o.toString());const a=await this.httpService.fetch(n,{signal:r});if(!a.ok)throw new Error("Request failed: "+a.status);return await a.json()}createLabel(e){return`${e.properties.name} (${e.properties.osm_value?e.properties.osm_value+", ":""}${e.properties.postcode?e.properties.postcode+", ":""}${e.properties.city?e.properties.city+", ":""}${e.properties.country?e.properties.country+")":")"}`}}const $t=re("ol-app:AppModel");function F(i){return i==="selection"||i==="measurement"||i.startsWith("editing-")}class Zt{_mapRegistry;_vectorSelectionSourceFactory;_httpService;_resources=[];_featureHighlight=void 0;_mainContent=X(["toc"]);_searchSources=Q();_selectionSources=Q();_sourceMetadata=Je();_resultListState=X({key:0,open:!1,input:void 0});constructor({references:e}){this._mapRegistry=e.mapRegistry,this._vectorSelectionSourceFactory=e.vectorSelectionSourceFactory,this._httpService=e.httpService,this.initSearchSources(),this.initSelectionSources().catch(o=>{$t.error("Failed to initialize selection sources",o)})}destroy(){this.clearHighlight(),this._resources.forEach(e=>e.destroy())}get mainContent(){return this._mainContent.value}get searchSources(){return this._searchSources}get selectionSources(){return this._selectionSources}get sourceMetadata(){return this._sourceMetadata}get resultListState(){return this._resultListState.value}toggleMainContent(e){const o=this._mainContent.value;if(o.includes(e)){this._mainContent.value=o.filter(n=>n!==e);return}let r;F(e)?(r=[e],this.clearHighlight()):(r=o.filter(n=>!F(n)),r.push(e)),this._mainContent.value=r}hideContent(e){this._mainContent.value=this._mainContent.value.filter(o=>o!==e)}clearInteractions(){this._mainContent.value=this._mainContent.value.filter(e=>!F(e))}setResultListInput(e){const o=this._resultListState.value;this._resultListState.value={open:!0,key:o.key+1,input:e}}setResultListVisibility(e){this._resultListState.value={...this._resultListState.value,open:e}}highlightAndZoom(e,o){const r=e.olMap.getViewport();this.clearHighlight(),this._featureHighlight=e.highlightAndZoom(o,{viewPadding:r&&r.offsetWidth<1e3?{top:150,right:75,bottom:50,left:75}:{top:150,right:400,bottom:50,left:400}})}zoom(e,o){const r=e.olMap.getViewport();e.zoom(o,{viewPadding:r&&r.offsetWidth<1e3?{top:150,right:75,bottom:50,left:75}:{top:150,right:400,bottom:50,left:400}})}clearHighlight(){this._featureHighlight&&(this._featureHighlight.destroy(),this._featureHighlight=void 0)}initSearchSources(){const e=new Kt("Photon Geocoder",["city","street"],this._httpService);this._searchSources.push(e)}async initSelectionSources(){const e=["ogc_kitas","ogc_kataster"],r=(await this._mapRegistry.expectMapModel(L)).layers.getOperationalLayers({sortByDisplayOrder:!0});for(const n of r){if(!e.includes(n.id)||!Yt(n.olLayer))continue;const a=this._vectorSelectionSourceFactory.createSelectionSource({vectorLayer:n.olLayer,label:n.title}),s=a.on("changed:status",()=>{a.status!=="available"&&(a.status==="unavailable"||a.status?.kind==="unavailable")&&this.clearHighlight()});this._resources.push(s,a),this._selectionSources.unshift(a),this._sourceMetadata.set(a,n.attributes.resultListMetadata)}}}function Yt(i){return i instanceof V&&i.getSource()instanceof ie}const Jt={"ol-map":{name:"ol-map",services:{MapConfigProviderImpl:{name:"MapConfigProviderImpl",clazz:Vt,provides:[{name:"map.MapConfigProvider",qualifier:void 0}],references:{vectorSourceFactory:{name:"ogc-features.VectorSourceFactory",qualifier:void 0,all:!1}}},AppModel:{name:"AppModel",clazz:Zt,provides:[{name:"ol-app.AppModel",qualifier:void 0}],references:{vectorSelectionSourceFactory:{name:"selection.VectorSelectionSourceFactory",qualifier:void 0,all:!1},httpService:{name:"http.HttpService",qualifier:void 0,all:!1},mapRegistry:{name:"map.MapRegistry",qualifier:void 0,all:!1}}}},ui:{references:[{name:"map.MapRegistry",qualifier:void 0,all:!1},{name:"ol-app.AppModel",qualifier:void 0,all:!1},{name:"notifier.NotificationService",qualifier:void 0,all:!1},{name:"editing.EditingService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/chakra-integration":{name:"@open-pioneer/chakra-integration",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime":{name:"@open-pioneer/runtime",services:{},ui:{references:[]},properties:{}},"@open-pioneer/react-utils":{name:"@open-pioneer/react-utils",services:{},ui:{references:[]},properties:{}},"@open-pioneer/http":{name:"@open-pioneer/http",services:{HttpServiceImpl:{name:"HttpServiceImpl",clazz:Ae,provides:[{name:"http.HttpService",qualifier:"http.HttpService"}],references:{interceptors:{name:"http.Interceptor",qualifier:void 0,all:!0}}}},ui:{references:[]},properties:{}},"@open-pioneer/notifier":{name:"@open-pioneer/notifier",services:{NotificationServiceImpl:{name:"NotificationServiceImpl",clazz:wt,provides:[{name:"notifier.NotificationService",qualifier:"notifier.NotificationService"}],references:{}}},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/reactivity":{name:"@open-pioneer/reactivity",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map":{name:"@open-pioneer/map",services:{MapRegistryImpl:{name:"MapRegistryImpl",clazz:Re,provides:[{name:"map.MapRegistry",qualifier:void 0}],references:{providers:{name:"map.MapConfigProvider",qualifier:void 0,all:!0},httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[{name:"map.MapRegistry",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/theme":{name:"@open-pioneer/theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/ogc-features":{name:"@open-pioneer/ogc-features",services:{VectorSourceFactory:{name:"VectorSourceFactory",clazz:jt,provides:[{name:"ogc-features.VectorSourceFactory",qualifier:void 0}],references:{httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}},SearchSourceFactory:{name:"SearchSourceFactory",clazz:Ct,provides:[{name:"ogc-features.SearchSourceFactory",qualifier:void 0}],references:{httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[]},properties:{}},"@open-pioneer/map-ui-components":{name:"@open-pioneer/map-ui-components",services:{},ui:{references:[]},properties:{}},"@open-pioneer/coordinate-viewer":{name:"@open-pioneer/coordinate-viewer",services:{},ui:{references:[]},properties:{}},"@open-pioneer/scale-bar":{name:"@open-pioneer/scale-bar",services:{},ui:{references:[]},properties:{}},"@open-pioneer/scale-viewer":{name:"@open-pioneer/scale-viewer",services:{},ui:{references:[]},properties:{}},"@open-pioneer/printing":{name:"@open-pioneer/printing",services:{PrintingServiceImpl:{name:"PrintingServiceImpl",clazz:kt,provides:[{name:"printing.PrintingService",qualifier:void 0}],references:{}}},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1},{name:"printing.PrintingService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/map-navigation":{name:"@open-pioneer/map-navigation",services:{},ui:{references:[]},properties:{}},"@open-pioneer/toc":{name:"@open-pioneer/toc",services:{},ui:{references:[]},properties:{}},"@open-pioneer/coordinate-search":{name:"@open-pioneer/coordinate-search",services:{},ui:{references:[]},properties:{}},"@open-pioneer/editing":{name:"@open-pioneer/editing",services:{EditingServiceImpl:{name:"EditingServiceImpl",clazz:Xe,provides:[{name:"editing.EditingService",qualifier:void 0}],references:{mapRegistry:{name:"map.MapRegistry",qualifier:void 0,all:!1},httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[]},properties:{polygonStyle:{value:{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"red","stroke-width":1.25,"circle-radius":3,"circle-fill-color":"red","circle-stroke-width":1.25,"circle-stroke-color":"red"},required:!1},vertexStyle:{value:{"circle-radius":3,"circle-fill-color":"red","circle-stroke-width":1.25,"circle-stroke-color":"red"},required:!1}}},"@open-pioneer/legend":{name:"@open-pioneer/legend",services:{},ui:{references:[]},properties:{}},"@open-pioneer/measurement":{name:"@open-pioneer/measurement",services:{},ui:{references:[]},properties:{}},"@open-pioneer/result-list":{name:"@open-pioneer/result-list",services:{},ui:{references:[]},properties:{}},"@open-pioneer/search":{name:"@open-pioneer/search",services:{},ui:{references:[]},properties:{}},"@open-pioneer/selection":{name:"@open-pioneer/selection",services:{VectorSelectionSourceFactory:{name:"VectorSelectionSourceFactory",clazz:Qe,provides:[{name:"selection.VectorSelectionSourceFactory",qualifier:void 0}],references:{}}},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/core":{name:"@open-pioneer/core",services:{},ui:{references:[]},properties:{}},"@open-pioneer/base-theme":{name:"@open-pioneer/base-theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime-react-support":{name:"@open-pioneer/runtime-react-support",services:{},ui:{references:[]},properties:{}},"@open-pioneer/basemap-switcher":{name:"@open-pioneer/basemap-switcher",services:{},ui:{references:[]},properties:{}}},Xt='.search-box{position:absolute;width:500px;max-width:100%;z-index:1}:root,:host{--ol-background-color: white;--ol-accent-background-color: #F5F5F5;--ol-subtle-background-color: rgba(128, 128, 128, .25);--ol-partial-background-color: rgba(255, 255, 255, .75);--ol-foreground-color: #333333;--ol-subtle-foreground-color: #666666;--ol-brand-color: #00AAFF}.ol-box{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner{display:flex}.ol-scale-step-marker{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text{position:absolute;bottom:-5px;font-size:10px;z-index:11;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text{position:absolute;font-size:12px;text-align:center;bottom:25px;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-singlebar{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd{background-color:var(--ol-background-color)}.ol-unsupported{display:none}.ol-viewport,.ol-unselectable{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport canvas{all:unset;overflow:hidden}.ol-viewport{touch-action:pan-x pan-y}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.ol-control{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:hover,.ol-control button:focus{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution a{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution ul{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button{flex-shrink:0}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:block}.ol-overviewmap .ol-overviewmap-map{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}.map-container .ol-viewport .ol-attribution{bottom:var(--map-padding-bottom);right:var(--map-padding-right)}.printing-overlay{position:absolute;top:0;right:0;bottom:0;left:0;z-index:10000;-webkit-user-select:none;user-select:none;pointer-events:all;cursor:wait;display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#b4b4b4cc}.printing-overlay-status{flex:1 1 auto;font-size:1.5em;text-align:center}.printing-scale-bar.ol-scale-bar{left:var(--printing-scale-bar-left);bottom:var(--printing-scale-bar-bottom)}.editing-tooltip{position:relative;background:#fffc;border-radius:4px;color:#000;padding:4px 8px;opacity:1;white-space:nowrap;font-size:12px;cursor:default;-webkit-user-select:none;user-select:none;font-weight:700}.editing-tooltip-hidden{visibility:hidden}.measurement-tooltip{position:relative;background:#fffc;border-radius:4px;color:#000;padding:4px 8px;opacity:1;white-space:nowrap;font-size:12px;cursor:default;-webkit-user-select:none;user-select:none;font-weight:700}.measurement-active-tooltip{background:#000000e6;border-radius:4px;border-color:#000000e6;opacity:.9;color:#fff}.measurement-finished-tooltip{background-color:#4cb3ffe6;color:#000;border:1px solid white}.measurement-active-tooltip:before,.measurement-finished-tooltip:before{border-top:6px solid rgba(0,0,0,.9);border-right:6px solid transparent;border-left:6px solid transparent;content:"";position:absolute;bottom:-6px;margin-left:-7px;left:50%}.measurement-finished-tooltip:before{border-top-color:#4cb3ff}.search-component .chakra-divider{display:none}.search-component .search-highlighted-match{font-weight:700}.search-component .search-value-container{cursor:text;padding-left:30px!important}.search-component .search-invisible{display:none}.selection-drag-box{background-color:#ffffff4d!important;border:3px solid var(--chakra-colors-background_primary)!important}.selection-tooltip{position:relative;background:#fffc;border-radius:4px;color:#000;padding:4px 8px;opacity:1;white-space:nowrap;font-size:12px;cursor:default;-webkit-user-select:none;user-select:none;font-weight:700}.selection .react-select{cursor:default}.map-container .selection-active{cursor:crosshair}.map-container .selection-inactive{cursor:no-drop}.selection-source-value.selection-source-value--disabled{opacity:.4}.selection-source-value.selection-source-value--disabled span{margin:0 6px 0 0}.scale-bar .ol-scale-bar{margin-bottom:8px;margin-right:8px}.scale-bar .ol-scale-bar,.scale-bar .ol-scale-line{position:relative;bottom:0;left:0;background:none}.scale-bar .ol-scale-bar .ol-scale-bar-inner,.scale-bar .ol-scale-bar .ol-scale-line-inner,.scale-bar .ol-scale-line .ol-scale-bar-inner,.scale-bar .ol-scale-line .ol-scale-line-inner{color:var(--chakra-white);border-color:var(--chakra-white)}.result-list-no-data-message{text-align:center;margin-top:50px;font-weight:700;font-size:larger}.result-list-table th,.result-list-table td{overflow-wrap:break-word}.result-list-table.result-list-table--is-resizing *{cursor:col-resize}.result-list-table thead{position:sticky;top:0;z-index:1;background:var(--chakra-colors-background_body)}.result-list-table th{position:relative;border-right-width:thin}.result-list-table tbody tr:hover{background:var(--chakra-colors-background_light)}.result-list-table .result-list-resizer{position:absolute;top:0;height:100%;right:0;width:8px;background:var(--chakra-colors-trails-100);transform:scaleX(.25);cursor:col-resize;-webkit-user-select:none;user-select:none;touch-action:none;padding-left:0}.result-list-table th:last-child .result-list-resizer{width:8px;transform:translate(50%) scaleX(.25)}.result-list-table th .result-list-resizer.result-list-resizer--is-resizing{background:var(--chakra-colors-trails-500);transform:scale(1)}.result-list-table th .result-list-resizer:hover{transform:scale(1)}',Qt=["en","de"];function eo(i){switch(i){case"en":return ee(()=>import("./C2081QYBwJIL.js"),[],import.meta.url).then(e=>e.default);case"de":return ee(()=>import("./B8IYyfG7GN30.js"),[],import.meta.url).then(e=>e.default)}throw new Error(`Unsupported locale: '${i}'`)}const to=ye(Xt),oo=Object.freeze(Object.defineProperty({__proto__:null,loadMessages:eo,locales:Qt,packages:Jt,styles:to},Symbol.toStringTag,{value:"Module"}));var ro=Et({displayName:"CloseIcon",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"});const me="ol-map",x=De.bind(void 0,me),b=ne.bind(void 0,me),io=re("ol-app:Editing");function te(i){const e=no(i.kind),o=u.useId(),r=b();return t.jsx(h,{role:"dialog","aria-labelledby":o,children:t.jsx(C,{title:t.jsx(I,{id:o,size:"md",mb:2,children:r.formatMessage({id:"editing.title"})}),children:t.jsxs(h,{overflowY:"auto",maxHeight:300,children:[t.jsx(O,{textAlign:"center",children:r.formatMessage({id:"editing.active"})}),t.jsxs(le,{mt:4,align:"center",justify:"center",children:[t.jsx(Z,{onClick:()=>{e?.reset()},children:r.formatMessage({id:"editing.resetGeometry"})}),t.jsx(Z,{onClick:()=>{e?.destroy()},children:r.formatMessage({id:"editing.abort"})})]})]})})})}function no(i){const e=x("notifier.NotificationService"),o=x("editing.EditingService"),r=b(),n=x("ol-app.AppModel"),{map:a}=P(),[s,c]=u.useState();return u.useEffect(()=>{if(!a)return;const l=new ao(e,o,a,r,n,i);return c(l),()=>{l.destroy(),c(void 0)}},[n,o,r,a,e,i]),s}class ao{notificationService;editingService;map;intl;appModel;kind;job;constructor(e,o,r,n,a,s){this.notificationService=e,this.editingService=o,this.map=r,this.intl=n,this.appModel=a,this.kind=s;let c;switch(s){case"create":c=this.createJob();break;case"update":c=this.updateJob();break}this.job=c,this.job.run().catch(l=>{we(l)||(io.error("Edit operation failed",l),this.notificationService.notify({level:"error",message:this.intl.formatMessage({id:"editing.error"})}))}).finally(()=>{this.destroy()})}destroy(){this.job?.destroy(),this.job=void 0,this.appModel.hideContent(`editing-${this.kind}`)}reset(){this.job?.reset()}createJob(){let e;return{destroy(){e?.stop(),e=void 0},reset(){e?.reset()},run:async()=>{const o=this.findLayer(),r=new URL(o.attributes.collectionURL+"/items");e=this.editingService.createFeature(this.map,r);const n=await e.whenComplete();if(e=void 0,!n)return;this.notificationService.notify({level:"info",message:this.intl.formatMessage({id:"editing.create.featureCreated"},{featureId:n.featureId})}),(o?.olLayer).getSource()?.refresh()}}}updateJob(){const e=this.map,o=new AbortController,r=o.signal;let n,a,s;function c(){a&&e.olMap.removeInteraction(a),a&&a.dispose(),n&&n.destroy(),o.abort(),a=void 0,n=void 0}return{destroy(){c(),s?.stop(),s=void 0},reset(){s?.reset()},run:async()=>{const l=this.findLayer(),p=l.olLayer,m=new URL(l.attributes.collectionURL+"/items");a=new et({layers:[p]}),e.olMap.addInteraction(a),n=so(this.intl,e.olMap),n.element.classList.remove("editing-tooltip-hidden");let f;for(;;){const{selected:v,deselected:S}=await lo(a,r);if(v.length===1&&S.length===0){c(),f=v[0];break}}if(!f)throw Error("Feature is undefined");s=this.editingService.updateFeature(e,m,f);const d=await s.whenComplete();d&&(this.notificationService.notify({level:"info",message:this.intl.formatMessage({id:"editing.update.featureModified"},{featureId:d.featureId})}),p.getSource()?.refresh())}}}findLayer(){const e=this.map.layers.getLayerById("krankenhaus");if(!e)throw new Error("Layer not found");return e}}function so(i,e){const o=document.createElement("div");o.className="editing-tooltip editing-tooltip-hidden",o.textContent=i.formatMessage({id:"editing.update.tooltip.select"});const r=new tt({element:o,offset:[15,0],positioning:"center-left"}),n=e.on("pointermove",a=>{a.dragging||r.setPosition(a.coordinate)});return e.addOverlay(r),{overlay:r,element:o,destroy(){E(n),e.removeOverlay(r)}}}function lo(i,e){let o;const{promise:r,resolve:n,reject:a}=ke();if(e.aborted)return a(Y()),r;const s=()=>{o&&E(o),o=void 0,a(Y())};return e.addEventListener("abort",s),o=i.on("select",c=>{e.removeEventListener("abort",s),o&&E(o),o=void 0,n(c)}),r}const co="@open-pioneer/coordinate-search",ge=ne.bind(void 0,co),po=3,uo=i=>{const{onSelect:e,onClear:o,coordinateSystems:r=[{label:"EPSG:4326",value:"EPSG:4326"},{label:"EPSG:3857",value:"EPSG:3857"}]}=i,{containerProps:n}=Fe("coordinate-search",i),{map:a}=P(i),s=ge(),c=a?.olMap,l=ot(c)?.getCode()??"",p=r.filter(g=>N(g.value)!=null),[m,f]=u.useState(p[0]),[d,v]=u.useState("");let S="tooltip.basic",{coordinates:w}=fo(c);w=w&&l?U(w,l,m.value):w;const K=go(w,po),$=K||"",[A,R]=u.useState(!1),D=!A&&he(s,d,m.value,fe);u.useEffect(()=>{d===""&&R(!0),d!==""&&R(!1)},[d]);function fe(g){S=g}return t.jsx(h,{...n,children:t.jsx(M,{flexDirection:"row",flexDir:"row",children:t.jsx(je,{label:s.formatMessage({id:S}),hasArrow:!0,placement:"top",isOpen:D,children:t.jsxs(G,{className:"coordinateSearchGroup",children:[t.jsxs(G,{className:"coordinateInputGroup",children:[t.jsx(rt,{type:"text",value:A?$:d,id:"coordinateInput",onChange:g=>{v(g.target.value)},isInvalid:D,backgroundColor:D?"red.100":"unset",placeholder:$,errorBorderColor:"red.500","aria-label":s.formatMessage({id:"coordinateSearch.ariaLabel"}),onKeyDown:g=>{A&&!g.ctrlKey&&R(!1),g.key=="Enter"&&oe(s,d,m.value,l,e)}}),t.jsx(B,{children:d!==""&&t.jsx(zt,{id:"clearCoordinateSearch",size:"sm",onClick:()=>{v(""),o&&o()},isDisabled:d=="",padding:"0px",icon:t.jsx(ro,{}),"aria-label":s.formatMessage({id:"coordinateSearch.ariaLabel"})})})]}),t.jsx(W,{padding:"0px",borderLeft:"0px",children:t.jsx(_t,{...n,id:"selectCoordinateSystem",value:m,defaultValue:m,options:p,menuPlacement:"top","aria-label":s.formatMessage({id:"coordinateSearch.ariaLabel"}),classNamePrefix:"coordinate-Search-Select",isSearchable:!1,chakraStyles:{menu:g=>({...g,width:"max-content",minWidth:"100%"}),control:g=>({...g,width:"max-content",minWidth:"100%",color:"white",borderleftstyle:"none",borderLeftRadius:0,padding:0}),valueContainer:g=>({...g,paddingEnd:0}),dropdownIndicator:(g,{selectProps:{menuIsOpen:be}})=>({...g,paddingStart:0,"> svg":{transitionDuration:"normal",transform:`rotate(${be?0:-180}deg)`}})},onChange:g=>{g?.value!==void 0&&(f(g),oe(s,d,g?.value,l,e))}})})]})})})})};function he(i,e,o,r){if(e=="")return!1;if(!e.includes(" "))return r&&r("tooltip.space"),!0;if(e.split(" ").length!=2||e.split(" ")[0]==""||e.split(" ")[1]=="")return r&&r("tooltip.2coords"),!0;let n=e;if(i.locale==="de"){if(!/^\d+(,\d+)? \d+(,\d+)?$/.test(e.replaceAll(".","")))return r&&r("tooltip.dividerDe"),!0;n=e.replaceAll(".","")}else if(i.locale==="en"){if(!/^\d+(.\d+)? \d+(.\d+)?$/.test(e.replaceAll(",","")))return r&&r("tooltip.dividerEn"),!0;n=e.replaceAll(",","")}const a=N(o);if(a!==null&&a.getExtent()!==null&&a.getExtent().length==4&&a.getExtent()[0]>parseFloat(n.split(" ")[0])&&a.getExtent()[1]>parseFloat(n.split(" ")[1])&&a.getExtent()[2]<parseFloat(n.split(" ")[0])&&a.getExtent()[3]<parseFloat(n.split(" ")[1]))return r&&r("tooltip.extent"),!0;const s=n.split(" "),c=[parseFloat(s[0].replace(",",".")),parseFloat(s[1].replace(",","."))];try{const l=U(c,o,"EPSG:4326"),p=N(o);if(p!==null&&p.getExtent()!==null&&p.getExtent().length==4&&p.getExtent()[0]>l[0]&&p.getExtent()[1]>l[1]&&p.getExtent()[2]<l[0]&&p.getExtent()[3]<l[1])return r&&r("tooltip.extent"),!0}catch{return r&&r("tooltip.projection"),!0}return!1}function oe(i,e,o,r,n){if(o==null||e==""||he(i,e,o))return;let a=e;i.locale==="de"?a=e.replaceAll(".",""):i.locale==="en"&&(a=e.replaceAll(",",""));const s=mo(a,o,r);n&&n({coords:s,projection:r})}function mo(i,e,o){const r=i.split(" "),n=[parseFloat(r[0].replace(",",".")),parseFloat(r[1].replace(",","."))];return U(n,e,o)}function U(i,e,o){return Ne(i,e,o)}function go(i,e){const o=ge();return i?ho(i,e,o):""}function ho(i,e,o){if(i[0]==null||i[1]==null)return"";const r=e,[n,a]=i,s=o.formatNumber(n,{maximumFractionDigits:r,minimumFractionDigits:r}),c=o.formatNumber(a,{maximumFractionDigits:r,minimumFractionDigits:r});return s+" "+c}function fo(i){const[e,o]=u.useState();return u.useEffect(()=>{if(!i)return;const r=i.on("pointermove",n=>{o(n.coordinate)});return()=>E(r)},[i]),{coordinates:e}}function bo(){const{map:i}=P(L),e=x("ol-app.AppModel");function o(n){if(!i)return;const a=new Ge(n);a&&e.highlightAndZoom(i,[a])}function r(){e.clearHighlight()}return t.jsx(h,{padding:"5px",children:t.jsx(uo,{mapId:L,onSelect:({coords:n})=>o(n),onClear:r,coordinateSystems:[{label:"EPSG:25832",value:"EPSG:25832"},{label:"EPSG:4326",value:"EPSG:4326"},{label:"EPSG:3857",value:"EPSG:3857"},{label:"EPSG:25833",value:"EPSG:25833"},{label:"EPSG:31466",value:"EPSG:31466"},{label:"EPSG:31467",value:"EPSG:31467"},{label:"EPSG:3035",value:"EPSG:3035"}]})})}function vo(){const i=b();return t.jsxs(M,{role:"region","aria-label":i.formatMessage({id:"ariaLabel.footer"}),gap:3,alignItems:"center",justifyContent:"center",children:[t.jsx(it,{precision:2,displayProjectionCode:"EPSG:4326"}),t.jsx(bo,{}),t.jsx(nt,{}),t.jsx(at,{})]})}function xo(){const i=u.useId(),e=b();return t.jsx(h,{role:"dialog","aria-labelledby":i,children:t.jsx(C,{title:t.jsx(I,{id:i,size:"md",mb:2,children:e.formatMessage({id:"legendTitle"})}),children:t.jsx(h,{overflowY:"auto",maxHeight:300,children:t.jsx(st,{showBaseLayers:!0})})})})}function So(i){return ce({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M19 8m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M5 11m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M15 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M6.5 9.5l1.546 -1.311"},child:[]},{tag:"path",attr:{d:"M14 5.5l3 1.5"},child:[]},{tag:"path",attr:{d:"M18.5 10l-1.185 3.318m-1.062 2.972l-.253 .71"},child:[]},{tag:"path",attr:{d:"M13.5 17.5l-7 -5"},child:[]},{tag:"path",attr:{d:"M3 3l18 18"},child:[]}]})(i)}function yo(i){return ce({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M19 8m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M5 11m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M15 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"},child:[]},{tag:"path",attr:{d:"M6.5 9.5l3.5 -3"},child:[]},{tag:"path",attr:{d:"M14 5.5l3 1.5"},child:[]},{tag:"path",attr:{d:"M18.5 10l-2.5 7"},child:[]},{tag:"path",attr:{d:"M13.5 17.5l-7 -5"},child:[]}]})(i)}function wo(){const i=b(),e=x("ol-app.AppModel"),o=k(()=>e.resultListState,[e]),r=o.open,{isTocActive:n,isLegendActive:a,isPrintingActive:s}=k(()=>({isTocActive:e.mainContent.includes("toc"),isLegendActive:e.mainContent.includes("legend"),isPrintingActive:e.mainContent.includes("printing")}),[e]);return t.jsxs(M,{role:"toolbar","aria-label":i.formatMessage({id:"ariaLabel.toolbar"}),direction:"column",gap:1,padding:1,children:[t.jsx(ko,{}),o.input&&t.jsx(y,{label:i.formatMessage({id:"resultListTitle"}),icon:t.jsx(He,{}),isActive:o.open,onClick:()=>e.setResultListVisibility(!r)}),t.jsx(y,{label:i.formatMessage({id:"tocTitle"}),icon:t.jsx(We,{}),isActive:n,onClick:()=>e.toggleMainContent("toc")}),t.jsx(y,{label:i.formatMessage({id:"legendTitle"}),icon:t.jsx(Be,{}),isActive:a,onClick:()=>e.toggleMainContent("legend")}),t.jsx(y,{label:i.formatMessage({id:"printingTitle"}),icon:t.jsx(Ue,{}),isActive:s,onClick:()=>e.toggleMainContent("printing")}),t.jsx(It,{}),t.jsx(Mt,{}),t.jsx(Lt,{})]})}function ko(){const i=b(),e=x("ol-app.AppModel"),[o,r]=u.useState(!1),{isSelectionActive:n,isMeasurementActive:a,isEditingCreateActive:s,isEditingUpdateActive:c}=k(()=>({isSelectionActive:e.mainContent.includes("selection"),isMeasurementActive:e.mainContent.includes("measurement"),isEditingCreateActive:e.mainContent.includes("editing-create"),isEditingUpdateActive:e.mainContent.includes("editing-update")}),[e]),l=f=>()=>{f(),r(!1)},p={placement:"top"},m=t.jsxs(t.Fragment,{children:[t.jsx(y,{label:s?i.formatMessage({id:"editing.stopTitle"}):i.formatMessage({id:"editing.create.startTitle"}),icon:s?t.jsx(So,{}):t.jsx(yo,{}),isActive:s,onClick:l(()=>e.toggleMainContent("editing-create")),tooltipProps:p}),t.jsx(y,{label:c?i.formatMessage({id:"editing.stopTitle"}):i.formatMessage({id:"editing.update.startTitle"}),icon:c?t.jsx(Ke,{}):t.jsx($e,{}),isActive:c,onClick:l(()=>e.toggleMainContent("editing-update")),tooltipProps:p}),t.jsx(y,{label:i.formatMessage({id:"measurementTitle"}),icon:t.jsx(Ze,{}),isActive:a,onClick:l(()=>e.toggleMainContent("measurement")),tooltipProps:p}),t.jsx(y,{label:i.formatMessage({id:"selectionTitle"}),icon:t.jsx(Ye,{}),isActive:n,onClick:l(()=>e.toggleMainContent("selection")),tooltipProps:p})]});return t.jsxs(gt,{placement:"left",isLazy:!0,onOpen:()=>r(!0),onClose:()=>r(!1),isOpen:o,children:[t.jsx(ht,{children:t.jsx(jo,{})}),t.jsx(Ce,{children:t.jsxs(ft,{width:"auto",children:[t.jsx(bt,{}),t.jsx(vt,{children:t.jsx(le,{spacing:2,children:m})})]})})]})}const jo=u.forwardRef(function(e,o){const r=b(),n=mt(),{onClick:a,...s}=n.getTriggerProps();return t.jsx(y,{ref:o,label:r.formatMessage({id:"mapInteractions.title"}),icon:t.jsx(Oe,{}),onClick:a,buttonProps:s})});function Co(){const i=u.useId(),e=b();return t.jsx(h,{role:"dialog","aria-labelledby":i,children:t.jsx(C,{title:t.jsx(I,{id:i,size:"md",mb:2,children:e.formatMessage({id:"measurementTitle"})}),children:t.jsx(lt,{})})})}function Io(){const i=x("ol-app.AppModel"),e=k(()=>i.resultListState,[i]),[o,r]=u.useState([]),[n,a]=u.useState([]),s=u.useCallback(c=>{r(c.features),a(c.getFeatureIds())},[]);return u.useEffect(()=>{console.log("Anzahl Features: "+o.length),console.log("SelectedIds: "+n.toString())},[o,n]),e.input&&t.jsx(h,{className:"result-list-container",position:"absolute",visibility:e.open?"visible":"hidden",bottom:"0",backgroundColor:"white",width:"100%",height:"400px",zIndex:1,borderTop:"2px solid",borderBottom:"2px solid",borderColor:"trails.100",children:t.jsx(At,{input:e.input,onSelectionChange:s},e.key)})}function Mo(){const{map:i}=P(),e=x("ol-app.AppModel"),o=k(()=>e.searchSources.getItems(),[e]);function r(a){if(console.debug("The user selected the following item: ",a.result),!i)return;const s=a.result.geometry;s&&e.highlightAndZoom(i,[s])}function n(){console.debug("The user cleared the search"),e.clearHighlight()}return t.jsx(h,{backgroundColor:"white",borderWidth:"1px",borderRadius:"lg",padding:2,boxShadow:"lg",mt:5,className:"search-box",children:t.jsx(ct,{sources:o,maxResultsPerGroup:10,onSelect:r,onClear:n})})}function Lo(){const i=b(),e=x("notifier.NotificationService"),o=u.useId(),{map:r}=P(),n=x("ol-app.AppModel"),a=k(()=>n.selectionSources.getItems(),[n]),s={numberOptions:{maximumFractionDigits:3},dateOptions:{dateStyle:"medium",timeStyle:"medium",timeZone:"UTC"}};function c(p){const{source:m,results:f}=p;if(!r){console.debug("Map not ready");return}const d=n.sourceMetadata.get(m);if(!d){console.warn("Can not show results because no metadata could be found");return}n.setResultListInput({columns:d,data:f,formatOptions:s}),e.notify({level:"info",message:i.formatMessage({id:"foundResults"},{resultsCount:f.length}),displayDuration:4e3})}function l(p){n.clearHighlight()}return t.jsx(h,{role:"dialog","aria-labelledby":o,children:t.jsx(C,{title:t.jsx(I,{id:o,size:"md",mb:2,children:i.formatMessage({id:"selectionTitle"})}),children:t.jsx(dt,{sources:a,onSelectionComplete:c,onSelectionSourceChanged:l})})})}function _o(){const i=u.useId(),e=b();return t.jsx(h,{role:"dialog","aria-labelledby":i,children:t.jsx(C,{title:t.jsx(I,{id:i,size:"md",mb:2,children:t.jsx(O,{children:e.formatMessage({id:"tocTitle"})})}),children:t.jsx(h,{overflowY:"auto",maxHeight:300,children:t.jsx(xt,{showTools:!0,basemapSwitcherProps:{allowSelectingEmptyBasemap:!0}})})})})}function Po(){const i=u.useId(),e=b();return t.jsx(h,{role:"dialog","aria-labelledby":i,children:t.jsx(C,{title:t.jsx(I,{id:i,size:"md",mb:2,children:e.formatMessage({id:"printingTitle"})}),children:t.jsx(pt,{})})})}function Eo(){const i=b(),e=x("ol-app.AppModel"),{resultListState:o,mainContent:r}=k(()=>({resultListState:e.resultListState,mainContent:e.mainContent}),[e]),n=o.input&&o.open;return t.jsx(Te,{mapId:L,children:t.jsxs(M,{height:"100%",direction:"column",overflow:"hidden",children:[t.jsx(ut,{position:"top-right"}),t.jsxs(C,{title:t.jsx(h,{role:"region","aria-label":i.formatMessage({id:"ariaLabel.header"}),textAlign:"center",py:1,children:t.jsx(I,{size:"md",children:"Sample Application"})}),children:[t.jsx(M,{flex:"1",direction:"column",position:"relative",children:t.jsxs(qe,{role:"main","aria-label":i.formatMessage({id:"ariaLabel.map"}),viewPadding:n?{bottom:400}:void 0,children:[t.jsx(Rt,{centerContent:!0,children:t.jsx(Mo,{})}),t.jsx(zo,{mainContent:r}),t.jsx(Ve,{position:"bottom-right",horizontalGap:10,verticalGap:45,children:t.jsx(wo,{})}),t.jsx(Io,{})]})}),t.jsx(vo,{})]})]})})}function zo(i){const{mainContent:e}=i,o=u.useMemo(()=>{const r=n=>{switch(n){case"toc":return t.jsx(_o,{},n);case"legend":return t.jsx(xo,{},n);case"printing":return t.jsx(Po,{},n);case"selection":return t.jsx(Lo,{},n);case"measurement":return t.jsx(Co,{},n);case"editing-create":return t.jsx(te,{kind:"create"},n);case"editing-update":return t.jsx(te,{kind:"update"},n)}};return e.map(n=>r(n))},[e]);return t.jsx(Ao,{children:o})}function Ao(i){const e=i.children,o=[];for(const r of e)r&&(o.length&&o.push(t.jsx(Pt,{mt:4,mb:4},o.length)),o.push(r));if(o.length!==0)return t.jsx(h,{position:"absolute",top:"100px",left:4,maxHeight:"calc(100% - 140px)",width:350,maxWidth:350,zIndex:1,backgroundColor:"white",borderWidth:"1px",borderRadius:"lg",padding:2,boxShadow:"lg",overflow:"auto",children:o})}const Ro=new URLSearchParams(window.location.search),Do=Ro.get("lang")||void 0,Fo=Ie({component:Eo,appMetadata:oo,config:{locale:Do,properties:{"@open-pioneer/local-storage":{storageId:"ol-app-state"}}}});customElements.define("ol-map-app",Fo);
