var vo=Object.defineProperty;var mt=o=>{throw TypeError(o)};var bo=(o,e,t)=>e in o?vo(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var y=(o,e,t)=>bo(o,typeof e!="symbol"?e+"":e,t),Ze=(o,e,t)=>e.has(o)||mt("Cannot "+t);var l=(o,e,t)=>(Ze(o,e,"read from private field"),t?t.call(o):e.get(o)),h=(o,e,t)=>e.has(o)?mt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(o):e.set(o,t),m=(o,e,t,i)=>(Ze(o,e,"write to private field"),i?i.call(o,t):e.set(o,t),t),k=(o,e,t)=>(Ze(o,e,"access private method"),t);import{f as wo,h as W,u as yo,o as xo,k as Le,r as b,j as a,l as Ae,c as je,B as ie,F as ko,A as Ye,m as Xe,n as Rt,E as D,a as So,e as Io}from"./CzUo6bX8-UUU.js";import{aF as _o,aG as Eo,P as Mo,N as we,aH as Co,aI as Lo,ap as Ao,aJ as jo,aK as Po,aL as Ro,E as No,at as Vo,aM as gt,aN as Do,aO as To,aP as ft,aQ as Oo,aR as Fo,aS as Je,V as Nt,aT as vt,Z as zo,a3 as Go,aU as Bo,a1 as Ho,aV as Uo,aW as Wo,aX as qo,aY as $o,aZ as bt,h as ye,B as O,S as rt,T as Vt,O as Dt,a as at,b as Tt,a_ as Pe,g as fe,d as nt,u as Re,a$ as wt,b0 as Ko,ao as Zo,c as Ot,C as Yo,F as Ft,ay as zt,b1 as Xo,b2 as Jo,b3 as Qo,b4 as ei,i as z,b5 as ti,b6 as oi,e as Oe,f as et,H as ii,M as ri,D as ai,j as ni,k as yt}from"./B36mctiVgF5V.js";import{W as si,i as li,j as Gt}from"./kPJ9UZ8lVIau.js";import{O as Bt,W as ci,c as di,u as pi,I as Ht,e as ui,C as hi,b as mi,a as gi,M as fi,P as vi,L as bi,d as wi,S as yi,E as xi,V as ki,f as Ut,N as Si}from"./CtkSqPB4B2ET.js";import{G as Wt,T as Ii,e as _i}from"./C1o_VwAkx5Nm.js";import{g as Ei,c as Mi,T as qe,V as tt,L as Ci}from"./CovJx79h1x39.js";import{b as Li,r as Q,u as ee,a as Ai,w as qt,Z as ji,c as Pi,I as Ri,H as Ni,d as Vi,e as Di,f as Ti,V as Oi,S as Fi}from"./BUCtgDDw782G.js";import{G as zi}from"./CkG3hRXjrvfc.js";import{c as $t}from"./SSUBJAaBGB7g.js";import{M as Gi,a as Bi,b as Hi}from"./DgJGd2MHfhXI.js";import{M as Ui}from"./C41Ku2EWcQEd.js";import{S as Wi}from"./BSX9fy8BsUsv.js";import{u as qi}from"./E5Cg9XwqIVqj.js";import{r as $i}from"./_05fvbTuDT_t.js";import{I as Ki}from"./XuMECp8BqZmI.js";import{R as Zi}from"./K_sKz2BiM23b.js";import{N as Yi,P as Xi}from"./BZqu8ZKsC5y7.js";import{_ as xt}from"./CmsKOCeNyeyo.js";import{F as Ji}from"./0jkoYKtubXoE.js";import{H as Qi}from"./_YjaCHRtWzU8.js";import{F as er}from"./DAtS2L2h2gmX.js";import"./DNaBv0QziP17.js";import"./Di-_YM5QvGet.js";import"./DXNMkmWkGPwJ.js";var[tr,Kt]=wo({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),ot=W(function(e,t){const i=yo("Input",e),{children:r,className:n,...s}=xo(e),d=Le("chakra-input__group",n),c={},p=Ei(r),u=i.field;p.forEach(f=>{var w,S;i&&(u&&f.type.id==="InputLeftElement"&&(c.paddingStart=(w=u.height)!=null?w:u.h),u&&f.type.id==="InputRightElement"&&(c.paddingEnd=(S=u.height)!=null?S:u.h),f.type.id==="InputRightAddon"&&(c.borderEndRadius=0),f.type.id==="InputLeftAddon"&&(c.borderStartRadius=0))});const g=p.map(f=>{var w,S;const C=Mi({size:((w=f.props)==null?void 0:w.size)||e.size,variant:((S=f.props)==null?void 0:S.variant)||e.variant});return f.type.id!=="Input"?b.cloneElement(f,C):b.cloneElement(f,Object.assign(C,c,f.props))});return a.jsx(Ae.div,{className:d,ref:t,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...i.group},"data-group":!0,...s,children:a.jsx(tr,{value:i,children:g})})});ot.displayName="InputGroup";var or={left:{marginEnd:"-1px",borderEndRadius:0,borderEndColor:"transparent"},right:{marginStart:"-1px",borderStartRadius:0,borderStartColor:"transparent"}},ir=Ae("div",{baseStyle:{flex:"0 0 auto",width:"auto",display:"flex",alignItems:"center",whiteSpace:"nowrap"}}),st=W(function(e,t){var i;const{placement:r="left",...n}=e,s=(i=or[r])!=null?i:{},d=Kt();return a.jsx(ir,{ref:t,...n,__css:{...d.addon,...s}})});st.displayName="InputAddon";var Zt=W(function(e,t){return a.jsx(st,{ref:t,placement:"left",...e,className:Le("chakra-input__left-addon",e.className)})});Zt.displayName="InputLeftAddon";Zt.id="InputLeftAddon";var lt=W(function(e,t){return a.jsx(st,{ref:t,placement:"right",...e,className:Le("chakra-input__right-addon",e.className)})});lt.displayName="InputRightAddon";lt.id="InputRightAddon";var rr=Ae("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),$e=W(function(e,t){var i,r;const{placement:n="left",...s}=e,d=Kt(),c=d.field,u={[n==="left"?"insetStart":"insetEnd"]:"0",width:(i=c?.height)!=null?i:c?.h,height:(r=c?.height)!=null?r:c?.h,fontSize:c?.fontSize,...d.element};return a.jsx(rr,{ref:t,__css:u,...s})});$e.id="InputElement";$e.displayName="InputElement";var Yt=W(function(e,t){const{className:i,...r}=e,n=Le("chakra-input__left-element",i);return a.jsx($e,{ref:t,placement:"left",className:n,...r})});Yt.id="InputLeftElement";Yt.displayName="InputLeftElement";var ct=W(function(e,t){const{className:i,...r}=e,n=Le("chakra-input__right-element",i);return a.jsx($e,{ref:t,placement:"right",className:n,...r})});ct.id="InputRightElement";ct.displayName="InputRightElement";var Xt=Ae("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});Xt.displayName="Center";var ar={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};W(function(e,t){const{axis:i="both",...r}=e;return a.jsx(Ae.div,{ref:t,__css:ar[i],...r,position:"absolute"})});const x={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},nr={ERROR:"error"};class sr extends Ao{constructor(e){super(nr.ERROR),this.code=e.code,this.message=e.message}}let lr=class extends _o{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.position_=null,this.transform_=Eo,this.watchId_=void 0,this.addChangeListener(x.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(x.TRACKING,this.handleTrackingChanged_),e.projection!==void 0&&this.setProjection(e.projection),e.trackingOptions!==void 0&&this.setTrackingOptions(e.trackingOptions),this.setTracking(e.tracking!==void 0?e.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const e=this.getProjection();e&&(this.transform_=Mo(we("EPSG:4326"),e),this.position_&&this.set(x.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const e=this.getTracking();e&&this.watchId_===void 0?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!e&&this.watchId_!==void 0&&(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(e){const t=e.coords;this.set(x.ACCURACY,t.accuracy),this.set(x.ALTITUDE,t.altitude===null?void 0:t.altitude),this.set(x.ALTITUDE_ACCURACY,t.altitudeAccuracy===null?void 0:t.altitudeAccuracy),this.set(x.HEADING,t.heading===null?void 0:Co(t.heading)),this.position_?(this.position_[0]=t.longitude,this.position_[1]=t.latitude):this.position_=[t.longitude,t.latitude];const i=this.transform_(this.position_);this.set(x.POSITION,i.slice()),this.set(x.SPEED,t.speed===null?void 0:t.speed);const r=Lo(this.position_,t.accuracy);r.applyTransform(this.transform_),this.set(x.ACCURACY_GEOMETRY,r),this.changed()}positionError_(e){this.dispatchEvent(new sr(e))}getAccuracy(){return this.get(x.ACCURACY)}getAccuracyGeometry(){return this.get(x.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(x.ALTITUDE)}getAltitudeAccuracy(){return this.get(x.ALTITUDE_ACCURACY)}getHeading(){return this.get(x.HEADING)}getPosition(){return this.get(x.POSITION)}getProjection(){return this.get(x.PROJECTION)}getSpeed(){return this.get(x.SPEED)}getTracking(){return this.get(x.TRACKING)}getTrackingOptions(){return this.get(x.TRACKING_OPTIONS)}setProjection(e){this.set(x.PROJECTION,we(e))}setTracking(e){this.set(x.TRACKING,e)}setTrackingOptions(e){this.set(x.TRACKING_OPTIONS,e)}};const cr=1.2;function dr(o,e=cr){pr(o);const t=jo(o),i=Po(o),r=t*e,n=i*e;return[o[0]-(r-t)/2,o[1]-(n-i)/2,o[2]+(r-t)/2,o[3]+(n-i)/2]}function pr(o){if(o.length!==4)throw new Error(`Invalid extent (expected length 4, but got length ${o.length}).`)}const Qe=.75,De=.1;let ur=class extends Ro{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=e.rotateWithView!==void 0?e.rotateWithView:!1,this.viewExtent_=void 0;const t=e.className!==void 0?e.className:"ol-overviewmap",i=e.tipLabel!==void 0?e.tipLabel:"Overview map",r=e.collapseLabel!==void 0?e.collapseLabel:"‹";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r):this.collapseLabel_=r;const n=e.label!==void 0?e.label:"›";typeof n=="string"?(this.label_=document.createElement("span"),this.label_.textContent=n):this.label_=n;const s=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,d=document.createElement("button");d.setAttribute("type","button"),d.title=i,d.appendChild(s),d.addEventListener(No.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const c=new Vo({view:e.view,controls:new gt,interactions:new gt});this.ovmap_=c,e.layers&&e.layers.forEach(function(_){c.addLayer(_)});const p=document.createElement("div");p.className="ol-overviewmap-box",p.style.boxSizing="border-box",this.boxOverlay_=new Bt({position:[0,0],positioning:"center-center",element:p}),this.ovmap_.addOverlay(this.boxOverlay_);const u=t+" "+Do+" "+To+(this.collapsed_&&this.collapsible_?" "+ft:"")+(this.collapsible_?"":" ol-uncollapsible"),g=this.element;g.className=u,g.appendChild(this.ovmapDiv_),g.appendChild(d);const f=this,w=this.boxOverlay_,S=this.boxOverlay_.getElement(),C=function(_){return{clientX:_.clientX,clientY:_.clientY}},P=function(_){const E=C(_),te=c.getEventCoordinateInternal(E);w.setPosition(te)},q=function(_){const E=c.getEventCoordinateInternal(_);f.getMap().getView().setCenterInternal(E),window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",q)};S.addEventListener("mousedown",function(){window.addEventListener("mousemove",P),window.addEventListener("mouseup",q)})}setMap(e){const t=this.getMap();if(e!==t){if(t){const i=t.getView();i&&this.unbindView_(i),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(Oo(e,Fo.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const i=e.getView();i&&(this.bindView_(i),i.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===Je.VIEW){const t=e.oldValue;t&&this.unbindView_(t);const i=this.getMap().getView();this.bindView_(i)}else!this.ovmap_.isRendered()&&(e.key===Je.TARGET||e.key===Je.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const t=new Nt({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(vt.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(e){e.removeChangeListener(vt.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const i=e.getSize(),n=e.getView().calculateExtentInternal(i);if(this.viewExtent_&&zo(n,this.viewExtent_))return;this.viewExtent_=n;const s=t.getSize(),c=t.getView().calculateExtentInternal(s),p=t.getPixelFromCoordinateInternal(Go(n)),u=t.getPixelFromCoordinateInternal(Bo(n)),g=Math.abs(p[0]-u[0]),f=Math.abs(p[1]-u[1]),w=s[0],S=s[1];g<w*De||f<S*De||g>w*Qe||f>S*Qe?this.resetExtent_():Ho(c,n)||this.recenter_()}resetExtent_(){const e=this.getMap(),t=this.ovmap_,i=e.getSize(),n=e.getView().calculateExtentInternal(i),s=t.getView(),d=Math.log(Qe/De)/Math.LN2,c=1/(Math.pow(2,d/2)*De);Uo(n,c),s.fitInternal(Wo(n))}recenter_(){const e=this.getMap(),t=this.ovmap_,i=e.getView();t.getView().setCenterInternal(i.getCenterInternal())}updateBox_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const i=e.getSize(),r=e.getView(),n=t.getView(),s=this.rotateWithView_?0:-r.getRotation(),d=this.boxOverlay_,c=this.boxOverlay_.getElement(),p=r.getCenterInternal(),u=r.getResolution(),g=n.getResolution(),f=i[0]*u/g,w=i[1]*u/g;if(d.setPosition(p),c){c.style.width=f+"px",c.style.height=w+"px";const S="rotate("+s+"rad)";c.style.transform=S}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=qo(this.ovmap_,$o.POSTRENDER,function(e){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(ft),this.collapsed_?bt(this.collapseLabel_,this.label_):bt(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}};var hr=$t({d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z",displayName:"ChevronUpIcon"}),mr=$t({displayName:"CloseIcon",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"}),j,it,Te,Jt;class gr{constructor(e){h(this,j);y(this,"olMap");y(this,"handle");y(this,"_mapViews",Li());y(this,"_activeViewId",Q(0));y(this,"backward",()=>{if(this.canBackward)k(this,j,Te).call(this,this.activeViewId-1),k(this,j,it).call(this,this.activeViewId);else throw new Error("Backward is not possible at the moment")});y(this,"forward",()=>{if(this.canForward)k(this,j,Te).call(this,this.activeViewId+1),k(this,j,it).call(this,this.activeViewId);else throw new Error("Forward is not possible at the moment")});this.olMap=e.olMap,this.handle=k(this,j,Jt).call(this)}destroy(){this.handle&&ye(this.handle),this.handle=void 0}get activeViewId(){return this._activeViewId.value}get mapViews(){return this._mapViews}get canBackward(){return this.mapViews.get(this.activeViewId-1)!=null}get canForward(){return this.mapViews.get(this.activeViewId+1)!=null}}j=new WeakSet,it=function(e){const t=this.olMap.getView();this.olMap.setView(new Nt({center:this.mapViews.get(e).center,resolution:this.mapViews.get(e).resolution,projection:t.getProjection()}))},Te=function(e){this._activeViewId.value=e},Jt=function(){const e=this.olMap.on("moveend",()=>{t()}),t=()=>{const i=this.olMap,r=this.mapViews,n=i.getView(),s=n.getResolution(),d=n.getCenter();if(s!=null&&d!=null&&(d!==r.get(this.activeViewId)?.center||s!==r.get(this.activeViewId)?.resolution)){const c={resolution:s,center:d},p=this.activeViewId+1;for(const u of r.keys())u>p&&r.delete(u);k(this,j,Te).call(this,p),r.set(p,c)}};return e};const fr={height:"25px",width:"25px",borderColor:"#4cb3ff",borderWidth:"3px",borderRadius:"50%",display:"inline-block "};function vr(o){return a.jsxs(O,{children:[a.jsx(qe,{children:o.layer.title}),a.jsx(O,{style:fr})]})}const Ne="main";class br{mapId=Ne;vectorSourceFactory;constructor(e){this.vectorSourceFactory=e.references.vectorSourceFactory}async getMapConfig(){return{initialView:{kind:"position",center:{x:823091,y:6724521},zoom:8},layers:[new rt({title:"OSM",id:"osm",isBaseLayer:!0,olLayer:new Vt({source:new Dt})}),new ci({isBaseLayer:!0,title:"Orthofotos NRW",url:"https://www.wmts.nrw.de/geobasis/wmts_nw_dop/1.0.0/WMTSCapabilities.xml",name:"nw_dop",matrixSet:"EPSG_3857_16",sourceOptions:{attributions:'Die Geobasisdaten des amtlichen Vermessungswesens werden als öffentliche Aufgabe gem. VermKatG NRW und gebührenfrei nach Open Data-Prinzipien über online-Verfahren bereitgestellt. Nutzungsbedingungen: siehe <a href="https://www.bezreg-koeln.nrw.de/system/files/media/document/file/lizenzbedingungen_geobasis_nrw.pdf"</a>'}}),xr(),yr(),wr(this.vectorSourceFactory)]}}}function wr(o){const e="https://ogc-api-test.nrw.de/inspire-us-krankenhaus/v1",t="governmentalservice",i=o.createVectorSource({baseUrl:e,collectionId:t,limit:1e3,crs:"http://www.opengis.net/def/crs/EPSG/0/3857",attributions:`Land NRW (${new Date().getFullYear()}), <a href='https://www.govdata.de/dl-de/by-2-0'>Datenlizenz Deutschland - Namensnennung - Version 2.0</a>, <a href='https://ogc-api-test.nrw.de/inspire-us-krankenhaus/v1'>Datenquelle</a>`}),r=new at({source:i});return new rt({id:"krankenhaus",title:"Krankenhäuser-Demo-Dienst",visible:!1,olLayer:r,attributes:{collectionURL:e+"/collections/"+t}})}function yr(){const o=new Tt({url:"https://ogc-api.nrw.de/inspire-us-kindergarten/v1/collections/governmentalservice/items?f=json&limit=10000",format:new Wt,attributions:'&copy; <a href="http://www.bkg.bund.de" target="_blank">Bundesamt f&uuml;r Kartographie und Geod&auml;sie</a> 2017, <a href="http://sg.geodatenzentrum.de/web_public/Datenquellen_TopPlus_Open.pdf" target="_blank">Datenquellen</a>'}),e=new at({source:o}),t={Component:vr};return new rt({id:"ogc_kitas",title:"Kindertagesstätten",visible:!0,olLayer:e,attributes:{legend:t}})}function xr(){return new si({title:"Verwaltungsgebiete",id:"verwaltungsgebiete",visible:!1,url:"https://www.wms.nrw.de/geobasis/wms_nw_dvg",sublayers:[{name:"nw_dvg_krs",title:"Kreise und kreisfreie Städte"}]})}const kr="200px",Sr="300px",Ir=o=>{const{olLayer:e,height:t=kr,width:i=Sr}=o,{containerProps:r}=Pe("overview-map",o),n=b.useRef(null),{map:s}=fe(o);return b.useEffect(()=>{if(n.current&&s&&e){const d=s.olMap,c=new ur({className:"ol-overviewmap",layers:[e],collapsible:!1,collapsed:!1,target:n.current});return d.addControl(c),()=>{d.removeControl(c)}}},[s,e]),a.jsx(O,{height:t,width:i,ref:n,...r})};function _r({intl:o}){return{id:"overviewMap",title:o.formatMessage({id:"demos.overviewMap.title"}),createModel(){const e=new Vt({source:new Dt});return{description:o.formatMessage({id:"demos.overviewMap.description"}),mainWidget:a.jsx(Ir,{olLayer:e}),destroy(){e.dispose()}}}}}class Er{label;filteredTypes;httpService;constructor(e,t,i){this.label=e,this.filteredTypes=t,this.httpService=i}async search(e,{mapProjection:t,signal:i}){const r=await this.request(e,100,i),n=new Wt({dataProjection:"EPSG:4326",featureProjection:t});return r.features.filter(s=>this.filteredTypes.includes(s.properties.type)).map((s,d)=>{const c=n.readGeometry(s.geometry);return{id:s.properties.osm_id||d,label:this.createLabel(s),geometry:c,properties:s.properties}})}async request(e,t,i){const r=new URL("https://photon.komoot.io/api?");r.searchParams.set("q",e),r.searchParams.set("lang","de"),r.searchParams.set("lat","51.961563"),r.searchParams.set("lon","7.628202"),r.searchParams.set("limit",t.toString());const n=await this.httpService.fetch(r,{signal:i});if(!n.ok)throw new Error("Request failed: "+n.status);return await n.json()}createLabel(e){return`${e.properties.name} (${e.properties.osm_value?e.properties.osm_value+", ":""}${e.properties.postcode?e.properties.postcode+", ":""}${e.properties.city?e.properties.city+", ":""}${e.properties.country?e.properties.country+")":")"}`}}function Mr({intl:o,httpService:e,mapModel:t}){return{id:"searchAndHighlight",title:o.formatMessage({id:"demos.searchAndHighlight.title"}),createModel(){return new Cr(o,t,e)}}}var xe,ke,re,Fe,ae,jt;let Cr=(jt=class{constructor(e,t,i){h(this,xe);h(this,ke);h(this,re);y(this,"description");y(this,"mainWidget");h(this,Fe,e=>{const t=e.result.geometry;t&&(l(this,ae).call(this),m(this,re,Lr(l(this,ke),[t])))});h(this,ae,()=>{l(this,re)?.destroy(),m(this,re,void 0)});m(this,xe,new Er("Photon Geocoder",["city","street"],i)),m(this,ke,t),this.description=e.formatMessage({id:"demos.searchAndHighlight.description"}),this.mainWidget=a.jsx(di,{sources:[l(this,xe)],onSelect:l(this,Fe),onClear:l(this,ae)})}destroy(){l(this,ae).call(this)}},xe=new WeakMap,ke=new WeakMap,re=new WeakMap,Fe=new WeakMap,ae=new WeakMap,jt);function Lr(o,e){const t=o.olMap.getViewport();return o.highlightAndZoom(e,{viewPadding:t&&t.offsetWidth<1e3?{top:150,right:75,bottom:50,left:75}:{top:150,right:400,bottom:50,left:400}})}const Qt="@open-pioneer/geolocation",Ar=nt.bind(void 0,Qt),eo=Re.bind(void 0,Qt);function jr(o){return zi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3A8.994 8.994 0 0 0 13 3.06V1h-2v2.06A8.994 8.994 0 0 0 3.06 11H1v2h2.06A8.994 8.994 0 0 0 11 20.94V23h2v-2.06A8.994 8.994 0 0 0 20.94 13H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"},child:[]}]})(o)}const kt=je("geolocation:GeolocationController"),St=17;var $,K;class Pr{constructor(e,t,i){y(this,"supported",!!navigator.geolocation);y(this,"olMap");y(this,"positionHighlightLayer");y(this,"geolocation");y(this,"onError");y(this,"maxZoom",St);y(this,"accuracyFeature");y(this,"positionFeature");y(this,"changeHandlers",[]);y(this,"setMapToPosition",!0);y(this,"trackingOptions",{});y(this,"isInitialZoom",!0);h(this,$,Q(!1));h(this,K,Q(!1));this.olMap=e,this.onError=t,this.isInitialZoom=!0,this.accuracyFeature=new wt,this.accuracyFeature.setStyle(_t()),this.positionFeature=new wt,this.positionFeature.setStyle(It()),this.positionHighlightLayer=new at({source:new Tt({features:[this.accuracyFeature,this.positionFeature]})}),this.positionHighlightLayer.setZIndex(Ko);const r=i||Rr();this.geolocation=new lr({tracking:!1,trackingOptions:r,projection:e.getView()?.getProjection()}),this.trackingOptions=r,this.geolocation.on("error",n=>this.handleGeolocationError(n))}destroy(){this.stopGeolocation(),this.geolocation?.setTracking(!1),this.geolocation.dispose(),this.accuracyFeature=void 0,this.positionFeature=void 0,this.positionHighlightLayer.dispose()}startGeolocation(){if(l(this,K).value)return;const e=this.olMap;new Promise(i=>{l(this,K).value=!0,l(this,$).value=!0,this.geolocation?.setProjection(e.getView()?.getProjection()),this.geolocation?.setTracking(!0);const r=this.geolocation.on("change:accuracyGeometry",()=>{const c=this.geolocation.getAccuracyGeometry()||void 0;if(this.accuracyFeature?.setGeometry(c),this.accuracyFeature?.getGeometry()!==void 0&&i(),this.isInitialZoom){const p=this?.accuracyFeature?.getGeometry()?.getExtent();if(p){const u=dr(p);if(!u)return;e.getView().fit(u,{maxZoom:this.maxZoom}),this.isInitialZoom=!1}}}),n=this.geolocation.on("change:position",()=>{const c=this.geolocation.getPosition();c&&(c[0]||c[1])!==void 0&&(this.positionFeature?.setGeometry(new Zo(c)),this.setMapToPosition&&e.getView().setCenter(c),this.positionFeature?.getGeometry()!==void 0&&i())}),s=e.getView().on("change:resolution",()=>{this.setMapToPosition=this.isInitialZoom}),d=e.on("pointermove",c=>{c.dragging&&(this.setMapToPosition=!1)});this.changeHandlers.push(r,n,s,d),e.addLayer(this.positionHighlightLayer)}).then(()=>{l(this,$).value=!1}).catch(i=>{kt.error("Failed to determine location",i)})}stopGeolocation(){this.geolocation?.setTracking(!1),l(this,K).value=!1,l(this,$).value=!1,this.trackingOptions={},this.setMapToPosition=!0,this.isInitialZoom=!0,this.changeHandlers.forEach(e=>{ye(e)}),this.changeHandlers=[],this.accuracyFeature?.setGeometry(void 0),this.positionFeature?.setGeometry(void 0),this.olMap.removeLayer(this.positionHighlightLayer)}get active(){return l(this,K).value}get loading(){return l(this,$).value}setPositionFeatureStyle(e){this.positionFeature?.setStyle(e??It())}setAccuracyFeatureStyle(e){this.accuracyFeature?.setStyle(e??_t())}setMaxZoom(e){this.maxZoom=e??St}getMaxZoom(){return this.maxZoom}getPositionFeature(){return this.positionFeature}getAccuracyFeature(){return this.accuracyFeature}getTrackingOptions(){return this.trackingOptions}getGeolocation(){return this.geolocation}handleGeolocationError(e){kt.error("Error from geolocation API:",e.message),this.stopGeolocation();const t=(()=>{switch(e.code){case 1:return"permission-denied";case 2:return"position-unavailable";case 3:return"timeout";default:return"unknown"}})();this.onError(t)}}$=new WeakMap,K=new WeakMap;const It=()=>new Ot({image:new Yo({radius:6,fill:new Ft({color:"#3399CC"}),stroke:new zt({color:"#fff",width:2})})}),_t=()=>new Ot({stroke:new zt({color:"#3399CC",width:3}),fill:new Ft({color:"rgba(0, 0, 255, 0.05)"})}),Rr=()=>({enableHighAccuracy:!0,timeout:6e4,maximumAge:6e5}),Nr=b.forwardRef(function(e,t){const{maxZoom:i,positionFeatureStyle:r,accuracyFeatureStyle:n,trackingOptions:s}=e,{map:d}=fe(e),c=Dr(d,i,s,r,n);return c&&a.jsx(Vr,{...e,controller:c,ref:t})}),Vr=b.forwardRef(function(e,t){const{controller:i}=e,{containerProps:r}=Pe("geolocation",e),{isLoading:n,isActive:s}=ee(()=>({isLoading:i.loading,isActive:i.active}),[i]),d=eo(),c=i.supported?s?d.formatMessage({id:"locateMeEnd"}):d.formatMessage({id:"locateMeStart"}):d.formatMessage({id:"locateNotSupported"}),p=()=>{i.active?i.stopGeolocation():i.startGeolocation()};return a.jsx(Ii,{ref:t,label:c,icon:a.jsx(jr,{}),onClick:()=>p(),isActive:s,isLoading:n,isDisabled:!i.supported,...r})});function Dr(o,e,t,i,r){const n=eo(),s=Ar("notifier.NotificationService"),[d,c]=b.useState();return b.useEffect(()=>{if(!o)return;const p=g=>{const f=n.formatMessage({id:"error"}),w=(()=>{switch(g){case"permission-denied":return n.formatMessage({id:"permissionDenied"});case"position-unavailable":return n.formatMessage({id:"positionUnavailable"});case"timeout":return n.formatMessage({id:"timeout"});case"unknown":return n.formatMessage({id:"unknownError"})}})();s.notify({level:"error",title:f,message:w})},u=new Pr(o.olMap,p,t);return c(u),()=>{u.destroy(),c(void 0)}},[o,t,n,s]),b.useEffect(()=>{d?.setPositionFeatureStyle(i)},[d,i]),b.useEffect(()=>{d?.setAccuracyFeatureStyle(r)},[d,r]),b.useEffect(()=>{d?.setMaxZoom(e)},[d,e]),d}const Tr="@open-pioneer/scale-setter",Or=Re.bind(void 0,Tr),Fr=25.4/.28,zr=39.37,Gr=[17471320,8735660,4367830,2183915,1091957,545978,272989,136494,68247,34123,17061,8530,4265,2132],Br=o=>{const{scales:e=Gr}=o,{containerProps:t}=Pe("scale-setter",o),{map:i}=fe(o),r=Or(),n=pi(i?.olMap)??1;function s(p){if(!i)return;const u=i.olMap.getView(),g=i.olMap.getView().getProjection(),f=g.getMetersPerUnit()??1,w=zr*Fr*f,S=i.olMap.getView().getCenter();if(!S)return;const C=p/Xo(g,w,S);u.setResolution(C)}const d=e.map(p=>a.jsx(Gi,{value:p,onClick:()=>s(p),onFocus:u=>{u.target?.scrollIntoView?.({block:"nearest"})},className:"scale-setter-option",children:Et(r,p)},p)),c=Et(r,n);return a.jsx(O,{...t,children:a.jsxs(Ui,{isLazy:!0,children:[a.jsx(Bi,{as:ie,rightIcon:a.jsx(hr,{}),className:"scale-setter-menubutton","aria-label":r.formatMessage({id:"button.ariaLabel"},{scale:c}),"aria-description":r.formatMessage({id:"button.ariaDescription"}),children:c}),a.jsx(ko,{children:a.jsx(Hi,{className:"scale-setter-menuoptions",maxHeight:"20em",overflowY:"auto",children:d})})]})})};function Et(o,e){return"1 : "+o.formatNumber(e)}const to="@open-pioneer/spatial-bookmarks",Hr=nt.bind(void 0,to),Ur=Re.bind(void 0,to),G=je("spatial-bookmark:SpatialBookmarkViewModel");class Wr{map;packageNamespace;writableBookmarks=Ai([]);watchBookmarksHandle;get bookmarks(){return this.writableBookmarks.getItems()}constructor(e,t){this.map=e,this.packageNamespace=t.getNamespace("spatial-bookmarks"),this.loadState(),this.watchBookmarksHandle=qt(()=>[this.writableBookmarks.getItems()],([i])=>this.saveState(i),{immediate:!1})}destroy(){this.watchBookmarksHandle.destroy()}createBookmark(e){const t=this.map.olMap,i=t.getView().calculateExtent(),r=t.getView().getProjection().getCode(),n={minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]},s={id:Jo(),title:e,extent:n,projection:r};G.debug("Created a new bookmark",s),this.writableBookmarks.push(s)}activateBookmark(e){G.debug("Activating bookmark",e);const t=this.getBookmarkExtent(e);G.debug("Attempting to apply extent",t),this.applyExtent(t)}deleteBookmark(e){G.debug("Deleting bookmark",e);const t=this.writableBookmarks.findIndex(i=>i.id===e);t>-1&&this.writableBookmarks.splice(t,1)}deleteAllBookmarks(){G.debug("Deleting all bookmarks"),this.writableBookmarks.splice(0)}loadState(){G.debug("Restoring bookmarks from local storage");const e=this.packageNamespace.get("bookmarks")??[];try{qr(e),this.writableBookmarks.push(...e)}catch(t){G.error("Bookmarks data in local storage is invalid, resetting to default value.",t),this.writableBookmarks.splice(0),this.saveState([])}}saveState(e){G.debug("Saving bookmarks to local storage"),this.packageNamespace.set("bookmarks",e)}getBookmarkExtent(e){const i=this.map.olMap.getView(),r=e.extent,n=[r.minX,r.minY,r.maxX,r.maxY],s=i.getProjection(),d=e.projection;return Qo(n,d,s)}applyExtent(e){const i=this.map.olMap.getView(),r=ei(e),n=i.getResolutionForExtent(e);i.setCenter(r),i.setResolution(n)}}function qr(o){if(!Array.isArray(o))throw new Error("Expected bookmarks from local storage to be an array.");for(const e of o)$r(e)}function $r(o){if(!o||typeof o!="object")throw new Error("Expected bookmark from local storage to be an object.");const e=o;if(typeof e.id!="string")throw new Error("Bookmark does not have a valid id.");if(typeof e.title!="string")throw new Error("Bookmark does not have a valid title.");if(Kr(e.extent),typeof e.projection!="string")throw new Error("Bookmark does not have a valid projection value.")}function Kr(o){if(!o||typeof o!="object")throw new Error("Expected bookmark extent from local storage to be an object.");const e=o;if(typeof e.minX!="number"||typeof e.minY!="number"||typeof e.maxX!="number"||typeof e.maxY!="number")throw new Error("Expected bookmark extent from local storage to have valid coordinates.")}const Zr=o=>{const{map:e}=fe(o),t=Hr("local-storage.LocalStorageService"),i=oa(e,t);return i&&a.jsx(Yr,{...o,viewModel:i})};function Yr(o){const{viewModel:e}=o,t=Ur(),i=b.useRef([]),[r,n]=b.useState(!1),s=ee(()=>e.bookmarks,[e]),[d,c]=b.useState(""),p=d.trim().length>0,{containerProps:u}=Pe("spatial-bookmarks",o),[g,f]=b.useState("list"),w=()=>{e.deleteAllBookmarks(),f("list")},S=()=>{p&&(e.createBookmark(d),f("list"),c(""),n(!0))};b.useEffect(()=>{if(r){const E=i.current;E&&E[s.length-1]?.scrollIntoView?.(),n(!1)}},[s,r]);const C=()=>a.jsxs(tt,{children:[a.jsxs(Ye,{rounded:"md",status:"warning",children:[a.jsx(Xe,{}),t.formatMessage({id:"bookmark.alert.delete"})]}),a.jsx(ea,{intl:t,onClear:w,onCancel:()=>f("list")})]}),P=()=>a.jsxs(tt,{children:[a.jsxs(Ye,{rounded:"md",status:"info",children:[a.jsx(Xe,{}),t.formatMessage({id:"bookmark.alert.create"})]}),a.jsx(Ht,{"aria-label":t.formatMessage({id:"bookmark.input.label"}),placeholder:t.formatMessage({id:"bookmark.input.placeholder"}),value:d,onChange:E=>{c(E.target.value)},onKeyDown:E=>{E.key==="Enter"&&S()},isRequired:!0,isInvalid:!p,autoFocus:!0}),a.jsx(ta,{intl:t,isInvalid:!p,onCancel:()=>{c(""),f("list")},onSave:S})]}),q=()=>a.jsxs(a.Fragment,{children:[s.length?Xr(s,e,t,i):a.jsxs(Ye,{rounded:"md",status:"info",children:[a.jsx(Xe,{}),t.formatMessage({id:"bookmark.alert.noSaved"})]}),a.jsx(Qr,{intl:t,bookmarks:s,showCreate:()=>f("create"),showDelete:()=>f("delete")})]}),_=a.jsxs(a.Fragment,{children:[g==="list"&&q(),g==="create"&&P(),g==="delete"&&C()]});return a.jsx(z,{flexDirection:"column",...u,children:_})}function Xr(o,e,t,i){const r=t.formatMessage({id:"bookmark.button.deleteOne"}),n=o.map((s,d)=>a.jsx(Jr,{index:d,listItemNodes:i,bookmark:s,onActivate:()=>e.activateBookmark(s),onDelete:()=>e.deleteBookmark(s.id),deleteBtnLabel:r},s.id));return a.jsx(Ci,{as:"ul",className:"spatial-bookmark-list",role:"listbox","aria-label":t.formatMessage({id:"bookmark.list.label"}),flexShrink:1,flexGrow:1,p:1,spacing:1,overflowY:"auto",listStyleType:"none",children:n})}const Mt={ArrowDown:1,ArrowUp:-1};function Jr(o){const{index:e,listItemNodes:t,bookmark:i,onDelete:r,onActivate:n,deleteBtnLabel:s}=o,d=i.title,c=p=>{const u=p.key;if(u==="Enter"){p.target===p.currentTarget&&n();return}if(Mt[u]!=null){const g=t.current?.length;if(!g)return;let f=(e+Mt[u])%g;f<0&&(f=g-1),t.current[f]?.focus()}};return a.jsx(O,{as:"li",p:1,ref:p=>{if(!p){t.current.splice(e,1);return}t.current[e]=p},className:ti("spatial-bookmarks-item"),tabIndex:0,rounded:"md",role:"option",cursor:"pointer",outline:0,_hover:{background:"trails.50"},_focusVisible:{boxShadow:"outline"},onKeyDown:c,onClick:n,children:a.jsxs(z,{width:"100%",flexDirection:"row",align:"center",gap:1,children:[a.jsx(Xt,{children:a.jsx(li,{})}),a.jsx(qe,{ps:2,noOfLines:1,children:d}),a.jsx(Wi,{}),a.jsx(Rt,{hasArrow:!0,label:s,placement:"right",children:a.jsx(ie,{className:"spatial-bookmarks-item-delete","aria-label":s,borderRadius:"full",iconSpacing:0,padding:0,colorScheme:"red",variant:"ghost",leftIcon:a.jsx(Gt,{}),onClick:p=>{r(),p.stopPropagation()}})},e)]})})}function Qr(o){const{intl:e,bookmarks:t,showCreate:i,showDelete:r}=o;return a.jsxs(dt,{children:[a.jsx(he,{isDisabled:t.length===0,colorScheme:"red",width:void 0,iconSpacing:0,leftIcon:a.jsx(Gt,{}),onClick:r,"aria-label":e.formatMessage({id:"bookmark.button.deleteAll"}),variant:"outline"}),a.jsx(he,{onClick:i,width:"100%",children:e.formatMessage({id:"bookmark.button.create"})})]})}function ea(o){const{intl:e,onCancel:t,onClear:i}=o;return a.jsxs(dt,{children:[a.jsx(he,{variant:"outline",onClick:t,children:e.formatMessage({id:"bookmark.button.cancelDelete"})}),a.jsx(he,{onClick:i,children:e.formatMessage({id:"bookmark.button.confirmDelete"})})]})}function ta(o){const{intl:e,onCancel:t,onSave:i,isInvalid:r}=o;return a.jsxs(dt,{children:[a.jsx(he,{variant:"outline",onClick:()=>t(),children:e.formatMessage({id:"bookmark.button.cancel"})}),a.jsx(he,{isDisabled:r,onClick:()=>i(),children:e.formatMessage({id:"bookmark.button.save"})})]})}function dt(o){return a.jsx(z,{width:"100%",flexDirection:"row",mt:2,gap:1,flexGrow:0,flexShrink:0,children:o.children})}function he(o){return a.jsx(ie,{width:"100%",...o})}function oa(o,e){const[t,i]=b.useState();return b.useEffect(()=>{let r;return o?r=new Wr(o,e):r=void 0,i(r),()=>r?.destroy()},[o,e]),t}const ia="@open-pioneer/coordinate-search",oo=Re.bind(void 0,ia),ra=3,aa=o=>{const{onSelect:e,onClear:t,projections:i=[{label:"WGS 84",value:"EPSG:4326",precision:3},{label:"Web Mercator",value:"EPSG:3857",precision:2}]}=o,{containerProps:r}=Pe("coordinate-search",o),{map:n}=fe(o),s=oo(),d=n?.olMap,c=ui(d)?.getCode()??"",p=[];i.forEach(v=>p.push({label:v.label,value:v.value,precision:v.precision||ra}));const u=p.filter(v=>we(v.value)!=null),[g,f]=b.useState({label:u[0].label,value:u[0].value,precision:u[0].precision}),[w,S]=b.useState("");let C="tooltip.basic",{coordinates:P}=ca(d);P=P&&c?pt(P,c,g.value):P;const q=sa(P,g.precision),[_,E]=b.useState(!1),te=!_&&io(s,w,g.value,go),[ht,Ke]=b.useState(!1),[Ve,mo]=b.useState("");b.useEffect(()=>{w===""&&E(!0),w!==""&&E(!1)},[w]);function go(v){C=v}const fo=qi(v=>{!ht&&v.key==="Enter"&&Ke(!0)});return a.jsx(O,{...r,children:a.jsx(z,{flexDirection:"row",flexDir:"row",children:a.jsx(Rt,{label:s.formatMessage({id:C}),hasArrow:!0,placement:"auto",isOpen:te,children:a.jsxs(ot,{className:"coordinateSearchGroup",children:[a.jsxs(ot,{className:"coordinateInputGroup",children:[a.jsx(Ht,{type:"text",value:_?q:w,onChange:v=>{S(v.target.value)},isInvalid:te,backgroundColor:te?"red.100":"undefined",placeholder:q,errorBorderColor:"red.500","aria-label":s.formatMessage({id:"coordinateSearch.ariaLabel"}),borderRightRadius:0,onKeyDown:v=>{_&&!v.ctrlKey&&E(!1),v.key=="Enter"&&Ct(s,w,g.value,c,e)}}),w!==""&&a.jsx(ct,{children:a.jsx(Ki,{size:"sm",onClick:()=>{S(""),t&&t()},isDisabled:w=="",padding:0,icon:a.jsx(mr,{}),"aria-label":s.formatMessage({id:"coordinateSearch.ariaLabel"})})})]}),a.jsx(lt,{padding:"0px",borderLeft:"0px",children:a.jsx($i,{value:g,defaultValue:g,options:u,menuPlacement:"auto","aria-label":s.formatMessage({id:"coordinateSearch.ariaLabel"}),classNamePrefix:"coordinate-Search-Select",isSearchable:!1,chakraStyles:{menu:(v,L)=>(mo(L.placement),{...v,width:"max-content",minWidth:"100%"}),control:(v,{selectProps:{menuIsOpen:L}})=>({...v,width:"max-content",minWidth:"100%",color:"white",borderleftstyle:"none",borderLeftRadius:0,padding:0,backgroundColor:`${L?"rgb(27, 75, 95)":"var(--chakra-colors-background_primary)"}`,_focus:{boxShadow:"var(--chakra-shadows-outline)"}}),valueContainer:v=>({...v,paddingEnd:0}),dropdownIndicator:(v,{selectProps:{menuIsOpen:L}})=>({...v,paddingStart:0,"> svg":{transitionDuration:"normal",transform:`rotate(${L&&Ve=="top"?0:L&&Ve=="bottom"||!L&&Ve=="top"?-180:(!L&&Ve=="btoom",0)}deg)`},backgroundColor:`${L?"rgb(27, 75, 95)":"var(--chakra-colors-background_primary)"}`}),option:v=>({...v,_focus:{background:"var(--chakra-colors-trails-300)"}}),indicatorSeparator:(v,{selectProps:{menuIsOpen:L}})=>({...v,backgroundColor:`${L?"rgb(27, 75, 95)":"var(--chakra-colors-background_primary)"}`})},ariaLiveMessages:{guidance:()=>"",onChange:v=>v.action=="select-option"||v.action=="initial-input-focus"?v.label+" "+s.formatMessage({id:"selected"}):"",onFilter:()=>"",onFocus:()=>""},onChange:v=>{v?.value!==void 0&&(f(v),Ct(s,w,v?.value,c,e))},onKeyDown:fo,menuIsOpen:ht,onMenuOpen:()=>Ke(!0),onMenuClose:()=>Ke(!1)})})]})})})})};function io(o,e,t,i){if(e=="")return!1;if(!e.includes(" "))return i&&i("tooltip.space"),!0;if(e.indexOf(" ")!=e.lastIndexOf(" "))return i&&i("tooltip.spaceOne"),!0;if(e.split(" ").length!=2||e.split(" ")[0]==""||e.split(" ")[1]=="")return i&&i("tooltip.2coords"),!0;let r=e;if(o.locale==="de"){if(!/^\d+(,\d+)? \d+(,\d+)?$/.test(e.replaceAll(".","")))return i&&i("tooltip.dividerDe"),!0;r=e.replaceAll(".","")}else if(o.locale==="en"){if(!/^\d+(.\d+)? \d+(.\d+)?$/.test(e.replaceAll(",","")))return i&&i("tooltip.dividerEn"),!0;r=e.replaceAll(",","")}const n=we(t);if(n!==null&&n.getExtent()!==null&&n.getExtent().length==4&&n.getExtent()[0]>parseFloat(r.split(" ")[0])&&n.getExtent()[1]>parseFloat(r.split(" ")[1])&&n.getExtent()[2]<parseFloat(r.split(" ")[0])&&n.getExtent()[3]<parseFloat(r.split(" ")[1]))return i&&i("tooltip.extent"),!0;const s=r.split(" "),d=[parseFloat(s[0].replace(",",".")),parseFloat(s[1].replace(",","."))];try{const c=pt(d,t,"EPSG:4326"),p=we(t);if(p!==null&&p.getExtent()!==null&&p.getExtent().length==4&&p.getExtent()[0]>c[0]&&p.getExtent()[1]>c[1]&&p.getExtent()[2]<c[0]&&p.getExtent()[3]<c[1])return i&&i("tooltip.extent"),!0}catch{return i&&i("tooltip.projection"),!0}return!1}function Ct(o,e,t,i,r){if(t==null||e==""||io(o,e,t))return;let n=e;o.locale==="de"?n=e.replaceAll(".",""):o.locale==="en"&&(n=e.replaceAll(",",""));const s=na(n,t,i);r&&r({coords:s,projection:i})}function na(o,e,t){const i=o.split(" "),r=[parseFloat(i[0].replace(",",".")),parseFloat(i[1].replace(",","."))];return pt(r,e,t)}function pt(o,e,t){return oi(o,e,t)}function sa(o,e){const t=oo();return o?la(o,e,t):""}function la(o,e,t){if(o[0]==null||o[1]==null)return"";const[i,r]=o,n=t.formatNumber(i,{maximumFractionDigits:e,minimumFractionDigits:e}),s=t.formatNumber(r,{maximumFractionDigits:e,minimumFractionDigits:e});return n+" "+s}function ca(o){const[e,t]=b.useState();return b.useEffect(()=>{if(!o)return;const i=o.on("pointermove",r=>{t(r.coordinate)});return()=>ye(i)},[o]),{coordinates:e}}function da({intl:o}){return{id:"coordinateViewer",title:o.formatMessage({id:"demos.coordinateViewer.title"}),createModel(){return{description:o.formatMessage({id:"demos.coordinateViewer.description"}),mainWidget:a.jsx(hi,{})}}}}function pa({intl:o}){return{id:"coordinateSearch",title:o.formatMessage({id:"demos.coordinateSearch.title"}),createModel(){return{description:o.formatMessage({id:"demos.coordinateSearch.description"}),mainWidget:a.jsx(ua,{})}}}}function ua(){function o(t){console.log("searched for: ",t)}function e(){console.log("search cleared")}return a.jsx(aa,{mapId:Ne,onSelect:({coords:t})=>o(t),onClear:e,projections:[{label:"EPSG:25832",value:"EPSG:25832"},{label:"WGS 84",value:"EPSG:4326"},{label:"Web Mercator",value:"EPSG:3857"},{label:"EPSG:25833",value:"EPSG:25833"},{label:"EPSG:31466",value:"EPSG:31466"},{label:"EPSG:31467",value:"EPSG:31467"},{label:"EPSG:3035",value:"EPSG:3035"}]})}function ha({intl:o}){return{id:"scaleViewer",title:o.formatMessage({id:"demos.scaleViewer.title"}),createModel(){return{description:o.formatMessage({id:"demos.scaleViewer.description"}),mainWidget:a.jsx(mi,{})}}}}function ma({intl:o}){return{id:"scaleSetter",title:o.formatMessage({id:"demos.scaleSetter.title"}),createModel(){return{description:o.formatMessage({id:"demos.scaleSetter.description"}),mainWidget:a.jsx(Br,{})}}}}function ga({intl:o}){return{id:"scaleBar",title:o.formatMessage({id:"demos.scaleBar.title"}),createModel(){return{description:o.formatMessage({id:"demos.scaleBar.description"}),tools:a.jsx(gi,{})}}}}function fa({intl:o}){return{id:"measurement",title:o.formatMessage({id:"demos.measurement.title"}),createModel(){return{description:o.formatMessage({id:"demos.measurement.description"}),mainWidget:a.jsx(fi,{})}}}}function va({intl:o}){return{id:"mapNavigation",title:o.formatMessage({id:"demos.mapNavigation.title"}),createModel(){return{description:o.formatMessage({id:"demos.mapNavigation.description"}),tools:a.jsxs(a.Fragment,{children:[a.jsx(ji,{}),a.jsx(Pi,{}),a.jsx(ba,{}),a.jsx(Ri,{})]})}}}}function ba(){const{map:o}=fe(),[e,t]=b.useState(void 0);return b.useEffect(()=>{if(!o)return;const i=new gr(o);return t(i),()=>i.destroy()},[o]),e&&a.jsxs(a.Fragment,{children:[a.jsx(Ni,{viewModel:e}),a.jsx(Vi,{viewModel:e})]})}function wa({intl:o}){return{id:"geolocation",title:o.formatMessage({id:"demos.geolocation.title"}),createModel(){return{description:o.formatMessage({id:"demos.geolocation.description"}),tools:a.jsx(Nr,{})}}}}function ya({intl:o}){return{id:"spatialBookmarks",title:o.formatMessage({id:"demos.spatialBookmarks.title"}),createModel(){return{description:o.formatMessage({id:"demos.spatialBookmarks.description"}),mainWidget:a.jsx(Zr,{})}}}}function xa({intl:o}){return{id:"printing",title:o.formatMessage({id:"demos.printing.title"}),createModel(){return{description:o.formatMessage({id:"demos.printing.description"}),mainWidget:a.jsx(vi,{})}}}}const ro="showcase-app",ao=nt.bind(void 0,ro),ve=Re.bind(void 0,ro);function ka({intl:o,mapModel:e}){return{id:"tocLegend",title:o.formatMessage({id:"demos.tocLegend.title"}),createModel(){function t(r=!0){e.layers.getLayerById("verwaltungsgebiete").setVisible(r),e.layers.getLayerById("krankenhaus").setVisible(r),e.layers.getLayerById("ogc_kitas").setVisible(r)}function i(){t(!1),e?.layers.activateBaseLayer("osm")}return{description:o.formatMessage({id:"demos.tocLegend.description"}),mainWidget:a.jsx(Sa,{}),destroy:i}}}}function Sa(){const o=b.useId(),e=b.useId(),t=ve();return a.jsxs(a.Fragment,{children:[a.jsx(O,{role:"dialog","aria-labelledby":o,children:a.jsx(Oe,{title:a.jsx(et,{id:o,size:"md",mb:2,children:a.jsx(qe,{children:t.formatMessage({id:"demos.tocLegend.tocTitle"})})}),children:a.jsx(_i,{showTools:!0,basemapSwitcherProps:{allowSelectingEmptyBasemap:!0}})})}),a.jsx(O,{pt:2,role:"dialog","aria-labelledby":e,children:a.jsx(Oe,{title:a.jsx(et,{id:e,size:"md",mb:2,children:t.formatMessage({id:"demos.tocLegend.legendTitle"})}),children:a.jsx(bi,{showBaseLayers:!0})})})]})}function Ia(o){return{id:"selectionResultList",title:o.intl.formatMessage({id:"demos.selectionResultList.title"}),createModel(){return new _a(o)}}}var Se,ne,se,ze,Ge,Pt;let _a=(Pt=class{constructor(e){h(this,Se);h(this,ne);h(this,se,Q({key:0,input:void 0,open:!1}));y(this,"description");y(this,"mainWidget");h(this,ze,e=>{const{results:t}=e,n={columns:[{id:"id",displayName:"ID",width:100,getPropertyValue(d){return d.id}},{propertyName:"pointOfContact.address.postCode",displayName:"PLZ",width:120},{propertyName:"name",displayName:"Name"},{propertyName:"inspireId",displayName:"inspireID"},{displayName:"Gefördert",width:160,getPropertyValue(d){switch(d.properties?.gefoerdert){case"ja":return!0;case"nein":return!1;default:return d.properties?.gefoerdert}}}],data:t,formatOptions:{numberOptions:{maximumFractionDigits:3},dateOptions:{dateStyle:"medium",timeStyle:"medium",timeZone:"UTC"}}},s=l(this,se).value.key;l(this,se).value={open:!0,key:s+1,input:n}});h(this,Ge,e=>{console.log("Selected features: ",e.features)});const{mapModel:t,vectorSelectionSourceFactory:i,intl:r}=e;m(this,Se,t),m(this,ne,Ea(t,i)),this.description=r.formatMessage({id:"demos.selectionResultList.description"}),this.mainWidget=a.jsx(wi,{sources:[l(this,ne)],onSelectionComplete:l(this,ze)}),t.layers.getLayerById("ogc_kitas").setVisible(!0)}destroy(){l(this,ne).destroy(),l(this,Se).layers.getLayerById("ogc_kitas").setVisible(!1)}get listContainer(){const e=l(this,se).value;if(!(!e.open||!e.input))return a.jsx(Zi,{input:e.input,onSelectionChange:l(this,Ge)},e.key)}},Se=new WeakMap,ne=new WeakMap,se=new WeakMap,ze=new WeakMap,Ge=new WeakMap,Pt);function Ea(o,e){const t=o.layers.getLayerById("ogc_kitas");return e.createSelectionSource({vectorLayer:t.olLayer,label:t.title})}const Ma="krankenhaus";function Ca(o){return{id:"editing",title:o.intl.formatMessage({id:"demos.editing.title"}),createModel(){return new La(o)}}}var Ie,le;class La{constructor(e){y(this,"description");y(this,"mainWidget");h(this,Ie);h(this,le);const{mapModel:t,intl:i,editingService:r,notificationService:n}=e;m(this,Ie,t),this.description=i.formatMessage({id:"demos.editing.description"}),m(this,le,new Aa(t,r,n,i)),this.mainWidget=a.jsx(ja,{editingController:l(this,le)}),this._setEditLayerVisible(!0)}destroy(){this._setEditLayerVisible(!1),l(this,le).stopEditing()}_setEditLayerVisible(e=!0){l(this,Ie).layers.getLayerById(Ma).setVisible(e)}}Ie=new WeakMap,le=new WeakMap;var M,A,Z,ce,Y,F,X,B;class Aa{constructor(e,t,i,r){h(this,M);h(this,A);h(this,Z);h(this,ce);h(this,Y);h(this,F);h(this,X);h(this,B);m(this,M,Q(!1)),m(this,A,e),m(this,Z,t),m(this,ce,i),m(this,Y,r)}editingActive(){return l(this,M).value}startCreateWorkflow(){if(!l(this,M).value)try{l(this,M).value=!0;const e=l(this,A).layers.getLayerById("krankenhaus"),t=new URL(e.attributes.collectionURL+"/items");l(this,Z).createFeature(l(this,A),t).whenComplete().then(r=>{if(!r)return;l(this,ce).notify({level:"info",message:l(this,Y).formatMessage({id:"demos.editing.create.featureCreated"},{featureId:r.featureId})}),(e?.olLayer).getSource()?.refresh()}).catch(r=>{console.error(r)}).finally(()=>{l(this,M).value=!1})}catch(e){l(this,M).value=!1,console.error(e)}}startUpdateWorkflow(){if(!l(this,M).value)try{l(this,M).value=!0,m(this,B,this._createEditingSelectTooltip());const e=l(this,A).layers.getLayerById("krankenhaus"),t=e?.olLayer;m(this,F,new yi({layers:[t]})),l(this,A).olMap.addInteraction(l(this,F)),l(this,B).element.classList.remove("editing-tooltip-hidden"),m(this,X,l(this,F).on("select",i=>{const r=i.selected,n=i.deselected;if(r.length!==1||n.length!==0)return;this._stopUpdateSelection();const s=r[0];if(!s)throw Error("feature is undefined");const d=new URL(e.attributes.collectionURL+"/items");l(this,Z).updateFeature(l(this,A),d,s).whenComplete().then(p=>{p&&(l(this,ce).notify({level:"info",message:l(this,Y).formatMessage({id:"demos.editing.update.featureModified"},{featureId:p.featureId})}),t.getSource()?.refresh())}).catch(p=>{console.error(p)}).finally(()=>{l(this,M).value=!1})}))}catch(e){l(this,M).value=!1,console.error(e)}}_createEditingSelectTooltip(){const e=document.createElement("div");e.className="editing-tooltip editing-tooltip-hidden",e.textContent=l(this,Y).formatMessage({id:"demos.editing.update.tooltip.select"});const t=new Bt({element:e,offset:[15,0],positioning:"center-left"}),i=l(this,A).olMap,r=i.on("pointermove",n=>{n.dragging||t.setPosition(n.coordinate)});return i.addOverlay(t),{overlay:t,element:e,destroy(){ye(r),i.removeOverlay(t)}}}_stopUpdateSelection(){l(this,F)&&l(this,A).olMap.removeInteraction(l(this,F)),l(this,X)&&ye(l(this,X)),l(this,B)&&l(this,B).destroy(),m(this,F,void 0),m(this,X,void 0),m(this,B,void 0)}stopEditing(){l(this,Z).stop(Ne),this._stopUpdateSelection(),l(this,M).value=!1}}M=new WeakMap,A=new WeakMap,Z=new WeakMap,ce=new WeakMap,Y=new WeakMap,F=new WeakMap,X=new WeakMap,B=new WeakMap;function ja({editingController:o}){const e=ve(),t=ee(()=>o.editingActive(),[o]),i=t?e.formatMessage({id:"demos.editing.activeInfo"}):e.formatMessage({id:"demos.editing.inactiveInfo"});return a.jsxs(a.Fragment,{children:[a.jsxs(z,{px:1,py:1,children:[a.jsx(ie,{mr:2,isDisabled:t,onClick:()=>{o.startCreateWorkflow()},children:e.formatMessage({id:"demos.editing.startCreateButton"})}),a.jsx(ie,{mr:2,isDisabled:t,onClick:()=>{o.startUpdateWorkflow()},children:e.formatMessage({id:"demos.editing.startUpdateButton"})}),a.jsx(ie,{isDisabled:!t,onClick:()=>{o.stopEditing()},children:e.formatMessage({id:"demos.editing.stopButton"})})]}),a.jsx(z,{px:1,py:1,children:i})]})}function Pa(o){return[ka(o),da(o),pa(o),ha(o),ma(o),ga(o),fa(o),Ca(o),va(o),wa(o),ya(o),_r(o),xa(o),Ia(o),Mr(o)]}const Ra=je("app::AppModel");var Be,_e,Ee,H,R,He,Ue,ge,no,so;class Na{constructor(e,t,i,r){h(this,ge);h(this,Be);h(this,_e);h(this,Ee);h(this,H);h(this,R);h(this,He,Di(()=>Array.from(l(this,H).values())));h(this,Ue,[]);if(m(this,Be,e),m(this,_e,t),m(this,Ee,i),m(this,H,new Map(r.map(s=>[s.id,s]))),l(this,H).size===0)throw new Error("No demos defined.");const n=r[0];m(this,R,Q([n,n.createModel()])),k(this,ge,no).call(this),l(this,Ue).push(k(this,ge,so).call(this))}destroy(){l(this,R).value[1].destroy?.()}get currentDemo(){return l(this,R).value[0]}get currentDemoModel(){return l(this,R).value[1]}get allDemoInfos(){return l(this,He).value}selectDemo(e){const t=l(this,H).get(e);if(!t)throw new Error(`Demo '${e}' does not exist.`);Ti(()=>{const[,i]=l(this,R).value;i.destroy?.(),l(this,R).value=[t,t.createModel()]})}}Be=new WeakMap,_e=new WeakMap,Ee=new WeakMap,H=new WeakMap,R=new WeakMap,He=new WeakMap,Ue=new WeakMap,ge=new WeakSet,no=function(){const t=new URL(window.location.href).searchParams.get("demo");if(t){if(!l(this,H).has(t)){l(this,_e).notify({title:l(this,Ee).formatMessage({id:"demoSelection.notFound"},{demoId:t})});return}try{this.selectDemo(t)}catch(i){Ra.error("Failed to select demo from URL",i)}}},so=function(){return qt(()=>[l(this,R).value[0].id],([e])=>{const t=new URL(window.location.href);t.searchParams.set("demo",e),window.history.replaceState(null,"",t.toString())},{immediate:!0})};var de,Me,Ce,We,lo;class Va{constructor(e){h(this,We);h(this,de,Q({kind:"loading"}));h(this,Me,[]);h(this,Ce,!1);const{mapRegistry:t,httpService:i,notifier:r,vectorSelectionSourceFactory:n,editingService:s,notificationService:d}=e.references,c=e.intl;k(this,We,lo).call(this,{mapRegistry:t,httpService:i,notifier:r,vectorSelectionSourceFactory:n,editingService:s,intl:c,notificationService:d}).catch(p=>{l(this,de).value={kind:"error",message:p.message||"Unknown error"}})}destroy(){m(this,Ce,!0);for(const e of l(this,Me))e.destroy()}get appState(){return l(this,de).value}}de=new WeakMap,Me=new WeakMap,Ce=new WeakMap,We=new WeakSet,lo=async function(e){const{mapRegistry:t,httpService:i,notifier:r,vectorSelectionSourceFactory:n,editingService:s,intl:d,notificationService:c}=e,p=await t.getMapModel(Ne);if(!p)throw new Error("No mapModel found.");const u=Pa({intl:d,httpService:i,mapModel:p,vectorSelectionSourceFactory:n,editingService:s,notificationService:c}),g={kind:"ready",appModel:new Na(p,r,d,u),destroy(){this.appModel.destroy()}};if(l(this,Ce)){g.destroy();return}l(this,de).value=g,l(this,Me).push(g)};const J=je("local-storage"),Da=0,T={CORRUPTED_DATA:"local-storage:corrupted-data",INVALID_PATH:"local-storage:invalid-path",INVALID_VALUE:"local-storage:invalid-value",NOT_SUPPORTED:"local-storage:not-supported",INTERNAL:"local-storage:internal-error"};var pe,N,U,ue,V,I,co,po,be,oe,uo;class Ta{constructor(e){h(this,I);h(this,pe);h(this,N,{});h(this,U);h(this,ue);h(this,V);m(this,pe,Ga(e.properties)),m(this,U,Ba()),l(this,U)&&(k(this,I,po).call(this),m(this,ue,k(this,I,uo).call(this)))}destroy(){l(this,V)&&(clearTimeout(l(this,V)),m(this,V,void 0)),l(this,U)&&k(this,I,be).call(this)}get isSupported(){return!!l(this,ue)}get(e){return k(this,I,oe).call(this).get(e)}set(e,t){return k(this,I,oe).call(this).set(e,t)}remove(e){return k(this,I,oe).call(this).remove(e)}removeAll(){return k(this,I,oe).call(this).removeAll()}getNamespace(e){return k(this,I,oe).call(this).getNamespace(e)}}pe=new WeakMap,N=new WeakMap,U=new WeakMap,ue=new WeakMap,V=new WeakMap,I=new WeakSet,co=function(){l(this,V)&&clearTimeout(l(this,V)),m(this,V,setTimeout(()=>{m(this,V,void 0),k(this,I,be).call(this)},Da))},po=function(){try{const e=l(this,U);if(!e)throw new D(T.INTERNAL,"Local storage is not available.");const t=e.getItem(l(this,pe));if(t==null){m(this,N,{}),k(this,I,be).call(this);return}try{const i=JSON.parse(t);if(!me(i))throw new D(T.CORRUPTED_DATA,"Persisted value should be an object.");m(this,N,i)}catch(i){J.warn("Invalid persisted data, reverting to default.",i),m(this,N,{}),k(this,I,be).call(this)}}catch(e){J.error("Failed to load from local storage",e)}},be=function(){try{const e=l(this,U);if(!e)throw new D(T.INTERNAL,"Local storage is not available.");const t=JSON.stringify(l(this,N));e.setItem(l(this,pe),t)}catch(e){J.error("Failed to save to local storage",e)}},oe=function(){const e=l(this,ue);if(!e)throw new D(T.NOT_SUPPORTED,"Local storage is not supported by this browser.");return e},uo=function(){const e={getByPath:t=>At(Oa(l(this,N),t)),setByPath:(t,i)=>{if(!za(i))throw new D(T.INVALID_VALUE,"The value is not supported by local storage.");if(i=At(i),t.length===0){if(!me(i))throw new D(T.INVALID_VALUE,"The root value must be a plain object.");m(this,N,i)}else Fa(l(this,N),t,i);k(this,I,co).call(this)}};return new ut([],e)};class ut{path;access;constructor(e,t){this.path=e,this.access=t}get(e){return this.access.getByPath([...this.path,e])}set(e,t){this.access.setByPath([...this.path,e],t)}remove(e){this.access.setByPath([...this.path,e],void 0)}removeAll(){this.access.setByPath(this.path,{})}getNamespace(e){const t=this.get(e);if(t===void 0)this.set(e,{});else if(!me(t))throw new D(T.INVALID_PATH,`Cannot use '${e}' as a namespace because it is not associated with an object.`);return new ut(this.path.concat([e]),this.access)}}const Lt="trails-state";function Oa(o,e){let t=o;for(const i of e){if(!me(t))throw new D(T.INVALID_PATH,`Cannot get nested property '${i}' because the parent is no object.`);t=t[i]}return t}function Fa(o,e,t){if(!e.length)throw new D(T.INTERNAL,"Path must not be empty.");let i=o;for(let n=0,s=e.length-1;n<s;++n){const d=e[n],c=i[d];if(!me(c))throw new D(T.INVALID_PATH,`Cannot set property on '${d}' because it is no object.`);i=c}const r=e[e.length-1];i[r]=t}function me(o){return!!(o&&typeof o=="object"&&!Array.isArray(o))}function za(o){const e=typeof o;return e==="boolean"||e==="number"||e==="string"||e==="undefined"||o===null||Array.isArray(o)||me(o)}function Ga(o){const e=o.storageId;return!e||typeof e!="string"?(J.warn(`The 'storageId' property of the 'local-storage' package should be set to a valid string to avoid collisions with other applications. Defaulting to '${Lt}'.`),Lt):e}function Ba(){if(typeof Storage>"u"){J.warn("Local storage is not supported by this browser.");return}try{const o=globalThis.localStorage;if(!o){J.warn("Local storage is not supported by this browser.");return}return o}catch(o){J.warn("Local storage is not supported by this browser.",o);return}}function At(o){return o!=null&&(o=JSON.parse(JSON.stringify(o))),o}const Ha={"showcase-app":{name:"showcase-app",services:{MapConfigProviderImpl:{name:"MapConfigProviderImpl",clazz:br,provides:[{name:"map.MapConfigProvider",qualifier:void 0}],references:{vectorSourceFactory:{name:"ogc-features.VectorSourceFactory",qualifier:void 0,all:!1}}},AppInitModel:{name:"AppInitModel",clazz:Va,provides:[{name:"app.AppInitModel",qualifier:void 0}],references:{httpService:{name:"http.HttpService",qualifier:void 0,all:!1},mapRegistry:{name:"map.MapRegistry",qualifier:void 0,all:!1},notifier:{name:"notifier.NotificationService",qualifier:void 0,all:!1},vectorSelectionSourceFactory:{name:"selection.VectorSelectionSourceFactory",qualifier:void 0,all:!1},editingService:{name:"editing.EditingService",qualifier:void 0,all:!1},notificationService:{name:"notifier.NotificationService",qualifier:void 0,all:!1}}}},ui:{references:[{name:"app.AppInitModel",qualifier:void 0,all:!1},{name:"runtime.ApplicationContext",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/chakra-integration":{name:"@open-pioneer/chakra-integration",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime":{name:"@open-pioneer/runtime",services:{},ui:{references:[]},properties:{}},"@open-pioneer/react-utils":{name:"@open-pioneer/react-utils",services:{},ui:{references:[]},properties:{}},"@open-pioneer/http":{name:"@open-pioneer/http",services:{HttpServiceImpl:{name:"HttpServiceImpl",clazz:ii,provides:[{name:"http.HttpService",qualifier:"http.HttpService"}],references:{interceptors:{name:"http.Interceptor",qualifier:void 0,all:!0}}}},ui:{references:[]},properties:{}},"@open-pioneer/notifier":{name:"@open-pioneer/notifier",services:{NotificationServiceImpl:{name:"NotificationServiceImpl",clazz:Yi,provides:[{name:"notifier.NotificationService",qualifier:"notifier.NotificationService"}],references:{}}},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/reactivity":{name:"@open-pioneer/reactivity",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map":{name:"@open-pioneer/map",services:{MapRegistryImpl:{name:"MapRegistryImpl",clazz:ri,provides:[{name:"map.MapRegistry",qualifier:void 0}],references:{providers:{name:"map.MapConfigProvider",qualifier:void 0,all:!0},httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[{name:"map.MapRegistry",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/coordinate-viewer":{name:"@open-pioneer/coordinate-viewer",services:{},ui:{references:[]},properties:{}},"@open-pioneer/ogc-features":{name:"@open-pioneer/ogc-features",services:{VectorSourceFactory:{name:"VectorSourceFactory",clazz:Oi,provides:[{name:"ogc-features.VectorSourceFactory",qualifier:void 0}],references:{httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}},SearchSourceFactory:{name:"SearchSourceFactory",clazz:Fi,provides:[{name:"ogc-features.SearchSourceFactory",qualifier:void 0}],references:{httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[]},properties:{}},"@open-pioneer/overview-map":{name:"@open-pioneer/overview-map",services:{},ui:{references:[]},properties:{}},"@open-pioneer/scale-bar":{name:"@open-pioneer/scale-bar",services:{},ui:{references:[]},properties:{}},"@open-pioneer/scale-viewer":{name:"@open-pioneer/scale-viewer",services:{},ui:{references:[]},properties:{}},"@open-pioneer/printing":{name:"@open-pioneer/printing",services:{PrintingServiceImpl:{name:"PrintingServiceImpl",clazz:Xi,provides:[{name:"printing.PrintingService",qualifier:void 0}],references:{}}},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1},{name:"printing.PrintingService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/editing":{name:"@open-pioneer/editing",services:{EditingServiceImpl:{name:"EditingServiceImpl",clazz:xi,provides:[{name:"editing.EditingService",qualifier:void 0}],references:{mapRegistry:{name:"map.MapRegistry",qualifier:void 0,all:!1},httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[]},properties:{polygonStyle:{value:{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"red","stroke-width":1.25,"circle-radius":3,"circle-fill-color":"red","circle-stroke-width":1.25,"circle-stroke-color":"red"},required:!1},vertexStyle:{value:{"circle-radius":3,"circle-fill-color":"red","circle-stroke-width":1.25,"circle-stroke-color":"red"},required:!1}}},"@open-pioneer/coordinate-search":{name:"@open-pioneer/coordinate-search",services:{},ui:{references:[]},properties:{}},"@open-pioneer/legend":{name:"@open-pioneer/legend",services:{},ui:{references:[]},properties:{}},"@open-pioneer/geolocation":{name:"@open-pioneer/geolocation",services:{},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/map-navigation":{name:"@open-pioneer/map-navigation",services:{},ui:{references:[]},properties:{}},"@open-pioneer/measurement":{name:"@open-pioneer/measurement",services:{},ui:{references:[]},properties:{}},"@open-pioneer/result-list":{name:"@open-pioneer/result-list",services:{},ui:{references:[]},properties:{}},"@open-pioneer/scale-setter":{name:"@open-pioneer/scale-setter",services:{},ui:{references:[]},properties:{}},"@open-pioneer/search":{name:"@open-pioneer/search",services:{},ui:{references:[]},properties:{}},"@open-pioneer/selection":{name:"@open-pioneer/selection",services:{VectorSelectionSourceFactory:{name:"VectorSelectionSourceFactory",clazz:ki,provides:[{name:"selection.VectorSelectionSourceFactory",qualifier:void 0}],references:{}}},ui:{references:[{name:"notifier.NotificationService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/spatial-bookmarks":{name:"@open-pioneer/spatial-bookmarks",services:{},ui:{references:[{name:"local-storage.LocalStorageService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/toc":{name:"@open-pioneer/toc",services:{},ui:{references:[]},properties:{}},"@open-pioneer/core":{name:"@open-pioneer/core",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime-react-support":{name:"@open-pioneer/runtime-react-support",services:{},ui:{references:[]},properties:{}},"@open-pioneer/base-theme":{name:"@open-pioneer/base-theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map-ui-components":{name:"@open-pioneer/map-ui-components",services:{},ui:{references:[]},properties:{}},"@open-pioneer/basemap-switcher":{name:"@open-pioneer/basemap-switcher",services:{},ui:{references:[]},properties:{}},"@open-pioneer/local-storage":{name:"@open-pioneer/local-storage",services:{LocalStorageServiceImpl:{name:"LocalStorageServiceImpl",clazz:Ta,provides:[{name:"local-storage.LocalStorageService",qualifier:"local-storage.LocalStorageService"}],references:{}}},ui:{references:[]},properties:{storageId:{value:null,required:!1}}}},Ua=':root,:host{--ol-background-color: white;--ol-accent-background-color: #F5F5F5;--ol-subtle-background-color: rgba(128, 128, 128, .25);--ol-partial-background-color: rgba(255, 255, 255, .75);--ol-foreground-color: #333333;--ol-subtle-foreground-color: #666666;--ol-brand-color: #00AAFF}.ol-box{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner{display:flex}.ol-scale-step-marker{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text{position:absolute;bottom:-5px;font-size:10px;z-index:11;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text{position:absolute;font-size:12px;text-align:center;bottom:25px;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-singlebar{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd{background-color:var(--ol-background-color)}.ol-unsupported{display:none}.ol-viewport,.ol-unselectable{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport canvas{all:unset;overflow:hidden}.ol-viewport{touch-action:pan-x pan-y}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.ol-control{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:hover,.ol-control button:focus{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution a{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution ul{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button{flex-shrink:0}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:block}.ol-overviewmap .ol-overviewmap-map{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}.map-container .ol-viewport .ol-attribution{bottom:var(--map-padding-bottom);right:var(--map-padding-right)}.printing-overlay{position:absolute;top:0;right:0;bottom:0;left:0;z-index:10000;-webkit-user-select:none;user-select:none;pointer-events:all;cursor:wait;display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#b4b4b4cc}.printing-overlay-status{flex:1 1 auto;font-size:1.5em;text-align:center}.printing-scale-bar.ol-scale-bar{left:var(--printing-scale-bar-left);bottom:var(--printing-scale-bar-bottom)}.editing-tooltip{position:relative;background:#fffc;border-radius:4px;color:#000;padding:4px 8px;opacity:1;white-space:nowrap;font-size:12px;cursor:default;-webkit-user-select:none;user-select:none;font-weight:700}.editing-tooltip-hidden{visibility:hidden}.measurement-tooltip{position:relative;background:#fffc;border-radius:4px;color:#000;padding:4px 8px;opacity:1;white-space:nowrap;font-size:12px;cursor:default;-webkit-user-select:none;user-select:none;font-weight:700}.measurement-active-tooltip{background:#000000e6;border-radius:4px;border-color:#000000e6;opacity:.9;color:#fff}.measurement-finished-tooltip{background-color:#4cb3ffe6;color:#000;border:1px solid white}.measurement-active-tooltip:before,.measurement-finished-tooltip:before{border-top:6px solid rgba(0,0,0,.9);border-right:6px solid transparent;border-left:6px solid transparent;content:"";position:absolute;bottom:-6px;margin-left:-7px;left:50%}.measurement-finished-tooltip:before{border-top-color:#4cb3ff}.search-component .chakra-divider{display:none}.search-component .search-highlighted-match{font-weight:700}.search-component .search-value-container{cursor:text;padding-left:30px!important}.search-component .search-invisible{display:none}.selection-drag-box{background-color:#ffffff4d!important;border:3px solid var(--chakra-colors-background_primary)!important}.selection-tooltip{position:relative;background:#fffc;border-radius:4px;color:#000;padding:4px 8px;opacity:1;white-space:nowrap;font-size:12px;cursor:default;-webkit-user-select:none;user-select:none;font-weight:700}.selection .react-select{cursor:default}.map-container .selection-active{cursor:crosshair}.map-container .selection-inactive{cursor:no-drop}.selection-source-value.selection-source-value--disabled{opacity:.4}.selection-source-value.selection-source-value--disabled span{margin:0 6px 0 0}.map-anchor.main-map-anchor{overflow-x:hidden;overflow-y:auto}.map-container:focus-visible{outline:none}.map-container:focus-visible:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;border:3px solid var(--chakra-colors-trails-500)}@media screen and (max-width: 48em){.map-anchor.main-map-anchor{max-height:45%}}.overview-map .ol-overviewmap{position:relative;height:100%;width:100%}.overview-map .ol-overviewmap:not(.ol-collapsed){border:1px solid black}.overview-map .ol-overviewmap .ol-overviewmap-map{border:none;width:100%;height:100%}.overview-map .ol-overviewmap .ol-overviewmap-box{border:2px solid red}.scale-bar .ol-scale-bar{margin-bottom:8px;margin-right:8px}.scale-bar .ol-scale-bar,.scale-bar .ol-scale-line{position:relative;bottom:0;left:0;background:none}.scale-bar .ol-scale-bar .ol-scale-bar-inner,.scale-bar .ol-scale-bar .ol-scale-line-inner,.scale-bar .ol-scale-line .ol-scale-bar-inner,.scale-bar .ol-scale-line .ol-scale-line-inner{color:var(--chakra-white);border-color:var(--chakra-white)}.result-list-no-data-message{text-align:center;margin-top:50px;font-weight:700;font-size:larger}.result-list-table th,.result-list-table td{overflow-wrap:break-word}.result-list-table.result-list-table--is-resizing *{cursor:col-resize}.result-list-table thead{position:sticky;top:0;z-index:1;background:var(--chakra-colors-background_body)}.result-list-table th{position:relative;border-right-width:thin}.result-list-table tbody tr:hover{background:var(--chakra-colors-background_light)}.result-list-table .result-list-resizer{position:absolute;top:0;height:100%;right:0;width:8px;background:var(--chakra-colors-trails-100);transform:scaleX(.25);cursor:col-resize;-webkit-user-select:none;user-select:none;touch-action:none;padding-left:0}.result-list-table th:last-child .result-list-resizer{width:8px;transform:translate(50%) scaleX(.25)}.result-list-table th .result-list-resizer.result-list-resizer--is-resizing{background:var(--chakra-colors-trails-500);transform:scale(1)}.result-list-table th .result-list-resizer:hover{transform:scale(1)}',Wa=["en","de"];function qa(o){switch(o){case"en":return xt(()=>import("./B1XFR4DXP4eQ.js"),[],import.meta.url).then(e=>e.default);case"de":return xt(()=>import("./D4zqWv5V_PGs.js"),[],import.meta.url).then(e=>e.default)}throw new Error(`Unsupported locale: '${o}'`)}const $a=So(Ua),Ka=Object.freeze(Object.defineProperty({__proto__:null,loadMessages:qa,locales:Wa,packages:Ha,styles:$a},Symbol.toStringTag,{value:"Module"}));function ho({label:o,children:e}){return a.jsxs(Ji,{as:Qi,maxWidth:{base:"none",md:"20em"},width:{base:"100%",sm:"47%",md:void 0},children:[a.jsx(er,{flexBasis:{base:"8em",sm:"auto"},m:0,children:o}),e]})}const Za=je("app::DemoSelection");function Ya({appModel:o}){const e=ve(),{allDemos:t,currentDemo:i}=ee(()=>({allDemos:o.allDemoInfos,currentDemo:o.currentDemo}),[o]),r=b.useMemo(()=>t.map(n=>a.jsx("option",{value:n.id,children:n.title},n.id)),[t]);return a.jsx(ho,{label:e.formatMessage({id:"demoSelection.label"}),children:a.jsx(Ut,{value:i.id,onChange:n=>{const s=n.target.value;try{o.selectDemo(s)}catch(d){Za.error("Failed to select demo",d)}},children:r})})}function Xa(){const o=ve(),e=ao("runtime.ApplicationContext"),t=Ja(e.getLocale()),i=r=>{switch(r){case"en":e.setLocale("en-GB");break;case"de":e.setLocale("de-DE");break}};return a.jsx(ho,{label:o.formatMessage({id:"localeSwitcher.label"}),children:a.jsxs(Ut,{value:t,onChange:r=>i(r.target.value),children:[a.jsx("option",{value:"de",children:o.formatMessage({id:"localeSwitcher.locale.de"})}),a.jsx("option",{value:"en",children:o.formatMessage({id:"localeSwitcher.locale.en"})})]})})}function Ja(o){const e=o.match(/^[a-z]+/i)?.[0];if(e==="en"||e=="de")return e;throw new Error("unexpected locale prefix: "+e)}function Qa({appModel:o}){const e=ve();return a.jsxs(z,{as:"header",px:2,py:3,flexWrap:{base:"wrap",md:"nowrap"},alignItems:"baseline",gap:2,boxShadow:"1px 0px 3px rgba(0, 0, 0, 0.5)",bgColor:"white",zIndex:100,children:[a.jsx(et,{size:"md",flexShrink:0,flexGrow:1,textAlign:{base:"center",md:"left"},width:{base:"100%",md:"auto"},mb:{base:2,md:0},children:e.formatMessage({id:"header.title"})}),a.jsx(Ya,{appModel:o}),a.jsx(Xa,{})]})}function en(){const o=ao("app.AppInitModel"),e=ee(()=>o.appState,[o]);let t;switch(e.kind){case"loading":t="Loading...";break;case"error":t="Error: "+e.message;break;case"ready":t=a.jsx(tn,{state:e})}return t}function tn(o){const e=ve(),t=o.state.appModel,{currentDemo:i,currentDemoModel:r}=ee(()=>({currentDemo:t.currentDemo,currentDemoModel:t.currentDemoModel}),[t]),n=ee(()=>r.listContainer,[r]),s=b.useMemo(()=>({left:0,right:0,bottom:n!=null?400:0,top:0}),[n]);return a.jsxs(a.Fragment,{children:[a.jsx(Si,{position:"top-right"}),a.jsx(z,{height:"100%",direction:"column",children:a.jsx(Oe,{title:a.jsx(Qa,{appModel:t}),children:a.jsx(z,{flex:"1",direction:"column",position:"relative",children:a.jsx(ai,{mapId:Ne,children:a.jsxs(ni,{viewPadding:s,role:"main","aria-label":e.formatMessage({id:"ariaLabels.map"}),children:[a.jsx(yt,{className:"main-map-anchor",position:"top-left",horizontalGap:10,verticalGap:10,children:a.jsx(O,{bgColor:"white",borderRadius:10,p:2,maxW:"500px",children:a.jsxs(Oe,{title:i.title,sectionHeadingProps:{size:"lg"},children:[a.jsx(qe,{py:4,dangerouslySetInnerHTML:{__html:r.description}}),r.mainWidget]})})}),a.jsx(yt,{position:"bottom-right",horizontalGap:6,children:a.jsx(tt,{p:1,children:r.tools})}),n&&a.jsx(O,{className:"list-container",position:"absolute",bottom:"0",backgroundColor:"white",width:"100%",height:"400px",zIndex:1,borderTop:"2px solid",borderColor:"trails.100",children:n})]})})})})})]})}const on=new URLSearchParams(window.location.search),rn=on.get("lang")||void 0,an=Io({component:en,appMetadata:Ka,config:{properties:{"@open-pioneer/local-storage":{storageId:"ol-showcase-state"}},locale:rn}});customElements.define("showcase-app",an);
