import{a as co,j as W,B as In,V as po,f as fo}from"./D3OchF5tz_JL.js";import{t as ho}from"./D9QYJF_czqWA.js";import{n as Ti,o as mo,p as he,q as yo,s as G,t as go,v as vo,x as Be,y as ki,z as mt,A as xo,B as Le,E as bo,G as wo,I as To,J as ko,K as So,L as Eo,N as Si,P as Ei,Q as hr,R as zo,U as Fo,W as Pn,X as Co,Y as Io,Z as mr,_ as Po,$ as Mn,a0 as Rn,a1 as Mo,a2 as Ro,a3 as _o,a4 as Ao,a5 as Pt,a6 as jo,a7 as zi,a8 as Kr,a9 as jr,aa as Fi,ab as Do,ac as Lo,ad as No,ae as Oo,af as tt,ag as $o,ah as qo,ai as Go,aj as qt,ak as Vo,al as Uo,am as ht,F as Ke,c as Re,an as _n,C as Ci,ao as Bo,ap as Dr,aq as Zo,ar as Ho,as as Xo,at as Wo,a as Lr,au as Jo,av as Ii,aw as Ko,ax as Yo,ay as Qo,az as es,b as yr,aA as ts,aB as An,aC as rs,S as pt,T as ns,O as is,M as os,H as ss,u as as,i as ls,D as us,k as gr,g as jn,l as cs,m as vr,h as Dn}from"./B_v8iqUKZusO.js";import{L as ps}from"./B1EYIkmopxze.js";import{M as fs,a as ds,b as hs}from"./B7Yu7PJrmlVj.js";import{F as ms,t as ys,G as Ln,f as gs}from"./COqgV6NuVY8P.js";import{S as vs,V as xs,I as bs,Z as ws,a as Ts}from"./bU0Z2TNCOrfO.js";import{_ as Nn}from"./CmsKOCeNyeyo.js";import{T as xr}from"./BCNjkw9XwAxH.js";import"./Cz043qeMr32Q.js";import"./DyN_bq02jTYT.js";import"./BQcCgYBPITKg.js";import"./ICvFkUXNF0VB.js";import"./CU8oifTzXOca.js";const On=[];class ks extends Ti{constructor(e,t,n,i,o){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.removeSourceTiles_=o,this.wrappedTileCoord=n}getContext(){return this.context_||(this.context_=mo(1,1,On)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=he(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(yo(this.context_),On.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let Pi=class extends Ti{constructor(e,t,n,i,o,s){super(e,t,s),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=n,this.key=n}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==G.IDLE&&(this.setState(G.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(G.ERROR)}setFeatures(e){this.features_=e,this.setState(G.LOADED)}setLoader(e){this.loader_=e}};const Ss={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},$n={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class Es extends go{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=vo(),this.tileClipContexts_=null}drawTile(e,t,n,i,o,s,a,l){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,n,i,o,s,a,l)}getTile(e,t,n,i){const o=this.getOrCreateTile(e,t,n,i);if(!o)return null;const a=i.viewState.resolution,l=i.viewHints;return(!(l[Be.ANIMATING]||l[Be.INTERACTING])||!o.wantedResolution)&&(o.wantedResolution=a),o}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,n){const i=this.getLayer(),o=i.getRevision(),s=i.getRenderOrder()||null,a=e.wantedResolution,l=e.getReplayState(i);if(!l.dirty&&l.renderedResolution===a&&l.renderedRevision==o&&l.renderedRenderOrder==s)return;const u=i.getSource(),c=!!i.getDeclutter(),p=u.getTileGrid(),d=u.getTileGridForProjection(n).getTileCoordExtent(e.wrappedTileCoord),h=u.getSourceTiles(t,n,e),g=he(i);delete e.hitDetectionImageData[g],e.executorGroups[g]=[],l.dirty=!1;for(let m=0,P=h.length;m<P;++m){const z=h[m];if(z.getState()!=G.LOADED)continue;const F=z.tileCoord,C=p.getTileCoordExtent(F),S=ki(d,C),j=mt(S,i.getRenderBuffer()*a,this.tempExtent),T=xo(C,S)?null:j,I=new bo(0,S,a,t),L=Ro(a,t),Q=function(k,A){let xe;const Et=k.getStyleFunction()||i.getStyleFunction();if(Et&&(xe=Et(k,a)),xe){const zt=this.renderFeature(k,L,xe,I,c,A);l.dirty=l.dirty||zt}},V=z.getFeatures();s&&s!==l.renderedRenderOrder&&V.sort(s);for(let k=0,A=V.length;k<A;++k){const xe=V[k];(!T||Le(T,xe.getGeometry().getExtent()))&&Q.call(this,xe,k)}const v=I.finish(),Y=i.getRenderMode()!=="vector"&&c&&h.length===1?null:S,x=new wo(Y,a,t,u.getOverlaps(),v,i.getRenderBuffer(),!0);e.executorGroups[g].push(x)}l.renderedRevision=o,l.renderedRenderOrder=s,l.renderedResolution=a}forEachFeatureAtCoordinate(e,t,n,i,o){const s=t.viewState.resolution,a=t.viewState.rotation;n=n??0;const l=this.getLayer(),c=l.getSource().getTileGridForProjection(t.viewState.projection),p=To([e]);mt(p,s*n,p);const f={},d=function(F,C,S){let j=F.getId();j===void 0&&(j=he(F));const T=f[j];if(T){if(T!==!0&&S<T.distanceSq){if(S===0)return f[j]=!0,o.splice(o.lastIndexOf(T),1),i(F,l,C);T.geometry=C,T.distanceSq=S}}else{if(S===0)return f[j]=!0,i(F,l,C);o.push(f[j]={feature:F,layer:l,geometry:C,distanceSq:S,callback:i})}},h=this.renderedTiles,g=he(l),m=l.getDeclutter(),P=m?t.declutter?.[m]?.all().map(F=>F.value):null;let z;e:for(let F=0,C=h.length;F<C;++F){const S=h[F],j=c.getTileCoordExtent(S.wrappedTileCoord);if(!Le(j,p))continue;const T=S.executorGroups[g];for(let I=0,L=T.length;I<L;++I)if(z=T[I].forEachFeatureAtCoordinate(e,s,a,n,d,P),z)break e}return z}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,n)=>{const i=this.getLayer(),o=i.getSource(),s=this.renderedProjection,a=s.getExtent(),l=this.renderedResolution,u=o.getTileGridForProjection(s),c=ko(this.renderedPixelToCoordinateTransform_,e.slice()),p=u.getTileCoordForCoordAndResolution(c,l).toString(),f=this.renderedTiles.find(F=>F.tileCoord.toString()===p&&F.getState()===G.LOADED);if(!f||f.loadingSourceTiles>0){t([]);return}o.getWrapX()&&s.canWrapX()&&!So(a,u.getTileCoordExtent(f.tileCoord))&&Eo(c,s);const d=he(i),h=u.getTileCoordExtent(f.wrappedTileCoord),g=Si(h),m=[(c[0]-g[0])/l,(g[1]-c[1])/l],P=f.getSourceTiles().reduce((F,C)=>F.concat(C.getFeatures()),[]);let z=f.hitDetectionImageData[d];if(!z){const F=Ei(u.getTileSize(u.getZForResolution(l,o.zDirection))),C=this.renderedRotation_,S=[this.getRenderTransform(u.getTileCoordCenter(f.wrappedTileCoord),l,0,hr,F[0]*hr,F[1]*hr,0)];z=zo(F,S,P,i.getStyleFunction(),u.getTileCoordExtent(f.wrappedTileCoord),f.getReplayState(i).renderedResolution,C),f.hitDetectionImageData[d]=z}t(Fo(m,P,z))})}getFeaturesInExtent(e){const t=[],n=this.getTileCache();if(n.getCount()===0)return t;const o=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),s=o.getZForResolution(this.renderedResolution),a={};return n.forEach(l=>{if(l.tileCoord[0]!==s||l.getState()!==G.LOADED)return;const u=l.getSourceTiles();for(let c=0,p=u.length;c<p;++c){const f=u[c],d=f.getKey();if(d in a)continue;a[d]=!0;const h=f.tileCoord;if(Le(e,o.getTileCoordExtent(h))){const g=f.getFeatures();if(g)for(let m=0,P=g.length;m<P;++m){const z=g[m],F=z.getGeometry();Le(e,F.getExtent())&&t.push(z)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const n=this.context,i=n.globalAlpha;n.globalAlpha=t.opacity;const o=e.viewHints,s=!(o[Be.ANIMATING]||o[Be.INTERACTING]),a=[this.context.canvas.width,this.context.canvas.height],l=this.getLayer().getDeclutter(),u=l?e.declutter?.[l]:void 0,c=he(this.getLayer()),p=this.renderedTiles;for(let f=0,d=p.length;f<d;++f){const h=p[f],g=h.executorGroups[c];if(g)for(let m=g.length-1;m>=0;--m)g[m].execute(this.context,a,this.getTileRenderTransform(h,e),e.viewState.rotation,s,Pn,u)}n.globalAlpha=i}renderDeferredInternal(e){const t=this.renderedTiles,n=he(this.getLayer()),i=t.reduce((l,u,c)=>(u.executorGroups[n].forEach(p=>l.push({executorGroup:p,index:c})),l),[]),o=i.map(({executorGroup:l})=>l.getDeferredZIndexContexts()),s={};for(let l=0,u=i.length;l<u;++l){const c=i[l].executorGroup.getDeferredZIndexContexts();for(const p in c)s[p]=!0}Object.keys(s).map(Number).sort(Co).forEach(l=>{o.forEach((u,c)=>{u[l]&&(u[l].forEach(p=>{const{executorGroup:f,index:d}=i[c],h=f.getRenderedContext(),g=h.globalAlpha;h.globalAlpha=this.renderedOpacity_;const m=this.tileClipContexts_[d];m&&m.draw(h),p.draw(h),m&&h.restore(),h.globalAlpha=g,p.clear()}),u[l].length=0)})})}getTileRenderTransform(e,t){const n=t.pixelRatio,i=t.viewState,o=i.center,s=i.resolution,a=i.rotation,l=t.size,u=Math.round(l[0]*n),c=Math.round(l[1]*n),f=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),d=e.tileCoord,h=f.getTileCoordExtent(e.wrappedTileCoord),g=f.getTileCoordExtent(d,this.tempExtent)[0]-h[0];return Io(mr(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(o,s,a,n,u,c,g))}postRender(e,t){const n=t.viewHints,i=!(n[Be.ANIMATING]||n[Be.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const o=this.getLayer(),s=o.getRenderMode(),a=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const l=o.getDeclutter(),u=l?$n[s].filter(S=>!Pn.includes(S)):$n[s],c=t.viewState,p=c.rotation,f=o.getSource(),h=f.getTileGridForProjection(c.projection).getZForResolution(c.resolution,f.zDirection),g=this.renderedTiles,m=[],P=[],z=[],F=he(o);let C=!0;for(let S=g.length-1;S>=0;--S){const j=g[S];C=C&&!j.getReplayState(o).dirty;const T=j.executorGroups[F].filter(x=>x.hasExecutors(u));if(T.length===0)continue;const I=this.getTileRenderTransform(j,t),L=j.tileCoord[0];let Q=!1;const V=T[0].getClipCoords(I);let v=e,Y;if(V){Y=new Po,v=Y.getContext();for(let x=0,k=m.length;x<k;++x)if(h!==L&&L<P[x]){const A=m[x];Le([V[0],V[3],V[4],V[7]],[A[0],A[3],A[4],A[7]])&&(Q||(v.save(),Q=!0),v.beginPath(),v.moveTo(V[0],V[1]),v.lineTo(V[2],V[3]),v.lineTo(V[4],V[5]),v.lineTo(V[6],V[7]),v.moveTo(A[6],A[7]),v.lineTo(A[4],A[5]),v.lineTo(A[2],A[3]),v.lineTo(A[0],A[1]),v.clip())}m.push(V),P.push(L)}for(let x=0,k=T.length;x<k;++x)T[x].execute(e,[e.canvas.width,e.canvas.height],I,p,i,u,t.declutter?.[l]);Q&&(v===e?v.restore():z[S]=Y)}e.globalAlpha=a,this.ready=C,this.tileClipContexts_=z,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,n,i,o,s){if(!n)return!1;let a=!1;if(Array.isArray(n))for(let l=0,u=n.length;l<u;++l)a=Mn(i,e,n[l],t,this.boundHandleStyleImageChange_,void 0,o,s)||a;else a=Mn(i,e,n,t,this.boundHandleStyleImageChange_,void 0,o,s);return a}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const n=e.getReplayState(t),i=t.getRevision(),o=e.wantedResolution;return n.renderedTileResolution!==o||n.renderedTileRevision!==i}renderTileImage_(e,t){const n=this.getLayer(),i=e.getReplayState(n),o=n.getRevision(),s=e.executorGroups[he(n)];i.renderedTileRevision=o;const a=e.wrappedTileCoord,l=a[0],u=n.getSource();let c=t.pixelRatio;const f=t.viewState.projection,d=u.getTileGridForProjection(f),h=d.getResolution(e.tileCoord[0]),g=t.pixelRatio/e.wantedResolution*h,m=d.getResolution(l),P=e.getContext();c=Math.round(Math.max(c,g/c));const z=u.getTilePixelSize(l,c,f);P.canvas.width=z[0],P.canvas.height=z[1];const F=c/g;if(F!==1){const T=Rn(this.tmpTransform_);mr(T,F,F),P.setTransform.apply(P,T)}const C=d.getTileCoordExtent(a,this.tempExtent),S=g/m,j=Rn(this.tmpTransform_);mr(j,S,-S),Mo(j,-C[0],-C[3]);for(let T=0,I=s.length;T<I;++T)s[T].execute(P,[P.canvas.width*F,P.canvas.height*F],j,0,!0,Ss[n.getRenderMode()],null);i.renderedTileResolution=e.wantedResolution}}class yt extends _o{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const n=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=n;const i=e.renderMode||"hybrid";Ao(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new Es(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(Pt.PRELOAD)}getUseInterimTilesOnError(){return this.get(Pt.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(Pt.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(Pt.USE_INTERIM_TILES_ON_ERROR,e)}}function zs(r,e,t,n){const i=document.createElement("script"),o="olc_"+he(e);function s(){delete window[o],i.parentNode.removeChild(i)}i.async=!0,i.src=r+(r.includes("?")?"&":"?")+"callback="+o;const a=setTimeout(function(){s(),t&&t()},1e4);window[o]=function(l){clearTimeout(a),s(),e(l)},document.head.appendChild(i)}class Yr extends jo{constructor(e){const t=e.projection||"EPSG:3857",n=e.extent||zi(t),i=e.tileGrid||Kr({extent:n,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Mi,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:Pi,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,n){if(n.getState()===G.IDLE){n.setState(G.LOADING);const i=n.wrappedTileCoord,o=this.getTileGridForProjection(t),s=o.getTileCoordExtent(i),a=i[0],l=o.getResolution(a);mt(s,-l,s);const u=this.tileGrid,c=u.getExtent();c&&ki(s,c,s);const p=u.getZForResolution(l,this.zDirection);u.forEachTileCoord(s,p,f=>{const d=this.tileUrlFunction(f,e,t);this.sourceTiles_[d]||(this.sourceTiles_[d]=new this.tileClass(f,d?G.IDLE:G.EMPTY,d,this.format_,this.tileLoadFunction));const h=this.sourceTiles_[d];n.sourceTiles.push(h),this.tileKeysBySourceTileUrl_[d]||(this.tileKeysBySourceTileUrl_[d]=[]),this.tileKeysBySourceTileUrl_[d].push(n.getKey());const g=h.getState();if(g<G.LOADED){const m=P=>{this.handleTileChange(P);const z=h.getState();if(z===G.LOADED||z===G.ERROR){const F=h.getKey();F in n.errorTileKeys?h.getState()===G.LOADED&&delete n.errorTileKeys[F]:n.loadingSourceTiles--,z===G.ERROR?n.errorTileKeys[F]=!0:h.removeEventListener(jr.CHANGE,m),n.loadingSourceTiles===0&&n.setState(Do(n.errorTileKeys)?G.LOADED:G.ERROR)}};h.addEventListener(jr.CHANGE,m),n.loadingSourceTiles++}g===G.IDLE&&(h.extent=u.getTileCoordExtent(f),h.projection=t,h.resolution=u.getResolution(f[0]),h.load())}),n.loadingSourceTiles||n.setState(n.sourceTiles.some(f=>f.getState()===G.ERROR)?G.ERROR:G.LOADED)}return n.sourceTiles}removeSourceTiles(e){const t=e.getKey(),n=e.sourceTiles;for(let i=0,o=n.length;i<o;++i){const s=n[i].getTileUrl();if(!this.tileKeysBySourceTileUrl_[s])return;const a=this.tileKeysBySourceTileUrl_[s].indexOf(t);a!==-1&&(this.tileKeysBySourceTileUrl_[s].splice(a,1),this.tileKeysBySourceTileUrl_[s].length===0&&(delete this.tileKeysBySourceTileUrl_[s],delete this.sourceTiles_[s]))}}getTile(e,t,n,i,o){const s=[e,t,n];let a=this.getTileCoordForTileUrlFunction(s,o);const l=this.getTileGrid().getExtent(),u=this.getTileGridForProjection(o);if(a&&l){const f=u.getTileCoordExtent(a);mt(f,-u.getResolution(e),f),Le(l,f)||(a=null)}let c=!0;if(a!==null){const f=this.tileGrid,d=u.getResolution(e),h=f.getZForResolution(d,1),g=u.getTileCoordExtent(a);mt(g,-d,g),f.forEachTileCoord(g,h,m=>{c=c&&!this.tileUrlFunction(m,i,o)})}const p=new ks(s,c?G.EMPTY:G.IDLE,a,this.getSourceTiles.bind(this,i,o),this.removeSourceTiles.bind(this));return p.key=this.getKey(),p}getTileGridForProjection(e){const t=e.getCode();let n=this.tileGrids_[t];if(!n){const i=this.tileGrid,o=i.getResolutions().slice(),s=o.map(function(u,c){return i.getOrigin(c)}),a=o.map(function(u,c){return i.getTileSize(c)}),l=Lo+1;for(let u=o.length;u<l;++u)o.push(o[u-1]/2),s.push(s[u-1]),a.push(a[u-1]);n=new Fi({extent:i.getExtent(),origins:s,resolutions:o,tileSizes:a}),this.tileGrids_[t]=n}return n}getTilePixelRatio(e){return e}getTilePixelSize(e,t,n){const i=this.getTileGridForProjection(n),o=Ei(i.getTileSize(e),this.tmpSize);return[Math.round(o[0]*t),Math.round(o[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function Mi(r,e){r.setLoader(function(t,n,i){No(e,r.getFormat(),t,n,i,r.onLoad.bind(r),r.onError.bind(r))})}class Fs extends Oo{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:tt("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)zs(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let n;try{n=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(n)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=tt("EPSG:4326"),n=this.getProjection();let i;if(e.bounds!==void 0){const u=$o(t,n);i=qo(e.bounds,u)}const o=zi(n),s=e.minzoom||0,a=e.maxzoom||22,l=Kr({extent:o,maxZoom:a,minZoom:s,tileSize:this.tileSize_});if(this.tileGrid=l,this.tileUrlFunction=Go(e.tiles,l),e.attribution&&!this.getAttributions()){const u=i!==void 0?i:o;this.setAttributions(function(c){return Le(u,c.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}var Cs=8,Is={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Ps={"*":{type:"source"}},Ms=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Rs={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},_s={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},As={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},js={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Ds={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Ls={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Ns={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Os=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],$s={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},qs={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Gs={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Vs={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Us={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Bs={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Zs={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Hs={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Xs={type:"array",value:"*"},Ws={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},Js={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},Ks={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Ys={type:"array",value:"*",minimum:1},Qs={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},ea={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},ta={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},ra={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},na=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],ia={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},oa={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},sa={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},aa={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},la={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},ua={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ca={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},pa={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},fa={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},da={"*":{type:"string"}},ha={$version:Cs,$root:Is,sources:Ps,source:Ms,source_vector:Rs,source_raster:_s,source_raster_dem:As,source_geojson:js,source_video:Ds,source_image:Ls,layer:Ns,layout:Os,layout_background:$s,layout_fill:qs,layout_circle:Gs,layout_heatmap:Vs,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Us,layout_symbol:Bs,layout_raster:Zs,layout_hillshade:Hs,filter:Xs,filter_operator:Ws,geometry_type:Js,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:Ks,expression:Ys,light:Qs,sky:ea,terrain:ta,projection:ra,paint:na,paint_fill:ia,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:oa,paint_circle:sa,paint_heatmap:aa,paint_symbol:la,paint_raster:ua,paint_hillshade:ca,paint_background:pa,transition:fa,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:da};const ma=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ya(r,e){const t={};for(const n in r)n!=="ref"&&(t[n]=r[n]);return ma.forEach(n=>{n in e&&(t[n]=e[n])}),t}function ga(r){r=r.slice();const e=Object.create(null);for(let t=0;t<r.length;t++)e[r[t].id]=r[t];for(let t=0;t<r.length;t++)"ref"in r[t]&&(r[t]=ya(r[t],e[r[t].ref]));return r}class we extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class Qr{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[n,i]of t)this.bindings[n]=i}concat(e){return new Qr(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const Kt={kind:"null"},y={kind:"number"},_={kind:"string"},M={kind:"boolean"},Te={kind:"color"},Yt={kind:"projectionDefinition"},Ye={kind:"object"},R={kind:"value"},va={kind:"error"},Qt={kind:"collator"},er={kind:"formatted"},tr={kind:"padding"},kt={kind:"resolvedImage"},rr={kind:"variableAnchorOffsetCollection"};function ce(r,e){return{kind:"array",itemType:r,N:e}}function U(r){if(r.kind==="array"){const e=U(r.itemType);return typeof r.N=="number"?`array<${e}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${e}>`}else return r.kind}const xa=[Kt,y,_,M,Te,Yt,er,Ye,ce(R),tr,kt,rr];function vt(r,e){if(e.kind==="error")return null;if(r.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!vt(r.itemType,e.itemType))&&(typeof r.N!="number"||r.N===e.N))return null}else{if(r.kind===e.kind)return null;if(r.kind==="value"){for(const t of xa)if(!vt(t,e))return null}}return`Expected ${U(r)} but found ${U(e)} instead.`}function en(r,e){return e.some(t=>t.kind===r.kind)}function Oe(r,e){return e.some(t=>t==="null"?r===null:t==="array"?Array.isArray(r):t==="object"?r&&!Array.isArray(r)&&typeof r=="object":t===typeof r)}function Ze(r,e){return r.kind==="array"&&e.kind==="array"?r.itemType.kind===e.itemType.kind&&typeof r.N=="number":r.kind===e.kind}const Ri=.96422,_i=1,Ai=.82521,ji=4/29,Qe=6/29,Di=3*Qe*Qe,ba=Qe*Qe*Qe,wa=Math.PI/180,Ta=180/Math.PI;function Li(r){return r=r%360,r<0&&(r+=360),r}function Ni([r,e,t,n]){r=br(r),e=br(e),t=br(t);let i,o;const s=wr((.2225045*r+.7168786*e+.0606169*t)/_i);r===e&&e===t?i=o=s:(i=wr((.4360747*r+.3850649*e+.1430804*t)/Ri),o=wr((.0139322*r+.0971045*e+.7141733*t)/Ai));const a=116*s-16;return[a<0?0:a,500*(i-s),200*(s-o),n]}function br(r){return r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function wr(r){return r>ba?Math.pow(r,1/3):r/Di+ji}function Oi([r,e,t,n]){let i=(r+16)/116,o=isNaN(e)?i:i+e/500,s=isNaN(t)?i:i-t/200;return i=_i*kr(i),o=Ri*kr(o),s=Ai*kr(s),[Tr(3.1338561*o-1.6168667*i-.4906146*s),Tr(-.9787684*o+1.9161415*i+.033454*s),Tr(.0719453*o-.2289914*i+1.4052427*s),n]}function Tr(r){return r=r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055,r<0?0:r>1?1:r}function kr(r){return r>Qe?r*r*r:Di*(r-ji)}function ka(r){const[e,t,n,i]=Ni(r),o=Math.sqrt(t*t+n*n);return[Math.round(o*1e4)?Li(Math.atan2(n,t)*Ta):NaN,o,e,i]}function Sa([r,e,t,n]){return r=isNaN(r)?0:r*wa,Oi([t,Math.cos(r)*e,Math.sin(r)*e,n])}function Ea([r,e,t,n]){r=Li(r),e/=100,t/=100;function i(o){const s=(o+r/30)%12,a=e*Math.min(t,1-t);return t-a*Math.max(-1,Math.min(s-3,9-s,1))}return[i(0),i(8),i(4),n]}function za(r){if(r=r.toLowerCase().trim(),r==="transparent")return[0,0,0,0];const e=Fa[r];if(e){const[i,o,s]=e;return[i/255,o/255,s/255,1]}if(r.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(r)){const o=r.length<6?1:2;let s=1;return[Mt(r.slice(s,s+=o)),Mt(r.slice(s,s+=o)),Mt(r.slice(s,s+=o)),Mt(r.slice(s,s+o)||"ff")]}if(r.startsWith("rgb")){const i=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=r.match(i);if(o){const[s,a,l,u,c,p,f,d,h,g,m,P]=o,z=[u||" ",f||" ",g].join("");if(z==="  "||z==="  /"||z===",,"||z===",,,"){const F=[l,p,h].join(""),C=F==="%%%"?100:F===""?255:0;if(C){const S=[We(+a/C,0,1),We(+c/C,0,1),We(+d/C,0,1),m?qn(+m,P):1];if(Gn(S))return S}}return}}const t=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,n=r.match(t);if(n){const[i,o,s,a,l,u,c,p,f]=n,d=[s||" ",l||" ",c].join("");if(d==="  "||d==="  /"||d===",,"||d===",,,"){const h=[+o,We(+a,0,100),We(+u,0,100),p?qn(+p,f):1];if(Gn(h))return Ea(h)}}}function Mt(r){return parseInt(r.padEnd(2,r),16)/255}function qn(r,e){return We(e?r/100:r,0,1)}function We(r,e,t){return Math.min(Math.max(e,r),t)}function Gn(r){return!r.some(Number.isNaN)}const Fa={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function $e(r,e,t){return r+t*(e-r)}function Gt(r,e,t){return r.map((n,i)=>$e(n,e[i],t))}class ${constructor(e,t,n,i=1,o=!0){this.r=e,this.g=t,this.b=n,this.a=i,o||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,t,n,i]))}static parse(e){if(e instanceof $)return e;if(typeof e!="string")return;const t=za(e);if(t)return new $(...t,!1)}get rgb(){const{r:e,g:t,b:n,a:i}=this,o=i||1/0;return this.overwriteGetter("rgb",[e/o,t/o,n/o,i])}get hcl(){return this.overwriteGetter("hcl",ka(this.rgb))}get lab(){return this.overwriteGetter("lab",Ni(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,n,i]=this.rgb;return`rgba(${[e,t,n].map(o=>Math.round(o*255)).join(",")},${i})`}static interpolate(e,t,n,i="rgb"){switch(i){case"rgb":{const[o,s,a,l]=Gt(e.rgb,t.rgb,n);return new $(o,s,a,l,!1)}case"hcl":{const[o,s,a,l]=e.hcl,[u,c,p,f]=t.hcl;let d,h;if(!isNaN(o)&&!isNaN(u)){let F=u-o;u>o&&F>180?F-=360:u<o&&o-u>180&&(F+=360),d=o+n*F}else isNaN(o)?isNaN(u)?d=NaN:(d=u,(a===1||a===0)&&(h=c)):(d=o,(p===1||p===0)&&(h=s));const[g,m,P,z]=Sa([d,h??$e(s,c,n),$e(a,p,n),$e(l,f,n)]);return new $(g,m,P,z,!1)}case"lab":{const[o,s,a,l]=Oi(Gt(e.lab,t.lab,n));return new $(o,s,a,l,!1)}}}}$.black=new $(0,0,0,1);$.white=new $(1,1,1,1);$.transparent=new $(0,0,0,0);$.red=new $(1,0,0,1);class tn{constructor(e,t,n){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Ca=["bottom","center","top"];class Nr{constructor(e,t,n,i,o,s){this.text=e,this.image=t,this.scale=n,this.fontStack=i,this.textColor=o,this.verticalAlign=s}}class Ce{constructor(e){this.sections=e}static fromString(e){return new Ce([new Nr(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Ce?e:Ce.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class ge{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof ge)return e;if(typeof e=="number")return new ge([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if(typeof t!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new ge(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,n){return new ge(Gt(e.values,t.values,n))}}class K{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const Ia=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ke{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof ke)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let t=0;t<e.length;t+=2){const n=e[t],i=e[t+1];if(typeof n!="string"||!Ia.has(n)||!Array.isArray(i)||i.length!==2||typeof i[0]!="number"||typeof i[1]!="number")return}return new ke(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,t,n){const i=e.values,o=t.values;if(i.length!==o.length)throw new K(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const s=[];for(let a=0;a<i.length;a+=2){if(i[a]!==o[a])throw new K(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${i[a]}, to[${a}]: ${o[a]}`);s.push(i[a]);const[l,u]=i[a+1],[c,p]=o[a+1];s.push([$e(l,c,n),$e(u,p,n)])}return new ke(s)}}class Ae{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Ae({name:e,available:!1}):null}}class me{constructor(e,t,n){this.from=e,this.to=t,this.transition=n}static interpolate(e,t,n){return new me(e,t,n)}static parse(e){if(e instanceof me)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new me(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new me(e.from,e.to,e.transition);if(typeof e=="string")return new me(e,e,1)}}function $i(r,e,t,n){return typeof r=="number"&&r>=0&&r<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof n>"u"||typeof n=="number"&&n>=0&&n<=1?null:`Invalid rgba value [${[r,e,t,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof n=="number"?[r,e,t,n]:[r,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function xt(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof me||r instanceof $||r instanceof tn||r instanceof Ce||r instanceof ge||r instanceof ke||r instanceof Ae)return!0;if(Array.isArray(r)){for(const e of r)if(!xt(e))return!1;return!0}else if(typeof r=="object"){for(const e in r)if(!xt(r[e]))return!1;return!0}else return!1}function te(r){if(r===null)return Kt;if(typeof r=="string")return _;if(typeof r=="boolean")return M;if(typeof r=="number")return y;if(r instanceof $)return Te;if(r instanceof me)return Yt;if(r instanceof tn)return Qt;if(r instanceof Ce)return er;if(r instanceof ge)return tr;if(r instanceof ke)return rr;if(r instanceof Ae)return kt;if(Array.isArray(r)){const e=r.length;let t;for(const n of r){const i=te(n);if(!t)t=i;else{if(t===i)continue;t=R;break}}return ce(t||R,e)}else return Ye}function gt(r){const e=typeof r;return r===null?"":e==="string"||e==="number"||e==="boolean"?String(r):r instanceof $||r instanceof me||r instanceof Ce||r instanceof ge||r instanceof ke||r instanceof Ae?r.toString():JSON.stringify(r)}class rt{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!xt(e[1]))return t.error("invalid value");const n=e[1];let i=te(n);const o=t.expectedType;return i.kind==="array"&&i.N===0&&o&&o.kind==="array"&&(typeof o.N!="number"||o.N===0)&&(i=o),new rt(i,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Rt={string:_,number:y,boolean:M,object:Ye};class ye{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n=1,i;const o=e[0];if(o==="array"){let a;if(e.length>2){const u=e[1];if(typeof u!="string"||!(u in Rt)||u==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=Rt[u],n++}else a=R;let l;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);l=e[2],n++}i=ce(a,l)}else{if(!Rt[o])throw new Error(`Types doesn't contain name = ${o}`);i=Rt[o]}const s=[];for(;n<e.length;n++){const a=t.parse(e[n],n,R);if(!a)return null;s.push(a)}return new ye(i,s)}evaluate(e){for(let t=0;t<this.args.length;t++){const n=this.args[t].evaluate(e);if(vt(this.type,te(n))){if(t===this.args.length-1)throw new K(`Expected value to be of type ${U(this.type)}, but found ${U(te(n))} instead.`)}else return n}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Vn={"to-boolean":M,"to-color":Te,"to-number":y,"to-string":_};class _e{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[0];if(!Vn[n])throw new Error(`Can't parse ${n} as it is not part of the known types`);if((n==="to-boolean"||n==="to-string")&&e.length!==2)return t.error("Expected one argument.");const i=Vn[n],o=[];for(let s=1;s<e.length;s++){const a=t.parse(e[s],s,R);if(!a)return null;o.push(a)}return new _e(i,o)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let t,n;for(const i of this.args){if(t=i.evaluate(e),n=null,t instanceof $)return t;if(typeof t=="string"){const o=e.parseColor(t);if(o)return o}else if(Array.isArray(t)&&(t.length<3||t.length>4?n=`Invalid rgba value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:n=$i(t[0],t[1],t[2],t[3]),!n))return new $(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new K(n||`Could not parse color from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const n of this.args){t=n.evaluate(e);const i=ge.parse(t);if(i)return i}throw new K(`Could not parse padding from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const n of this.args){t=n.evaluate(e);const i=ke.parse(t);if(i)return i}throw new K(`Could not parse variableAnchorOffsetCollection from value '${typeof t=="string"?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const n of this.args){if(t=n.evaluate(e),t===null)return 0;const i=Number(t);if(!isNaN(i))return i}throw new K(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return Ce.fromString(gt(this.args[0].evaluate(e)));case"resolvedImage":return Ae.fromString(gt(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return gt(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Pa=["Unknown","Point","LineString","Polygon"];class qi{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Pa[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=$.parse(e)),t}}class nr{constructor(e,t,n=[],i,o=new Qr,s=[]){this.registry=e,this.path=n,this.key=n.map(a=>`[${a}]`).join(""),this.scope=o,this.errors=s,this.expectedType=i,this._isConstant=t}parse(e,t,n,i,o={}){return t?this.concat(t,n,i)._parse(e,o):this._parse(e,o)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function n(i,o,s){return s==="assert"?new ye(o,[i]):s==="coerce"?new _e(o,[i]):i}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if(typeof i!="string")return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const o=this.registry[i];if(o){let s=o.parse(e,this);if(!s)return null;if(this.expectedType){const a=this.expectedType,l=s.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&l.kind==="value")s=n(s,a,t.typeAnnotation||"assert");else if(a.kind==="projectionDefinition"&&(l.kind==="string"||l.kind==="array"))s=n(s,a,t.typeAnnotation||"coerce");else if((a.kind==="color"||a.kind==="formatted"||a.kind==="resolvedImage")&&(l.kind==="value"||l.kind==="string"))s=n(s,a,t.typeAnnotation||"coerce");else if(a.kind==="padding"&&(l.kind==="value"||l.kind==="number"||l.kind==="array"))s=n(s,a,t.typeAnnotation||"coerce");else if(a.kind==="variableAnchorOffsetCollection"&&(l.kind==="value"||l.kind==="array"))s=n(s,a,t.typeAnnotation||"coerce");else if(this.checkSubtype(a,l))return null}if(!(s instanceof rt)&&s.type.kind!=="resolvedImage"&&this._isConstant(s)){const a=new qi;try{s=new rt(s.type,s.evaluate(a))}catch(l){return this.error(l.message),null}}return s}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,n){const i=typeof e=="number"?this.path.concat(e):this.path,o=n?this.scope.concat(n):this.scope;return new nr(this.registry,this._isConstant,i,t||null,o,this.errors)}error(e,...t){const n=`${this.key}${t.map(i=>`[${i}]`).join("")}`;this.errors.push(new we(n,e))}checkSubtype(e,t){const n=vt(e,t);return n&&this.error(n),n}}class ir{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const n=[];for(let o=1;o<e.length-1;o+=2){const s=e[o];if(typeof s!="string")return t.error(`Expected string, but found ${typeof s} instead.`,o);if(/[^a-zA-Z0-9_]/.test(s))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const a=t.parse(e[o+1],o+1);if(!a)return null;n.push([s,a])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return i?new ir(n,i):null}outputDefined(){return this.result.outputDefined()}}class or{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const n=e[1];return t.scope.has(n)?new or(n,t.scope.get(n)):t.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class rn{constructor(e,t,n){this.type=e,this.index=t,this.input=n}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,y),i=t.parse(e[2],2,ce(t.expectedType||R));if(!n||!i)return null;const o=i.type;return new rn(o.itemType,n,i)}evaluate(e){const t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new K(`Array index out of bounds: ${t} < 0.`);if(t>=n.length)throw new K(`Array index out of bounds: ${t} > ${n.length-1}.`);if(t!==Math.floor(t))throw new K(`Array index must be an integer, but found ${t} instead.`);return n[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class nn{constructor(e,t){this.type=M,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,R),i=t.parse(e[2],2,R);return!n||!i?null:en(n.type,[M,_,y,Kt,R])?new nn(n,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${U(n.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!Oe(t,["boolean","string","number","null"]))throw new K(`Expected first argument to be of type boolean, string, number or null, but found ${U(te(t))} instead.`);if(!Oe(n,["string","array"]))throw new K(`Expected second argument to be of type array or string, but found ${U(te(n))} instead.`);return n.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class Vt{constructor(e,t,n){this.type=y,this.needle=e,this.haystack=t,this.fromIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,R),i=t.parse(e[2],2,R);if(!n||!i)return null;if(!en(n.type,[M,_,y,Kt,R]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${U(n.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,y);return o?new Vt(n,i,o):null}else return new Vt(n,i)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Oe(t,["boolean","string","number","null"]))throw new K(`Expected first argument to be of type boolean, string, number or null, but found ${U(te(t))} instead.`);let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(e)),Oe(n,["string"])){const o=n.indexOf(t,i);return o===-1?-1:[...n.slice(0,o)].length}else{if(Oe(n,["array"]))return n.indexOf(t,i);throw new K(`Expected second argument to be of type array or string, but found ${U(te(n))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class on{constructor(e,t,n,i,o,s){this.inputType=e,this.type=t,this.input=n,this.cases=i,this.outputs=o,this.otherwise=s}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let n,i;t.expectedType&&t.expectedType.kind!=="value"&&(i=t.expectedType);const o={},s=[];for(let u=2;u<e.length-1;u+=2){let c=e[u];const p=e[u+1];Array.isArray(c)||(c=[c]);const f=t.concat(u);if(c.length===0)return f.error("Expected at least one branch label.");for(const h of c){if(typeof h!="number"&&typeof h!="string")return f.error("Branch labels must be numbers or strings.");if(typeof h=="number"&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return f.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof h=="number"&&Math.floor(h)!==h)return f.error("Numeric branch labels must be integer values.");if(!n)n=te(h);else if(f.checkSubtype(n,te(h)))return null;if(typeof o[String(h)]<"u")return f.error("Branch labels must be unique.");o[String(h)]=s.length}const d=t.parse(p,u,i);if(!d)return null;i=i||d.type,s.push(d)}const a=t.parse(e[1],1,R);if(!a)return null;const l=t.parse(e[e.length-1],e.length-1,i);return!l||a.type.kind!=="value"&&t.concat(1).checkSubtype(n,a.type)?null:new on(n,i,a,o,s,l)}evaluate(e){const t=this.input.evaluate(e);return(te(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class sn{constructor(e,t,n){this.type=e,this.branches=t,this.otherwise=n}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let n;t.expectedType&&t.expectedType.kind!=="value"&&(n=t.expectedType);const i=[];for(let s=1;s<e.length-1;s+=2){const a=t.parse(e[s],s,M);if(!a)return null;const l=t.parse(e[s+1],s+1,n);if(!l)return null;i.push([a,l]),n=n||l.type}const o=t.parse(e[e.length-1],e.length-1,n);if(!o)return null;if(!n)throw new Error("Can't infer output type");return new sn(n,i,o)}evaluate(e){for(const[t,n]of this.branches)if(t.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,n]of this.branches)e(t),e(n);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}}class Ut{constructor(e,t,n,i){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,R),i=t.parse(e[2],2,y);if(!n||!i)return null;if(!en(n.type,[ce(R),_,R]))return t.error(`Expected first argument to be of type array or string, but found ${U(n.type)} instead`);if(e.length===4){const o=t.parse(e[3],3,y);return o?new Ut(n.type,n,i,o):null}else return new Ut(n.type,n,i)}evaluate(e){const t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);let i;if(this.endIndex&&(i=this.endIndex.evaluate(e)),Oe(t,["string"]))return[...t].slice(n,i).join("");if(Oe(t,["array"]))return t.slice(n,i);throw new K(`Expected first argument to be of type array or string, but found ${U(te(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function Gi(r,e){const t=r.length-1;let n=0,i=t,o=0,s,a;for(;n<=i;)if(o=Math.floor((n+i)/2),s=r[o],a=r[o+1],s<=e){if(o===t||e<a)return o;n=o+1}else if(s>e)i=o-1;else throw new K("Input is not a number.");return 0}class sr{constructor(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,o]of n)this.labels.push(i),this.outputs.push(o)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const n=t.parse(e[1],1,y);if(!n)return null;const i=[];let o=null;t.expectedType&&t.expectedType.kind!=="value"&&(o=t.expectedType);for(let s=1;s<e.length;s+=2){const a=s===1?-1/0:e[s],l=e[s+1],u=s,c=s+1;if(typeof a!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(i.length&&i[i.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);const p=t.parse(l,c,o);if(!p)return null;o=o||p.type,i.push([a,p])}return new sr(o,n,i)}evaluate(e){const t=this.labels,n=this.outputs;if(t.length===1)return n[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return n[0].evaluate(e);const o=t.length;if(i>=t[o-1])return n[o-1].evaluate(e);const s=Gi(t,i);return n[s].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function Ma(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Sr,Un;function Ra(){if(Un)return Sr;Un=1,Sr=r;function r(e,t,n,i){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=i}return r.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,i=0;i<8;i++){var o=this.sampleCurveX(n)-e;if(Math.abs(o)<t)return n;var s=this.sampleCurveDerivativeX(n);if(Math.abs(s)<1e-6)break;n=n-o/s}var a=0,l=1;for(n=e,i=0;i<20&&(o=this.sampleCurveX(n),!(Math.abs(o-e)<t));i++)e>o?a=n:l=n,n=(l-a)*.5+a;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},Sr}var _a=Ra(),Aa=Ma(_a);class Se{constructor(e,t,n,i,o){this.type=e,this.operator=t,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(const[s,a]of o)this.labels.push(s),this.outputs.push(a)}static interpolationFactor(e,t,n,i){let o=0;if(e.name==="exponential")o=Er(t,e.base,n,i);else if(e.name==="linear")o=Er(t,1,n,i);else if(e.name==="cubic-bezier"){const s=e.controlPoints;o=new Aa(s[0],s[1],s[2],s[3]).solve(Er(t,1,n,i))}return o}static parse(e,t){let[n,i,o,...s]=e;if(!Array.isArray(i)||i.length===0)return t.error("Expected an interpolation type expression.",1);if(i[0]==="linear")i={name:"linear"};else if(i[0]==="exponential"){const u=i[1];if(typeof u!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:u}}else if(i[0]==="cubic-bezier"){const u=i.slice(1);if(u.length!==4||u.some(c=>typeof c!="number"||c<0||c>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:u}}else return t.error(`Unknown interpolation type ${String(i[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(o=t.parse(o,2,y),!o)return null;const a=[];let l=null;n==="interpolate-hcl"||n==="interpolate-lab"?l=Te:t.expectedType&&t.expectedType.kind!=="value"&&(l=t.expectedType);for(let u=0;u<s.length;u+=2){const c=s[u],p=s[u+1],f=u+3,d=u+4;if(typeof c!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(a.length&&a[a.length-1][0]>=c)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);const h=t.parse(p,d,l);if(!h)return null;l=l||h.type,a.push([c,h])}return!Ze(l,y)&&!Ze(l,Yt)&&!Ze(l,Te)&&!Ze(l,tr)&&!Ze(l,rr)&&!Ze(l,ce(y))?t.error(`Type ${U(l)} is not interpolatable.`):new Se(l,n,i,o,a)}evaluate(e){const t=this.labels,n=this.outputs;if(t.length===1)return n[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return n[0].evaluate(e);const o=t.length;if(i>=t[o-1])return n[o-1].evaluate(e);const s=Gi(t,i),a=t[s],l=t[s+1],u=Se.interpolationFactor(this.interpolation,i,a,l),c=n[s].evaluate(e),p=n[s+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return $e(c,p,u);case"color":return $.interpolate(c,p,u);case"padding":return ge.interpolate(c,p,u);case"variableAnchorOffsetCollection":return ke.interpolate(c,p,u);case"array":return Gt(c,p,u);case"projectionDefinition":return me.interpolate(c,p,u)}case"interpolate-hcl":return $.interpolate(c,p,u,"hcl");case"interpolate-lab":return $.interpolate(c,p,u,"lab")}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function Er(r,e,t,n){const i=n-t,o=r-t;return i===0?0:e===1?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}class bt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n=null;const i=t.expectedType;i&&i.kind!=="value"&&(n=i);const o=[];for(const a of e.slice(1)){const l=t.parse(a,1+o.length,n,void 0,{typeAnnotation:"omit"});if(!l)return null;n=n||l.type,o.push(l)}if(!n)throw new Error("No output type");return i&&o.some(a=>vt(i,a.type))?new bt(R,o):new bt(n,o)}evaluate(e){let t=null,n=0,i;for(const o of this.args)if(n++,t=o.evaluate(e),t&&t instanceof Ae&&!t.available&&(i||(i=t.name),t=null,n===this.args.length&&(t=i)),t!==null)break;return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function Bn(r,e){return r==="=="||r==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function ja(r,e,t){return e===t}function Da(r,e,t){return e!==t}function La(r,e,t){return e<t}function Na(r,e,t){return e>t}function Oa(r,e,t){return e<=t}function $a(r,e,t){return e>=t}function Vi(r,e,t,n){return n.compare(e,t)===0}function qa(r,e,t,n){return!Vi(r,e,t,n)}function Ga(r,e,t,n){return n.compare(e,t)<0}function Va(r,e,t,n){return n.compare(e,t)>0}function Ua(r,e,t,n){return n.compare(e,t)<=0}function Ba(r,e,t,n){return n.compare(e,t)>=0}function it(r,e,t){const n=r!=="=="&&r!=="!=";return class Ui{constructor(o,s,a){this.type=M,this.lhs=o,this.rhs=s,this.collator=a,this.hasUntypedArgument=o.type.kind==="value"||s.type.kind==="value"}static parse(o,s){if(o.length!==3&&o.length!==4)return s.error("Expected two or three arguments.");const a=o[0];let l=s.parse(o[1],1,R);if(!l)return null;if(!Bn(a,l.type))return s.concat(1).error(`"${a}" comparisons are not supported for type '${U(l.type)}'.`);let u=s.parse(o[2],2,R);if(!u)return null;if(!Bn(a,u.type))return s.concat(2).error(`"${a}" comparisons are not supported for type '${U(u.type)}'.`);if(l.type.kind!==u.type.kind&&l.type.kind!=="value"&&u.type.kind!=="value")return s.error(`Cannot compare types '${U(l.type)}' and '${U(u.type)}'.`);n&&(l.type.kind==="value"&&u.type.kind!=="value"?l=new ye(u.type,[l]):l.type.kind!=="value"&&u.type.kind==="value"&&(u=new ye(l.type,[u])));let c=null;if(o.length===4){if(l.type.kind!=="string"&&u.type.kind!=="string"&&l.type.kind!=="value"&&u.type.kind!=="value")return s.error("Cannot use collator to compare non-string types.");if(c=s.parse(o[3],3,Qt),!c)return null}return new Ui(l,u,c)}evaluate(o){const s=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(n&&this.hasUntypedArgument){const l=te(s),u=te(a);if(l.kind!==u.kind||!(l.kind==="string"||l.kind==="number"))throw new K(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${l.kind}, ${u.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const l=te(s),u=te(a);if(l.kind!=="string"||u.kind!=="string")return e(o,s,a)}return this.collator?t(o,s,a,this.collator.evaluate(o)):e(o,s,a)}eachChild(o){o(this.lhs),o(this.rhs),this.collator&&o(this.collator)}outputDefined(){return!0}}}const Za=it("==",ja,Vi),Ha=it("!=",Da,qa),Xa=it("<",La,Ga),Wa=it(">",Na,Va),Ja=it("<=",Oa,Ua),Ka=it(">=",$a,Ba);class ar{constructor(e,t,n){this.type=Qt,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const n=e[1];if(typeof n!="object"||Array.isArray(n))return t.error("Collator options argument must be an object.");const i=t.parse(n["case-sensitive"]===void 0?!1:n["case-sensitive"],1,M);if(!i)return null;const o=t.parse(n["diacritic-sensitive"]===void 0?!1:n["diacritic-sensitive"],1,M);if(!o)return null;let s=null;return n.locale&&(s=t.parse(n.locale,1,_),!s)?null:new ar(i,o,s)}evaluate(e){return new tn(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class an{constructor(e,t,n,i,o){this.type=_,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=i,this.maxFractionDigits=o}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const n=t.parse(e[1],1,y);if(!n)return null;const i=e[2];if(typeof i!="object"||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let o=null;if(i.locale&&(o=t.parse(i.locale,1,_),!o))return null;let s=null;if(i.currency&&(s=t.parse(i.currency,1,_),!s))return null;let a=null;if(i["min-fraction-digits"]&&(a=t.parse(i["min-fraction-digits"],1,y),!a))return null;let l=null;return i["max-fraction-digits"]&&(l=t.parse(i["max-fraction-digits"],1,y),!l)?null:new an(n,o,s,a,l)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class ln{constructor(e){this.type=er,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&typeof n=="object")return t.error("First argument must be an image or text section.");const i=[];let o=!1;for(let s=1;s<=e.length-1;++s){const a=e[s];if(o&&typeof a=="object"&&!Array.isArray(a)){o=!1;let l=null;if(a["font-scale"]&&(l=t.parse(a["font-scale"],1,y),!l))return null;let u=null;if(a["text-font"]&&(u=t.parse(a["text-font"],1,ce(_)),!u))return null;let c=null;if(a["text-color"]&&(c=t.parse(a["text-color"],1,Te),!c))return null;let p=null;if(a["vertical-align"]){if(typeof a["vertical-align"]=="string"&&!Ca.includes(a["vertical-align"]))return t.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${a["vertical-align"]}' instead.`);if(p=t.parse(a["vertical-align"],1,_),!p)return null}const f=i[i.length-1];f.scale=l,f.font=u,f.textColor=c,f.verticalAlign=p}else{const l=t.parse(e[s],1,R);if(!l)return null;const u=l.type.kind;if(u!=="string"&&u!=="value"&&u!=="null"&&u!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,i.push({content:l,scale:null,font:null,textColor:null,verticalAlign:null})}}return new ln(i)}evaluate(e){const t=n=>{const i=n.content.evaluate(e);return te(i)===kt?new Nr("",i,null,null,null,n.verticalAlign?n.verticalAlign.evaluate(e):null):new Nr(gt(i),null,n.scale?n.scale.evaluate(e):null,n.font?n.font.evaluate(e).join(","):null,n.textColor?n.textColor.evaluate(e):null,n.verticalAlign?n.verticalAlign.evaluate(e):null)};return new Ce(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor),t.verticalAlign&&e(t.verticalAlign)}outputDefined(){return!1}}class un{constructor(e){this.type=kt,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const n=t.parse(e[1],1,_);return n?new un(n):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),n=Ae.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}}class cn{constructor(e){this.type=y,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=t.parse(e[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${U(n.type)} instead.`):new cn(n):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return[...t].length;if(Array.isArray(t))return t.length;throw new K(`Expected value to be of type string or array, but found ${U(te(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Ee=8192;function Ya(r,e){const t=Qa(r[0]),n=tl(r[1]),i=Math.pow(2,e.z);return[Math.round(t*i*Ee),Math.round(n*i*Ee)]}function pn(r,e){const t=Math.pow(2,e.z),n=(r[0]/Ee+e.x)/t,i=(r[1]/Ee+e.y)/t;return[el(n),rl(i)]}function Qa(r){return(180+r)/360}function el(r){return r*360-180}function tl(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function rl(r){return 360/Math.PI*Math.atan(Math.exp((180-r*360)*Math.PI/180))-90}function St(r,e){r[0]=Math.min(r[0],e[0]),r[1]=Math.min(r[1],e[1]),r[2]=Math.max(r[2],e[0]),r[3]=Math.max(r[3],e[1])}function wt(r,e){return!(r[0]<=e[0]||r[2]>=e[2]||r[1]<=e[1]||r[3]>=e[3])}function nl(r,e,t){return e[1]>r[1]!=t[1]>r[1]&&r[0]<(t[0]-e[0])*(r[1]-e[1])/(t[1]-e[1])+e[0]}function il(r,e,t){const n=r[0]-e[0],i=r[1]-e[1],o=r[0]-t[0],s=r[1]-t[1];return n*s-o*i===0&&n*o<=0&&i*s<=0}function lr(r,e,t,n){const i=[e[0]-r[0],e[1]-r[1]],o=[n[0]-t[0],n[1]-t[1]];return ll(o,i)===0?!1:!!(Zn(r,e,t,n)&&Zn(t,n,r,e))}function ol(r,e,t){for(const n of t)for(let i=0;i<n.length-1;++i)if(lr(r,e,n[i],n[i+1]))return!0;return!1}function ot(r,e,t=!1){let n=!1;for(const i of e)for(let o=0;o<i.length-1;o++){if(il(r,i[o],i[o+1]))return t;nl(r,i[o],i[o+1])&&(n=!n)}return n}function sl(r,e){for(const t of e)if(ot(r,t))return!0;return!1}function Bi(r,e){for(const t of r)if(!ot(t,e))return!1;for(let t=0;t<r.length-1;++t)if(ol(r[t],r[t+1],e))return!1;return!0}function al(r,e){for(const t of e)if(Bi(r,t))return!0;return!1}function ll(r,e){return r[0]*e[1]-r[1]*e[0]}function Zn(r,e,t,n){const i=r[0]-t[0],o=r[1]-t[1],s=e[0]-t[0],a=e[1]-t[1],l=n[0]-t[0],u=n[1]-t[1],c=i*u-l*o,p=s*u-l*a;return c>0&&p<0||c<0&&p>0}function fn(r,e,t){const n=[];for(let i=0;i<r.length;i++){const o=[];for(let s=0;s<r[i].length;s++){const a=Ya(r[i][s],t);St(e,a),o.push(a)}n.push(o)}return n}function Zi(r,e,t){const n=[];for(let i=0;i<r.length;i++){const o=fn(r[i],e,t);n.push(o)}return n}function Hi(r,e,t,n){if(r[0]<t[0]||r[0]>t[2]){const i=n*.5;let o=r[0]-t[0]>i?-n:t[0]-r[0]>i?n:0;o===0&&(o=r[0]-t[2]>i?-n:t[2]-r[0]>i?n:0),r[0]+=o}St(e,r)}function ul(r){r[0]=r[1]=1/0,r[2]=r[3]=-1/0}function Hn(r,e,t,n){const i=Math.pow(2,n.z)*Ee,o=[n.x*Ee,n.y*Ee],s=[];for(const a of r)for(const l of a){const u=[l.x+o[0],l.y+o[1]];Hi(u,e,t,i),s.push(u)}return s}function Xn(r,e,t,n){const i=Math.pow(2,n.z)*Ee,o=[n.x*Ee,n.y*Ee],s=[];for(const a of r){const l=[];for(const u of a){const c=[u.x+o[0],u.y+o[1]];St(e,c),l.push(c)}s.push(l)}if(e[2]-e[0]<=i/2){ul(e);for(const a of s)for(const l of a)Hi(l,e,t,i)}return s}function cl(r,e){const t=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=r.canonicalID();if(e.type==="Polygon"){const o=fn(e.coordinates,n,i),s=Hn(r.geometry(),t,n,i);if(!wt(t,n))return!1;for(const a of s)if(!ot(a,o))return!1}if(e.type==="MultiPolygon"){const o=Zi(e.coordinates,n,i),s=Hn(r.geometry(),t,n,i);if(!wt(t,n))return!1;for(const a of s)if(!sl(a,o))return!1}return!0}function pl(r,e){const t=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=r.canonicalID();if(e.type==="Polygon"){const o=fn(e.coordinates,n,i),s=Xn(r.geometry(),t,n,i);if(!wt(t,n))return!1;for(const a of s)if(!Bi(a,o))return!1}if(e.type==="MultiPolygon"){const o=Zi(e.coordinates,n,i),s=Xn(r.geometry(),t,n,i);if(!wt(t,n))return!1;for(const a of s)if(!al(a,o))return!1}return!0}class qe{constructor(e,t){this.type=M,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(xt(e[1])){const n=e[1];if(n.type==="FeatureCollection"){const i=[];for(const o of n.features){const{type:s,coordinates:a}=o.geometry;s==="Polygon"&&i.push(a),s==="MultiPolygon"&&i.push(...a)}if(i.length){const o={type:"MultiPolygon",coordinates:i};return new qe(n,o)}}else if(n.type==="Feature"){const i=n.geometry.type;if(i==="Polygon"||i==="MultiPolygon")return new qe(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new qe(n,n)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return cl(e,this.geometries);if(e.geometryType()==="LineString")return pl(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Xi{constructor(e=[],t=(n,i)=>n<i?-1:n>i?1:0){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,i=t[e];for(;e>0;){const o=e-1>>1,s=t[o];if(n(i,s)>=0)break;t[e]=s,e=o}t[e]=i}_down(e){const{data:t,compare:n}=this,i=this.length>>1,o=t[e];for(;e<i;){let s=(e<<1)+1;const a=s+1;if(a<this.length&&n(t[a],t[s])<0&&(s=a),n(t[s],o)>=0)break;t[e]=t[s],e=s}t[e]=o}}function fl(r,e){if(r.length<=1)return[r];const n=[];let i,o;for(const s of r){const a=dl(s);a!==0&&(s.area=Math.abs(a),o===void 0&&(o=a<0),o===a<0?(i&&n.push(i),i=[s]):i.push(s))}return i&&n.push(i),n}function dl(r){let e=0;for(let t=0,n=r.length,i=n-1,o,s;t<n;i=t++)o=r[t],s=r[i],e+=(s.x-o.x)*(o.y+s.y);return e}const hl=6378.137,Wn=1/298.257223563,Jn=Wn*(2-Wn),Kn=Math.PI/180;class dn{constructor(e){const t=Kn*hl*1e3,n=Math.cos(e*Kn),i=1/(1-Jn*(1-n*n)),o=Math.sqrt(i);this.kx=t*o*n,this.ky=t*o*i*(1-Jn)}distance(e,t){const n=this.wrap(e[0]-t[0])*this.kx,i=(e[1]-t[1])*this.ky;return Math.sqrt(n*n+i*i)}pointOnLine(e,t){let n=1/0,i,o,s,a;for(let l=0;l<e.length-1;l++){let u=e[l][0],c=e[l][1],p=this.wrap(e[l+1][0]-u)*this.kx,f=(e[l+1][1]-c)*this.ky,d=0;(p!==0||f!==0)&&(d=(this.wrap(t[0]-u)*this.kx*p+(t[1]-c)*this.ky*f)/(p*p+f*f),d>1?(u=e[l+1][0],c=e[l+1][1]):d>0&&(u+=p/this.kx*d,c+=f/this.ky*d)),p=this.wrap(t[0]-u)*this.kx,f=(t[1]-c)*this.ky;const h=p*p+f*f;h<n&&(n=h,i=u,o=c,s=l,a=d)}return{point:[i,o],index:s,t:Math.max(0,Math.min(1,a))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const Or=100,$r=50;function Wi(r,e){return e[0]-r[0]}function Bt(r){return r[1]-r[0]+1}function Ie(r,e){return r[1]>=r[0]&&r[1]<e}function qr(r,e){if(r[0]>r[1])return[null,null];const t=Bt(r);if(e){if(t===2)return[r,null];const i=Math.floor(t/2);return[[r[0],r[0]+i],[r[0]+i,r[1]]]}if(t===1)return[r,null];const n=Math.floor(t/2)-1;return[[r[0],r[0]+n],[r[0]+n+1,r[1]]]}function Gr(r,e){if(!Ie(e,r.length))return[1/0,1/0,-1/0,-1/0];const t=[1/0,1/0,-1/0,-1/0];for(let n=e[0];n<=e[1];++n)St(t,r[n]);return t}function Vr(r){const e=[1/0,1/0,-1/0,-1/0];for(const t of r)for(const n of t)St(e,n);return e}function Yn(r){return r[0]!==-1/0&&r[1]!==-1/0&&r[2]!==1/0&&r[3]!==1/0}function hn(r,e,t){if(!Yn(r)||!Yn(e))return NaN;let n=0,i=0;return r[2]<e[0]&&(n=e[0]-r[2]),r[0]>e[2]&&(n=r[0]-e[2]),r[1]>e[3]&&(i=r[1]-e[3]),r[3]<e[1]&&(i=e[1]-r[3]),t.distance([0,0],[n,i])}function Ne(r,e,t){const n=t.pointOnLine(e,r);return t.distance(r,n.point)}function mn(r,e,t,n,i){const o=Math.min(Ne(r,[t,n],i),Ne(e,[t,n],i)),s=Math.min(Ne(t,[r,e],i),Ne(n,[r,e],i));return Math.min(o,s)}function ml(r,e,t,n,i){if(!(Ie(e,r.length)&&Ie(n,t.length)))return 1/0;let s=1/0;for(let a=e[0];a<e[1];++a){const l=r[a],u=r[a+1];for(let c=n[0];c<n[1];++c){const p=t[c],f=t[c+1];if(lr(l,u,p,f))return 0;s=Math.min(s,mn(l,u,p,f,i))}}return s}function yl(r,e,t,n,i){if(!(Ie(e,r.length)&&Ie(n,t.length)))return NaN;let s=1/0;for(let a=e[0];a<=e[1];++a)for(let l=n[0];l<=n[1];++l)if(s=Math.min(s,i.distance(r[a],t[l])),s===0)return s;return s}function gl(r,e,t){if(ot(r,e,!0))return 0;let n=1/0;for(const i of e){const o=i[0],s=i[i.length-1];if(o!==s&&(n=Math.min(n,Ne(r,[s,o],t)),n===0))return n;const a=t.pointOnLine(i,r);if(n=Math.min(n,t.distance(r,a.point)),n===0)return n}return n}function vl(r,e,t,n){if(!Ie(e,r.length))return NaN;for(let o=e[0];o<=e[1];++o)if(ot(r[o],t,!0))return 0;let i=1/0;for(let o=e[0];o<e[1];++o){const s=r[o],a=r[o+1];for(const l of t)for(let u=0,c=l.length,p=c-1;u<c;p=u++){const f=l[p],d=l[u];if(lr(s,a,f,d))return 0;i=Math.min(i,mn(s,a,f,d,n))}}return i}function Qn(r,e){for(const t of r)for(const n of t)if(ot(n,e,!0))return!0;return!1}function xl(r,e,t,n=1/0){const i=Vr(r),o=Vr(e);if(n!==1/0&&hn(i,o,t)>=n)return n;if(wt(i,o)){if(Qn(r,e))return 0}else if(Qn(e,r))return 0;let s=1/0;for(const a of r)for(let l=0,u=a.length,c=u-1;l<u;c=l++){const p=a[c],f=a[l];for(const d of e)for(let h=0,g=d.length,m=g-1;h<g;m=h++){const P=d[m],z=d[h];if(lr(p,f,P,z))return 0;s=Math.min(s,mn(p,f,P,z,t))}}return s}function ei(r,e,t,n,i,o){if(!o)return;const s=hn(Gr(n,o),i,t);s<e&&r.push([s,o,[0,0]])}function _t(r,e,t,n,i,o,s){if(!o||!s)return;const a=hn(Gr(n,o),Gr(i,s),t);a<e&&r.push([a,o,s])}function Zt(r,e,t,n,i=1/0){let o=Math.min(n.distance(r[0],t[0][0]),i);if(o===0)return o;const s=new Xi([[0,[0,r.length-1],[0,0]]],Wi),a=Vr(t);for(;s.length>0;){const l=s.pop();if(l[0]>=o)continue;const u=l[1],c=e?$r:Or;if(Bt(u)<=c){if(!Ie(u,r.length))return NaN;if(e){const p=vl(r,u,t,n);if(isNaN(p)||p===0)return p;o=Math.min(o,p)}else for(let p=u[0];p<=u[1];++p){const f=gl(r[p],t,n);if(o=Math.min(o,f),o===0)return 0}}else{const p=qr(u,e);ei(s,o,n,r,a,p[0]),ei(s,o,n,r,a,p[1])}}return o}function Ht(r,e,t,n,i,o=1/0){let s=Math.min(o,i.distance(r[0],t[0]));if(s===0)return s;const a=new Xi([[0,[0,r.length-1],[0,t.length-1]]],Wi);for(;a.length>0;){const l=a.pop();if(l[0]>=s)continue;const u=l[1],c=l[2],p=e?$r:Or,f=n?$r:Or;if(Bt(u)<=p&&Bt(c)<=f){if(!Ie(u,r.length)&&Ie(c,t.length))return NaN;let d;if(e&&n)d=ml(r,u,t,c,i),s=Math.min(s,d);else if(e&&!n){const h=r.slice(u[0],u[1]+1);for(let g=c[0];g<=c[1];++g)if(d=Ne(t[g],h,i),s=Math.min(s,d),s===0)return s}else if(!e&&n){const h=t.slice(c[0],c[1]+1);for(let g=u[0];g<=u[1];++g)if(d=Ne(r[g],h,i),s=Math.min(s,d),s===0)return s}else d=yl(r,u,t,c,i),s=Math.min(s,d)}else{const d=qr(u,e),h=qr(c,n);_t(a,s,i,r,t,d[0],h[0]),_t(a,s,i,r,t,d[0],h[1]),_t(a,s,i,r,t,d[1],h[0]),_t(a,s,i,r,t,d[1],h[1])}}return s}function bl(r,e){const t=r.geometry(),n=t.flat().map(s=>pn([s.x,s.y],r.canonical));if(t.length===0)return NaN;const i=new dn(n[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,Ht(n,!1,[s.coordinates],!1,i,o));break;case"LineString":o=Math.min(o,Ht(n,!1,s.coordinates,!0,i,o));break;case"Polygon":o=Math.min(o,Zt(n,!1,s.coordinates,i,o));break}if(o===0)return o}return o}function wl(r,e){const t=r.geometry(),n=t.flat().map(s=>pn([s.x,s.y],r.canonical));if(t.length===0)return NaN;const i=new dn(n[0][1]);let o=1/0;for(const s of e){switch(s.type){case"Point":o=Math.min(o,Ht(n,!0,[s.coordinates],!1,i,o));break;case"LineString":o=Math.min(o,Ht(n,!0,s.coordinates,!0,i,o));break;case"Polygon":o=Math.min(o,Zt(n,!0,s.coordinates,i,o));break}if(o===0)return o}return o}function Tl(r,e){const t=r.geometry();if(t.length===0||t[0].length===0)return NaN;const n=fl(t).map(s=>s.map(a=>a.map(l=>pn([l.x,l.y],r.canonical)))),i=new dn(n[0][0][0][1]);let o=1/0;for(const s of e)for(const a of n){switch(s.type){case"Point":o=Math.min(o,Zt([s.coordinates],!1,a,i,o));break;case"LineString":o=Math.min(o,Zt(s.coordinates,!0,a,i,o));break;case"Polygon":o=Math.min(o,xl(a,s.coordinates,i,o));break}if(o===0)return o}return o}function zr(r){return r.type==="MultiPolygon"?r.coordinates.map(e=>({type:"Polygon",coordinates:e})):r.type==="MultiLineString"?r.coordinates.map(e=>({type:"LineString",coordinates:e})):r.type==="MultiPoint"?r.coordinates.map(e=>({type:"Point",coordinates:e})):[r]}class Ge{constructor(e,t){this.type=y,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(xt(e[1])){const n=e[1];if(n.type==="FeatureCollection")return new Ge(n,n.features.map(i=>zr(i.geometry)).flat());if(n.type==="Feature")return new Ge(n,zr(n.geometry));if("type"in n&&"coordinates"in n)return new Ge(n,zr(n))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return bl(e,this.geometries);if(e.geometryType()==="LineString")return wl(e,this.geometries);if(e.geometryType()==="Polygon")return Tl(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const yn={"==":Za,"!=":Ha,">":Wa,"<":Xa,">=":Ka,"<=":Ja,array:ye,at:rn,boolean:ye,case:sn,coalesce:bt,collator:ar,format:ln,image:un,in:nn,"index-of":Vt,interpolate:Se,"interpolate-hcl":Se,"interpolate-lab":Se,length:cn,let:ir,literal:rt,match:on,number:ye,"number-format":an,object:ye,slice:Ut,step:sr,string:ye,"to-boolean":_e,"to-color":_e,"to-number":_e,"to-string":_e,var:or,within:qe,distance:Ge};class ve{constructor(e,t,n,i){this.name=e,this.type=t,this._evaluate=n,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const n=e[0],i=ve.definitions[n];if(!i)return t.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const o=Array.isArray(i)?i[0]:i.type,s=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,a=s.filter(([u])=>!Array.isArray(u)||u.length===e.length-1);let l=null;for(const[u,c]of a){l=new nr(t.registry,Xt,t.path,null,t.scope);const p=[];let f=!1;for(let d=1;d<e.length;d++){const h=e[d],g=Array.isArray(u)?u[d-1]:u.type,m=l.parse(h,1+p.length,g);if(!m){f=!0;break}p.push(m)}if(!f){if(Array.isArray(u)&&u.length!==p.length){l.error(`Expected ${u.length} arguments, but found ${p.length} instead.`);continue}for(let d=0;d<p.length;d++){const h=Array.isArray(u)?u[d]:u.type,g=p[d];l.concat(d+1).checkSubtype(h,g.type)}if(l.errors.length===0)return new ve(n,o,c,p)}}if(a.length===1)t.errors.push(...l.errors);else{const c=(a.length?a:s).map(([f])=>Sl(f)).join(" | "),p=[];for(let f=1;f<e.length;f++){const d=t.parse(e[f],1+p.length);if(!d)return null;p.push(U(d.type))}t.error(`Expected arguments of type ${c}, but found (${p.join(", ")}) instead.`)}return null}static register(e,t){ve.definitions=t;for(const n in t)e[n]=ve}}function ti(r,[e,t,n,i]){e=e.evaluate(r),t=t.evaluate(r),n=n.evaluate(r);const o=i?i.evaluate(r):1,s=$i(e,t,n,o);if(s)throw new K(s);return new $(e/255,t/255,n/255,o,!1)}function ri(r,e){return r in e}function Fr(r,e){const t=e[r];return typeof t>"u"?null:t}function kl(r,e,t,n){for(;t<=n;){const i=t+n>>1;if(e[i]===r)return!0;e[i]>r?n=i-1:t=i+1}return!1}function je(r){return{type:r}}ve.register(yn,{error:[va,[_],(r,[e])=>{throw new K(e.evaluate(r))}],typeof:[_,[R],(r,[e])=>U(te(e.evaluate(r)))],"to-rgba":[ce(y,4),[Te],(r,[e])=>{const[t,n,i,o]=e.evaluate(r).rgb;return[t*255,n*255,i*255,o]}],rgb:[Te,[y,y,y],ti],rgba:[Te,[y,y,y,y],ti],has:{type:M,overloads:[[[_],(r,[e])=>ri(e.evaluate(r),r.properties())],[[_,Ye],(r,[e,t])=>ri(e.evaluate(r),t.evaluate(r))]]},get:{type:R,overloads:[[[_],(r,[e])=>Fr(e.evaluate(r),r.properties())],[[_,Ye],(r,[e,t])=>Fr(e.evaluate(r),t.evaluate(r))]]},"feature-state":[R,[_],(r,[e])=>Fr(e.evaluate(r),r.featureState||{})],properties:[Ye,[],r=>r.properties()],"geometry-type":[_,[],r=>r.geometryType()],id:[R,[],r=>r.id()],zoom:[y,[],r=>r.globals.zoom],"heatmap-density":[y,[],r=>r.globals.heatmapDensity||0],"line-progress":[y,[],r=>r.globals.lineProgress||0],accumulated:[R,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[y,je(y),(r,e)=>{let t=0;for(const n of e)t+=n.evaluate(r);return t}],"*":[y,je(y),(r,e)=>{let t=1;for(const n of e)t*=n.evaluate(r);return t}],"-":{type:y,overloads:[[[y,y],(r,[e,t])=>e.evaluate(r)-t.evaluate(r)],[[y],(r,[e])=>-e.evaluate(r)]]},"/":[y,[y,y],(r,[e,t])=>e.evaluate(r)/t.evaluate(r)],"%":[y,[y,y],(r,[e,t])=>e.evaluate(r)%t.evaluate(r)],ln2:[y,[],()=>Math.LN2],pi:[y,[],()=>Math.PI],e:[y,[],()=>Math.E],"^":[y,[y,y],(r,[e,t])=>Math.pow(e.evaluate(r),t.evaluate(r))],sqrt:[y,[y],(r,[e])=>Math.sqrt(e.evaluate(r))],log10:[y,[y],(r,[e])=>Math.log(e.evaluate(r))/Math.LN10],ln:[y,[y],(r,[e])=>Math.log(e.evaluate(r))],log2:[y,[y],(r,[e])=>Math.log(e.evaluate(r))/Math.LN2],sin:[y,[y],(r,[e])=>Math.sin(e.evaluate(r))],cos:[y,[y],(r,[e])=>Math.cos(e.evaluate(r))],tan:[y,[y],(r,[e])=>Math.tan(e.evaluate(r))],asin:[y,[y],(r,[e])=>Math.asin(e.evaluate(r))],acos:[y,[y],(r,[e])=>Math.acos(e.evaluate(r))],atan:[y,[y],(r,[e])=>Math.atan(e.evaluate(r))],min:[y,je(y),(r,e)=>Math.min(...e.map(t=>t.evaluate(r)))],max:[y,je(y),(r,e)=>Math.max(...e.map(t=>t.evaluate(r)))],abs:[y,[y],(r,[e])=>Math.abs(e.evaluate(r))],round:[y,[y],(r,[e])=>{const t=e.evaluate(r);return t<0?-Math.round(-t):Math.round(t)}],floor:[y,[y],(r,[e])=>Math.floor(e.evaluate(r))],ceil:[y,[y],(r,[e])=>Math.ceil(e.evaluate(r))],"filter-==":[M,[_,R],(r,[e,t])=>r.properties()[e.value]===t.value],"filter-id-==":[M,[R],(r,[e])=>r.id()===e.value],"filter-type-==":[M,[_],(r,[e])=>r.geometryType()===e.value],"filter-<":[M,[_,R],(r,[e,t])=>{const n=r.properties()[e.value],i=t.value;return typeof n==typeof i&&n<i}],"filter-id-<":[M,[R],(r,[e])=>{const t=r.id(),n=e.value;return typeof t==typeof n&&t<n}],"filter->":[M,[_,R],(r,[e,t])=>{const n=r.properties()[e.value],i=t.value;return typeof n==typeof i&&n>i}],"filter-id->":[M,[R],(r,[e])=>{const t=r.id(),n=e.value;return typeof t==typeof n&&t>n}],"filter-<=":[M,[_,R],(r,[e,t])=>{const n=r.properties()[e.value],i=t.value;return typeof n==typeof i&&n<=i}],"filter-id-<=":[M,[R],(r,[e])=>{const t=r.id(),n=e.value;return typeof t==typeof n&&t<=n}],"filter->=":[M,[_,R],(r,[e,t])=>{const n=r.properties()[e.value],i=t.value;return typeof n==typeof i&&n>=i}],"filter-id->=":[M,[R],(r,[e])=>{const t=r.id(),n=e.value;return typeof t==typeof n&&t>=n}],"filter-has":[M,[R],(r,[e])=>e.value in r.properties()],"filter-has-id":[M,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[M,[ce(_)],(r,[e])=>e.value.indexOf(r.geometryType())>=0],"filter-id-in":[M,[ce(R)],(r,[e])=>e.value.indexOf(r.id())>=0],"filter-in-small":[M,[_,ce(R)],(r,[e,t])=>t.value.indexOf(r.properties()[e.value])>=0],"filter-in-large":[M,[_,ce(R)],(r,[e,t])=>kl(r.properties()[e.value],t.value,0,t.value.length-1)],all:{type:M,overloads:[[[M,M],(r,[e,t])=>e.evaluate(r)&&t.evaluate(r)],[je(M),(r,e)=>{for(const t of e)if(!t.evaluate(r))return!1;return!0}]]},any:{type:M,overloads:[[[M,M],(r,[e,t])=>e.evaluate(r)||t.evaluate(r)],[je(M),(r,e)=>{for(const t of e)if(t.evaluate(r))return!0;return!1}]]},"!":[M,[M],(r,[e])=>!e.evaluate(r)],"is-supported-script":[M,[_],(r,[e])=>{const t=r.globals&&r.globals.isSupportedScript;return t?t(e.evaluate(r)):!0}],upcase:[_,[_],(r,[e])=>e.evaluate(r).toUpperCase()],downcase:[_,[_],(r,[e])=>e.evaluate(r).toLowerCase()],concat:[_,je(R),(r,e)=>e.map(t=>gt(t.evaluate(r))).join("")],"resolved-locale":[_,[Qt],(r,[e])=>e.evaluate(r).resolvedLocale()]});function Sl(r){return Array.isArray(r)?`(${r.map(U).join(", ")})`:`(${U(r.type)}...)`}function Xt(r){if(r instanceof or)return Xt(r.boundExpression);if(r instanceof ve&&r.name==="error")return!1;if(r instanceof ar)return!1;if(r instanceof qe)return!1;if(r instanceof Ge)return!1;const e=r instanceof _e||r instanceof ye;let t=!0;return r.eachChild(n=>{e?t=t&&Xt(n):t=t&&n instanceof rt}),t?gn(r)&&xn(r,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function gn(r){if(r instanceof ve){if(r.name==="get"&&r.args.length===1)return!1;if(r.name==="feature-state")return!1;if(r.name==="has"&&r.args.length===1)return!1;if(r.name==="properties"||r.name==="geometry-type"||r.name==="id")return!1;if(/^filter-/.test(r.name))return!1}if(r instanceof qe||r instanceof Ge)return!1;let e=!0;return r.eachChild(t=>{e&&!gn(t)&&(e=!1)}),e}function vn(r){if(r instanceof ve&&r.name==="feature-state")return!1;let e=!0;return r.eachChild(t=>{e&&!vn(t)&&(e=!1)}),e}function xn(r,e){if(r instanceof ve&&e.indexOf(r.name)>=0)return!1;let t=!0;return r.eachChild(n=>{t&&!xn(n,e)&&(t=!1)}),t}function Ur(r){return{result:"success",value:r}}function Je(r){return{result:"error",value:r}}function El(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function zl(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function Fl(r){return!!r.expression&&r.expression.interpolated}function Ji(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}class Cl{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new qi,this._defaultValue=t?Rl(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,n,i,o,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=i,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(e,t,n,i,o,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=s||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!==a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new K(`Expected value to be one of ${Object.keys(this._enumValues).map(l=>JSON.stringify(l)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}}function Il(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in yn}function Ki(r,e){const t=new nr(yn,Xt,[],e?Ml(e):void 0),n=t.parse(r,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return n?Ur(new Cl(n,e)):Je(t.errors)}class ni{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!vn(t.expression)}evaluateWithoutErrorHandling(e,t,n,i,o,s){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,i,o,s)}evaluate(e,t,n,i,o,s){return this._styleExpression.evaluate(e,t,n,i,o,s)}}class ii{constructor(e,t,n,i){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!vn(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,n,i,o,s){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,i,o,s)}evaluate(e,t,n,i,o,s){return this._styleExpression.evaluate(e,t,n,i,o,s)}interpolationFactor(e,t,n){return this.interpolationType?Se.interpolationFactor(this.interpolationType,e,t,n):0}}function Pl(r,e){const t=Ki(r,e);if(t.result==="error")return t;const n=t.value.expression,i=gn(n);if(!i&&!El(e))return Je([new we("","data expressions not supported")]);const o=xn(n,["zoom"]);if(!o&&!zl(e))return Je([new we("","zoom expressions not supported")]);const s=Ot(n);if(!s&&!o)return Je([new we("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof we)return Je([s]);if(s instanceof Se&&!Fl(e))return Je([new we("",'"interpolate" expressions cannot be used with this property')]);if(!s)return Ur(i?new ni("constant",t.value):new ni("source",t.value));const a=s instanceof Se?s.interpolation:void 0;return Ur(i?new ii("camera",t.value,s.labels,a):new ii("composite",t.value,s.labels,a))}function Ot(r){let e=null;if(r instanceof ir)e=Ot(r.result);else if(r instanceof bt){for(const t of r.args)if(e=Ot(t),e)break}else(r instanceof sr||r instanceof Se)&&r.input instanceof ve&&r.input.name==="zoom"&&(e=r);return e instanceof we||r.eachChild(t=>{const n=Ot(t);n instanceof we?e=n:!e&&n?e=new we("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new we("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Ml(r){const e={color:Te,string:_,number:y,enum:_,boolean:M,formatted:er,padding:tr,projectionDefinition:Yt,resolvedImage:kt,variableAnchorOffsetCollection:rr};return r.type==="array"?ce(e[r.value]||R,r.length):e[r.type]}function Rl(r){return r.type==="color"&&Ji(r.default)?new $(0,0,0,0):r.type==="color"?$.parse(r.default)||null:r.type==="padding"?ge.parse(r.default)||null:r.type==="variableAnchorOffsetCollection"?ke.parse(r.default)||null:r.type==="projectionDefinition"?me.parse(r.default)||null:r.default===void 0?null:r.default}function Yi(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const e of r.slice(1))if(!Yi(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const _l={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Al(r){if(r==null)return{filter:()=>!0,needGeometry:!1};Yi(r)||(r=Wt(r));const e=Ki(r,_l);if(e.result==="error")throw new Error(e.value.map(t=>`${t.key}: ${t.message}`).join(", "));{const t=Qi(r);return{filter:(n,i,o)=>e.value.evaluate(n,i,{},o),needGeometry:t}}}function jl(r,e){return r<e?-1:r>e?1:0}function Qi(r){if(!Array.isArray(r))return!1;if(r[0]==="within"||r[0]==="distance")return!0;for(let e=1;e<r.length;e++)if(Qi(r[e]))return!0;return!1}function Wt(r){if(!r)return!0;const e=r[0];return r.length<=1?e!=="any":e==="=="?Cr(r[1],r[2],"=="):e==="!="?At(Cr(r[1],r[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Cr(r[1],r[2],e):e==="any"?Dl(r.slice(1)):e==="all"?["all"].concat(r.slice(1).map(Wt)):e==="none"?["all"].concat(r.slice(1).map(Wt).map(At)):e==="in"?oi(r[1],r.slice(2)):e==="!in"?At(oi(r[1],r.slice(2))):e==="has"?si(r[1]):e==="!has"?At(si(r[1])):!0}function Cr(r,e,t){switch(r){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,r,e]}}function Dl(r){return["any"].concat(r.map(Wt))}function oi(r,e){if(e.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",r,["literal",e.sort(jl)]]:["filter-in-small",r,["literal",e]]}}function si(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function At(r){return["!",r]}function Tt(r){return typeof r=="object"?["literal",r]:r}function Ll(r,e){let t=r.stops;if(!t)return Nl(r,e);const n=t&&typeof t[0][0]=="object",i=n||r.property!==void 0,o=n||!i;return t=t.map(s=>!i&&e.tokens&&typeof s[1]=="string"?[s[0],Gl(s[1])]:[s[0],Tt(s[1])]),n?Ol(r,e,t):o?ql(r,e,t):Br(r,e,t)}function Nl(r,e){const t=["get",r.property];if(r.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,r.default];{const n=[e.type==="color"?"to-color":e.type,t,Tt(r.default)];return e.type==="array"&&n.splice(1,0,e.value,e.length||null),n}}function bn(r){switch(r.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Ol(r,e,t){const n={},i={},o=[];for(let a=0;a<t.length;a++){const l=t[a],u=l[0].zoom;n[u]===void 0&&(n[u]={zoom:u,type:r.type,property:r.property,default:r.default},i[u]=[],o.push(u)),i[u].push([l[0].value,l[1]])}if(Tn({},e)==="exponential"){const a=[bn(r),["linear"],["zoom"]];for(const l of o){const u=Br(n[l],e,i[l]);et(a,l,u,!1)}return a}else{const a=["step",["zoom"]];for(const l of o){const u=Br(n[l],e,i[l]);et(a,l,u,!0)}return wn(a),a}}function $l(r,e){if(r!==void 0)return r;if(e!==void 0)return e}function ai(r,e){const t=Tt($l(r.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function Br(r,e,t){const n=Tn(r,e),i=["get",r.property];if(n==="categorical"&&typeof t[0][0]=="boolean"){const o=["case"];for(const s of t)o.push(["==",i,s[0]],s[1]);return o.push(ai(r,e)),o}else if(n==="categorical"){const o=["match",i];for(const s of t)et(o,s[0],s[1],!1);return o.push(ai(r,e)),o}else if(n==="interval"){const o=["step",["number",i]];for(const s of t)et(o,s[0],s[1],!0);return wn(o),r.default===void 0?o:["case",["==",["typeof",i],"number"],o,Tt(r.default)]}else if(n==="exponential"){const o=r.base!==void 0?r.base:1,s=[bn(r),o===1?["linear"]:["exponential",o],["number",i]];for(const a of t)et(s,a[0],a[1],!1);return r.default===void 0?s:["case",["==",["typeof",i],"number"],s,Tt(r.default)]}else throw new Error(`Unknown property function type ${n}`)}function ql(r,e,t,n=["zoom"]){const i=Tn(r,e);let o,s=!1;if(i==="interval")o=["step",n],s=!0;else if(i==="exponential"){const a=r.base!==void 0?r.base:1;o=[bn(r),a===1?["linear"]:["exponential",a],n]}else throw new Error(`Unknown zoom function type "${i}"`);for(const a of t)et(o,a[0],a[1],s);return wn(o),o}function wn(r){r[0]==="step"&&r.length===3&&(r.push(0),r.push(r[3]))}function et(r,e,t,n){r.length>3&&e===r[r.length-2]||(n&&r.length===2||r.push(e),r.push(t))}function Tn(r,e){return r.type?r.type:e.expression.interpolated?"exponential":"interval"}function Gl(r){const e=["concat"],t=/{([^{}]+)}/g;let n=0;for(let i=t.exec(r);i!==null;i=t.exec(r)){const o=r.slice(n,t.lastIndex-i[0].length);n=t.lastIndex,o.length>0&&e.push(o),e.push(["get",i[1]])}if(e.length===1)return r;if(n<r.length)e.push(r.slice(n));else if(e.length===2)return["to-string",e[1]];return e}const Vl=ha;var li={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},ft=" ",ui=/(italic|oblique)$/i,ci={};function Zr(r,e,t){var n=ci[r];if(!n){Array.isArray(r)||(r=[r]);for(var i=400,o="normal",s=[],a,l,u=0,c=r.length;u<c;++u){var p=r[u],f=p.split(" "),d=f[f.length-1].toLowerCase();d=="normal"||d=="italic"||d=="oblique"?(o=l?o:d,l=!0,f.pop(),d=f[f.length-1].toLowerCase()):ui.test(d)&&(d=d.replace(ui,""),o=l?o:f[f.length-1].replace(d,""),l=!0);for(var h in li){var g=f.length>1?f[f.length-2].toLowerCase():"";if(d==h||d==h.replace("-","")||g+"-"+d==h){i=a?i:li[h],f.pop(),g&&h.startsWith(g)&&f.pop();break}}!a&&typeof d=="number"&&(i=d,a=!0);var m=f.join(ft).replace("Klokantech Noto Sans","Noto Sans");m.indexOf(ft)!==-1&&(m='"'+m+'"'),s.push(m)}n=ci[r]=[o,i,s]}return n[0]+ft+n[1]+ft+e+"px"+(t?"/"+t:"")+ft+n[2]}const eo="https://api.mapbox.com";function kn(r){const e="mapbox://";return r.indexOf(e)!==0?"":r.slice(e.length)}function Ul(r,e,t){const n=kn(r);if(!n)return decodeURI(new URL(r,t).href);const i="sprites/";if(n.indexOf(i)!==0)throw new Error(`unexpected sprites url: ${r}`);const o=n.slice(i.length);return`${eo}/styles/v1/${o}/sprite?access_token=${e}`}function to(r,e){const t=kn(r);if(!t)return decodeURI(new URL(r,location.href).href);const n="styles/";if(t.indexOf(n)!==0)throw new Error(`unexpected style url: ${r}`);const i=t.slice(n.length);return`${eo}/styles/v1/${i}?&access_token=${e}`}const Bl=["a","b","c","d"];function $t(r,e,t,n){const i=new URL(r,n),o=kn(r);if(!o)return e?(i.searchParams.has(t)||i.searchParams.set(t,e),[decodeURI(i.href)]):[decodeURI(i.href)];if(o==="mapbox.satellite"){const s=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${o}/{z}/{x}/{y}${s}.webp?access_token=${e}`]}return Bl.map(s=>`https://${s}.tiles.mapbox.com/v4/${o}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const pi={},fi={};let Zl=0;function Sn(r){return r.id||(r.id=Zl++),r.id}function Hl(r,e){return Sn(r)+"."+he(e)}function Xl(r){let e=pi[r.id];return e||(e={},pi[Sn(r)]=e),e}function Wl(r){let e=fi[r.id];return e||(e={},fi[Sn(r)]=e),e}function Ir(r){return r*Math.PI/180}const ur=function(){const r=[];for(let e=78271.51696402048;r.length<=24;e/=2)r.push(e);return r}();function cr(r,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(r,e);const t=document.createElement("canvas");return t.width=r,t.height=e,t}function ro(r,e){let t=0;const n=e.length;for(;t<n;++t)if(e[t]<r&&t+1<n){const o=e[t]/e[t+1];return t+Math.log(e[t]/r)/Math.log(o)}return n-1}function Jl(r,e){const t=Math.floor(r),n=Math.pow(2,r-t);return e[t]/n}const He={};function nt(r,e,t={},n){if(e in He)return n&&(n.request=He[e][0]),He[e][1];const i=t.transformRequest&&t.transformRequest(e,r)||e,o=qt(()=>i).then(s=>(s instanceof Request||(s=new Request(s)),s.headers.get("Accept")||s.headers.set("Accept","application/json"),n&&(n.request=s),fetch(s).then(function(a){return delete He[e],a.ok?a.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(a){return delete He[e],Promise.reject(new Error("Error fetching source "+e))})));return He[e]=[i,o],o}function no(r,e){if(typeof r=="string")if(r.trim().startsWith("{"))try{const t=JSON.parse(r);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return r=to(r,e.accessToken),nt("Style",r,e);else return Promise.resolve(r)}const di={};function Kl(r,e,t={}){const n=[e,JSON.stringify(r)].toString();let i=di[n];if(!i||t.transformRequest){let o;t.transformRequest&&(o=(a,l)=>{const u=t.transformRequest&&t.transformRequest(l,"Tiles")||l;if(a instanceof Pi)a.setLoader((c,p,f)=>{qt(()=>u).then(d=>{fetch(d).then(h=>h.arrayBuffer()).then(h=>{const m=a.getFormat().readFeatures(h,{extent:c,featureProjection:f});a.setFeatures(m)}).catch(h=>a.setState(G.ERROR))})});else{const c=a.getImage();qt(()=>u).then(p=>{p instanceof Request?fetch(p).then(f=>f.blob()).then(f=>{const d=URL.createObjectURL(f);c.addEventListener("load",()=>URL.revokeObjectURL(d)),c.addEventListener("error",()=>URL.revokeObjectURL(d)),c.src=d}).catch(f=>a.setState(G.ERROR)):c.src=p})}});const s=r.url;if(s&&!r.tiles){const a=$t(s,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(s.startsWith("mapbox://"))i=Promise.resolve({tileJson:Object.assign({},r,{url:void 0,tiles:a}),tileLoadFunction:o});else{const l={};i=nt("Source",a[0],t,l).then(function(u){return u.tiles=u.tiles.map(function(c){return u.scheme==="tms"&&(c=c.replace("{y}","{-y}")),$t(c,t.accessToken,t.accessTokenParam||"access_token",l.request.url)[0]}),Promise.resolve({tileJson:u,tileLoadFunction:o})})}}else r=Object.assign({},r,{tiles:r.tiles.map(function(a){return r.scheme==="tms"&&(a=a.replace("{y}","{-y}")),$t(a,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),i=Promise.resolve({tileJson:Object.assign({},r),tileLoadFunction:o});di[n]=i}return i}function hi(r,e,t,n){const i=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],o=cr(i[0],i[1]),s=o.getContext("2d");s.drawImage(r,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const a=s.getImageData(0,0,i[0],i[1]);s.globalCompositeOperation="destination-over",s.fillStyle=`rgba(${n.r*255},${n.g*255},${n.b*255},${n.a})`;const l=a.data;for(let u=0,c=a.width;u<c;++u)for(let p=0,f=a.height;p<f;++p){const d=(p*c+u)*4;l[d+3]>0&&s.arc(u,p,t*e.pixelRatio,0,2*Math.PI)}return s.fill(),o}function Yl(r,e,t){const n=Math.max(0,Math.min(1,(t-r)/(e-r)));return n*n*(3-2*n)}function mi(r,e,t){const n=cr(e.width,e.height),i=n.getContext("2d");i.drawImage(r,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const o=i.getImageData(0,0,e.width,e.height),s=o.data;for(let a=0,l=o.width;a<l;++a)for(let u=0,c=o.height;u<c;++u){const p=(u*l+a)*4,f=s[p+3]/255,d=.75,h=.1,g=Yl(d-h,d+h,f);g>0?(s[p+0]=Math.round(255*t.r*g),s[p+1]=Math.round(255*t.g*g),s[p+2]=Math.round(255*t.b*g),s[p+3]=Math.round(255*g)):s[p+3]=0}return i.putImageData(o,0,0),n}const Ql=Array(256).join("");function Hr(r,e){if(e>=.05){let t="";const n=r.split(`
`),i=Ql.slice(0,Math.round(e/.1));for(let o=0,s=n.length;o<s;++o)o>0&&(t+=`
`),t+=n[o].split("").join(i);return t}return r}let Pr;function io(){return Pr||(Pr=cr(1,1).getContext("2d")),Pr}function De(r,e){return io().measureText(r).width+(r.length-1)*e}const yi={};function Xr(r,e,t,n){if(r.indexOf(`
`)!==-1){const s=r.split(`
`),a=[];for(let l=0,u=s.length;l<u;++l)a.push(Xr(s[l],e,t,n));return a.join(`
`)}const i=t+","+e+","+r+","+n;let o=yi[i];if(!o){const s=r.split(" ");if(s.length>1){const a=io();a.font=e;const u=a.measureText("M").width*t;let c="";const p=[];for(let f=0,d=s.length;f<d;++f){const h=s[f],g=c+(c?" ":"")+h;De(g,n)<=u?c=g:(c&&p.push(c),c=h)}c&&p.push(c);for(let f=0,d=p.length;f<d&&d>1;++f){const h=p[f];if(De(h,n)<u*.35){const g=f>0?De(p[f-1],n):1/0,m=f<d-1?De(p[f+1],n):1/0;p.splice(f,1),d-=1,g<m?(p[f-1]+=" "+h,f-=1):p[f]=h+" "+p[f]}}for(let f=0,d=p.length-1;f<d;++f){const h=p[f],g=p[f+1];if(De(h,n)>u*.7&&De(g,n)<u*.6){const m=h.split(" "),P=m.pop();De(P,n)<u*.2&&(p[f]=m.join(" "),p[f+1]=P+" "+g),d-=1}}o=p.join(`
`)}else o=r;o=Hr(o,n),yi[i]=o}return o}const eu=/font-family: ?([^;]*);/,tu=/("|')/g;let jt;function ru(r){if(!jt){jt={};const e=document.styleSheets;for(let t=0,n=e.length;t<n;++t){const i=e[t];try{const o=i.rules||i.cssRules;if(o)for(let s=0,a=o.length;s<a;++s){const l=o[s];if(l.type==5){const u=l.cssText.match(eu);jt[u[1].replace(tu,"")]=!0}}}catch{}}}return r in jt}const Mr={};function nu(r,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const t=r.toString();if(t in Mr)return Mr[t];const n=[];for(let i=0,o=r.length;i<o;++i){r[i]=r[i].replace("Arial Unicode MS","Arial");const s=r[i],a=Zr(s,1);Vo(a);const l=a.split(" ");n.push([l.slice(3).join(" ").replace(/"/g,""),l[1],l[0]])}for(let i=0,o=n.length;i<o;++i){const s=n[i],a=s[0];if(!ru(a)&&Uo.get(`${s[2]}
${s[1]} 
${a}`)!==100){const l=e.replace("{font-family}",a.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",a.replace(/ /g,"+")).replace("{fontweight}",s[1]).replace("{-fontstyle}",s[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",s[2]);if(!document.querySelector('link[href="'+l+'"]')){const u=document.createElement("link");u.href=l,u.rel="stylesheet",document.head.appendChild(u)}}}return Mr[t]=r,r}const iu={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},ou={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},su=function(r,e){const t=Pl(r,e);if(t.result==="error")throw new Error(t.value.map(n=>`${n.key}: ${n.message}`).join(", "));return t.value},Wr={},Jt={zoom:0};let Dt,Rr;function E(r,e,t,n,i,o,s){const a=r.id;o||(o={},console.warn("No functionCache provided to getValue()")),o[a]||(o[a]={});const l=o[a];if(!l[t]){let u=(r[e]||Wr)[t];const c=Vl[`${e}_${r.type}`][t];u===void 0&&(u=c.default);let p=Il(u);if(!p&&Ji(u)&&(u=Ll(u,c),p=!0),p){const f=su(u,c);l[t]=f.evaluate.bind(f)}else c.type=="color"&&(u=$.parse(u)),l[t]=function(){return u}}return Jt.zoom=n,l[t](Jt,i,s)}function gi(r,e,t,n,i){return E(r,"layout",`${n}-allow-overlap`,e,t,i)?E(r,"layout",`${n}-ignore-placement`,e,t,i)?"none":"obstacle":"declutter"}function au(r,e,t,n,i){return i||console.warn("No filterCache provided to evaluateFilter()"),r in i||(i[r]=Al(e).filter),Jt.zoom=n,i[r](Jt,t)}function Me(r,e){if(r){if(r.a===0||e===0)return;const t=r.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(r.r*255/t)+","+Math.round(r.g*255/t)+","+Math.round(r.b*255/t)+","+t*e+")"}return r}const lu=/\{[^{}}]*\}/g;function _r(r,e){return r.replace(lu,function(t){return e[t.slice(1,-1)]||""})}const uu={};function cu(r,e,t,n=ur,i=void 0,o=void 0,s=void 0,a=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");uu[Hl(e,r)]=Array.from(arguments);let l,u,c;if(o){if(typeof Image<"u"){const T=new Image;let I;qt(()=>o).then(L=>{L instanceof Request?fetch(L).then(Q=>Q.blob()).then(Q=>{I=URL.createObjectURL(Q),T.src=I}).catch(()=>{}):(T.crossOrigin="anonymous",T.src=L,I&&URL.revokeObjectURL(I))}),T.onload=function(){l=T,u=[T.width,T.height],r.changed(),T.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const T=self;T.postMessage({action:"loadImage",src:o}),T.addEventListener("message",function(L){L.data.action==="imageLoaded"&&L.data.src===o&&(l=L.data.image,u=[l.width,l.height])})}}const p=ga(e.layers),f={},d=[],h={},g={},m=Xl(e),P=Wl(e);let z;for(let T=0,I=p.length;T<I;++T){const L=p[T],Q=L.id;if(typeof t=="string"&&L.source==t||Array.isArray(t)&&t.indexOf(Q)!==-1){const V=L["source-layer"];if(z){if(L.source!==z)throw new Error(`Layer "${Q}" does not use source "${z}`)}else{z=L.source;const Y=e.sources[z];if(!Y)throw new Error(`Source "${z}" is not defined`);const x=Y.type;if(x!=="vector"&&x!=="geojson")throw new Error(`Source "${z}" is not of type "vector" or "geojson", but "${x}"`)}let v=f[V];v||(v=[],f[V]=v),v.push({layer:L,index:T}),d.push(Q)}}const F=new ht,C=new Ke,S=[],j=function(T,I,L){const Q=T.getProperties(),V=f[Q.layer];if(!V)return;let v=n.indexOf(I);v==-1&&(v=ro(I,n));const Y=iu[T.getGeometry().getType()],x={id:T.getId(),properties:Q,type:Y},k=r.get("mapbox-featurestate")[T.getId()];let A=-1;for(let xe=0,Et=V.length;xe<Et;++xe){const zt=V[xe],b=zt.layer,zn=b.id;if(L!==void 0&&L!==zn)continue;const Ft=b.layout||Wr,Ve=b.paint||Wr;if(Ft.visibility==="none"||"minzoom"in b&&v<b.minzoom||"maxzoom"in b&&v>=b.maxzoom)continue;const Fn=b.filter;if(!Fn||au(zn,Fn,x,v,P)){let pe,ze,Ct,be,Fe,w;const Ue=zt.index;if(Y==3&&(b.type=="fill"||b.type=="fill-extrusion"))if(ze=E(b,"paint",b.type+"-opacity",v,x,m,k),b.type+"-pattern"in Ve){const B=E(b,"paint",b.type+"-pattern",v,x,m,k);if(B){const Z=typeof B=="string"?_r(B,Q):B.toString();if(l&&i&&i[Z]){++A,w=S[A],(!w||!w.getFill()||w.getStroke()||w.getText())&&(w=new Re({fill:new Ke}),S[A]=w),Ct=w.getFill(),w.setZIndex(Ue);const q=Z+"."+ze;let H=g[q];if(!H){const D=i[Z],O=cr(D.width,D.height),J=O.getContext("2d");J.globalAlpha=ze,J.drawImage(l,D.x,D.y,D.width,D.height,0,0,D.width,D.height),H=J.createPattern(O,"repeat"),g[q]=H}Ct.setColor(H)}}}else pe=Me(E(b,"paint",b.type+"-color",v,x,m,k),ze),b.type+"-outline-color"in Ve&&(Fe=Me(E(b,"paint",b.type+"-outline-color",v,x,m,k),ze)),Fe||(Fe=pe),(pe||Fe)&&(++A,w=S[A],(!w||pe&&!w.getFill()||!pe&&w.getFill()||Fe&&!w.getStroke()||!Fe&&w.getStroke()||w.getText())&&(w=new Re({fill:pe?new Ke:void 0,stroke:Fe?new ht:void 0}),S[A]=w),pe&&(Ct=w.getFill(),Ct.setColor(pe)),Fe&&(be=w.getStroke(),be.setColor(Fe),be.setWidth(.5)),w.setZIndex(Ue));if(Y!=1&&b.type=="line"){"line-pattern"in Ve?pe=void 0:pe=Me(E(b,"paint","line-color",v,x,m,k),E(b,"paint","line-opacity",v,x,m,k));const B=E(b,"paint","line-width",v,x,m,k);pe&&B>0&&(++A,w=S[A],(!w||!w.getStroke()||w.getFill()||w.getText())&&(w=new Re({stroke:new ht}),S[A]=w),be=w.getStroke(),be.setLineCap(E(b,"layout","line-cap",v,x,m,k)),be.setLineJoin(E(b,"layout","line-join",v,x,m,k)),be.setMiterLimit(E(b,"layout","line-miter-limit",v,x,m,k)),be.setColor(pe),be.setWidth(B),be.setLineDash(Ve["line-dasharray"]?E(b,"paint","line-dasharray",v,x,m,k).map(function(Z){return Z*B}):null),w.setZIndex(Ue))}let It=!1,N=null,Cn=0,st,ie,pr;if((Y==1||Y==2)&&"icon-image"in Ft){const B=E(b,"layout","icon-image",v,x,m,k);if(B){st=typeof B=="string"?_r(B,Q):B.toString();let Z;const q=a?a(r,st):void 0;if(l&&i&&i[st]||q){const H=E(b,"layout","icon-rotation-alignment",v,x,m,k);if(Y==2){const D=T.getGeometry();if(D.getFlatMidpoint||D.getFlatMidpoints){const O=D.getExtent();if(Math.sqrt(Math.max(Math.pow((O[2]-O[0])/I,2),Math.pow((O[3]-O[1])/I,2)))>150){const ee=D.getType()==="MultiLineString"?D.getFlatMidpoints():D.getFlatMidpoint();if(Rr||(Dt=[NaN,NaN],Rr=new Dr("Point",Dt,[],2,{},void 0)),Z=Rr,Dt[0]=ee[0],Dt[1]=ee[1],E(b,"layout","symbol-placement",v,x,m,k)==="line"&&H==="map"){const le=D.getStride(),oe=D.getFlatCoordinates();for(let se=0,X=oe.length-le;se<X;se+=le){const ae=oe[se],de=oe[se+1],ue=oe[se+le],ne=oe[se+le+1],ct=Math.min(ae,ue),ao=Math.max(ae,ue),dr=ee[0],lo=ee[1],uo=(ne-de)*(dr-ae)-(ue-ae)*(lo-de);if(Math.abs(uo)<.001&&dr<=ao&&dr>=ct){Cn=Math.atan2(de-ne,ue-ae);break}}}}}}if(Y!==2||Z){const D=E(b,"layout","icon-size",v,x,m,k),O=Ve["icon-color"]!==void 0?E(b,"paint","icon-color",v,x,m,k):null;if(!O||O.a!==0){const J=E(b,"paint","icon-halo-color",v,x,m,k),ee=E(b,"paint","icon-halo-width",v,x,m,k);let fe=`${st}.${D}.${ee}.${J}`;if(O!==null&&(fe+=`.${O}`),ie=h[fe],!ie){const le=gi(b,v,x,"icon",m);let oe;"icon-offset"in Ft&&(oe=E(b,"layout","icon-offset",v,x,m,k).slice(0),oe[0]*=D,oe[1]*=-D);let se=O?[O.r*255,O.g*255,O.b*255,O.a]:void 0;if(q){const X={color:se,rotateWithView:H==="map",displacement:oe,declutterMode:le,scale:D};typeof q=="string"?X.src=q:(X.img=q,X.imgSize=[q.width,q.height]),ie=new _n(X)}else{const X=i[st];let ae,de,ue;ee?X.sdf?(ae=hi(mi(l,X,O||[0,0,0,1]),{x:0,y:0,width:X.width,height:X.height,pixelRatio:X.pixelRatio},ee,J),se=void 0):ae=hi(l,X,ee,J):(X.sdf?(c||(c=mi(l,{x:0,y:0,width:u[0],height:u[1]},{r:1,g:1,b:1})),ae=c):ae=l,de=[X.width,X.height],ue=[X.x,X.y]),ie=new _n({color:se,img:ae,imgSize:u,size:de,offset:ue,rotateWithView:H==="map",scale:D/X.pixelRatio,displacement:oe,declutterMode:le})}h[fe]=ie}}ie&&(++A,w=S[A],(!w||!w.getImage()||w.getFill()||w.getStroke())&&(w=new Re,S[A]=w),w.setGeometry(Z),ie.setRotation(Cn+Ir(E(b,"layout","icon-rotate",v,x,m,k))),ie.setOpacity(E(b,"paint","icon-opacity",v,x,m,k)),ie.setAnchor(ou[E(b,"layout","icon-anchor",v,x,m,k)]),w.setImage(ie),N=w.getText(),w.setText(void 0),w.setZIndex(Ue),It=!0,pr=!1)}else pr=!0}}}if(Y==1&&b.type==="circle"){++A,w=S[A],(!w||!w.getImage()||w.getFill()||w.getStroke())&&(w=new Re,S[A]=w);const B="circle-radius"in Ve?E(b,"paint","circle-radius",v,x,m,k):5,Z=Me(E(b,"paint","circle-stroke-color",v,x,m,k),E(b,"paint","circle-stroke-opacity",v,x,m,k)),q=E(b,"paint","circle-translate",v,x,m,k),H=Me(E(b,"paint","circle-color",v,x,m,k),E(b,"paint","circle-opacity",v,x,m,k)),D=E(b,"paint","circle-stroke-width",v,x,m,k),O=B+"."+Z+"."+H+"."+D+"."+q[0]+"."+q[1];ie=h[O],ie||(ie=new Ci({radius:B,displacement:[q[0],-q[1]],stroke:Z&&D>0?new ht({width:D,color:Z}):void 0,fill:H?new Ke({color:H}):void 0,declutterMode:"none"}),h[O]=ie),w.setImage(ie),N=w.getText(),w.setText(void 0),w.setGeometry(void 0),w.setZIndex(Ue),It=!0}let re,at,lt,Pe,ut,fr;if("text-field"in Ft){Pe=Math.round(E(b,"layout","text-size",v,x,m,k));const B=E(b,"layout","text-font",v,x,m,k);lt=E(b,"layout","text-line-height",v,x,m,k),at=Zr(s?s(B,e.metadata?e.metadata["ol:webfonts"]:void 0):B,Pe,lt),at.includes("sans-serif")||(at+=",sans-serif"),ut=E(b,"layout","text-letter-spacing",v,x,m,k),fr=E(b,"layout","text-max-width",v,x,m,k);const Z=E(b,"layout","text-field",v,x,m,k);typeof Z=="object"&&Z.sections?Z.sections.length===1?re=Z.toString():re=Z.sections.reduce((q,H,D)=>{const O=H.fontStack?H.fontStack.split(","):B,J=Zr(s?s(O):O,Pe*(H.scale||1),lt);let ee=H.text;if(ee===`
`)return q.push(`
`,""),q;if(Y==2)return q.push(Hr(ee,ut),J),q;ee=Xr(ee,J,fr,ut).split(`
`);for(let fe=0,le=ee.length;fe<le;++fe)fe>0&&q.push(`
`,""),q.push(ee[fe],J);return q},[]):re=_r(Z,Q).trim(),ze=E(b,"paint","text-opacity",v,x,m,k)}if(re&&ze&&!pr){It||(++A,w=S[A],(!w||!w.getText()||w.getFill()||w.getStroke())&&(w=new Re,S[A]=w),w.setImage(void 0),w.setGeometry(void 0));const B=gi(b,v,x,"text",m);w.getText()||w.setText(N),N=w.getText(),(!N||"getDeclutterMode"in N&&N.getDeclutterMode()!==B)&&(N=new Bo({padding:[2,2,2,2],declutterMode:B}),w.setText(N));const Z=E(b,"layout","text-transform",v,x,m,k);Z=="uppercase"?re=Array.isArray(re)?re.map((ne,ct)=>ct%2?ne:ne.toUpperCase()):re.toUpperCase():Z=="lowercase"&&(re=Array.isArray(re)?re.map((ne,ct)=>ct%2?ne:ne.toLowerCase()):re.toLowerCase());const q=Array.isArray(re)?re:Y==2?Hr(re,ut):Xr(re,at,fr,ut);if(N.setText(q),N.setFont(at),N.setRotation(Ir(E(b,"layout","text-rotate",v,x,m,k))),typeof N.setKeepUpright=="function"){const ne=E(b,"layout","text-keep-upright",v,x,m,k);N.setKeepUpright(ne)}const H=E(b,"layout","text-anchor",v,x,m,k),D=It||Y==1?"point":E(b,"layout","symbol-placement",v,x,m,k);let O;if(D==="line-center"?(N.setPlacement("line"),O="center"):N.setPlacement(D),D==="line"&&typeof N.setRepeat=="function"){const ne=E(b,"layout","symbol-spacing",v,x,m,k);N.setRepeat(ne*2)}N.setOverflow(D==="point");let J=E(b,"paint","text-halo-width",v,x,m,k);const ee=E(b,"layout","text-offset",v,x,m,k),fe=E(b,"paint","text-translate",v,x,m,k);let le=0,oe=0;if(D=="point"){O="center",H.indexOf("left")!==-1?(O="left",oe=J):H.indexOf("right")!==-1&&(O="right",oe=-J);const ne=E(b,"layout","text-rotation-alignment",v,x,m,k);N.setRotateWithView(ne=="map")}else N.setMaxAngle(Ir(E(b,"layout","text-max-angle",v,x,m,k))*re.length/q.length),N.setRotateWithView(!1);N.setTextAlign(O);let se="middle";H.indexOf("bottom")==0?(se="bottom",le=-J-.5*(lt-1)*Pe):H.indexOf("top")==0&&(se="top",le=J+.5*(lt-1)*Pe),N.setTextBaseline(se);const X=E(b,"layout","text-justify",v,x,m,k);N.setJustify(X==="auto"?void 0:X),N.setOffsetX(ee[0]*Pe+oe+fe[0]),N.setOffsetY(ee[1]*Pe+le+fe[1]),C.setColor(Me(E(b,"paint","text-color",v,x,m,k),ze)),N.setFill(C);const ae=Me(E(b,"paint","text-halo-color",v,x,m,k),ze);if(ae&&J>0){F.setColor(ae),J*=2;const ne=.5*Pe;F.setWidth(J<=ne?J:ne),N.setStroke(F)}else N.setStroke(void 0);const de=E(b,"layout","text-padding",v,x,m,k),ue=N.getPadding();de!==ue[0]&&(ue[0]=de,ue[1]=de,ue[2]=de,ue[3]=de),w.setZIndex(Ue)}}}if(A>-1)return S.length=A+1,S};return r.setStyle(j),r.set("mapbox-source",z),r.set("mapbox-layers",d),r.set("mapbox-featurestate",r.get("mapbox-featurestate")||{}),j}const Jr=65536*65536,vi=1/Jr,pu=12,xi=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),Ar=0,Lt=1,dt=2,Nt=5;class fu{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,n=this.length){for(;this.pos<n;){const i=this.readVarint(),o=i>>3,s=this.pos;this.type=i&7,e(o,t,this),this.pos===s&&this.skip(i)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Jr;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Jr;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let n,i;return i=t[this.pos++],n=i&127,i<128||(i=t[this.pos++],n|=(i&127)<<7,i<128)||(i=t[this.pos++],n|=(i&127)<<14,i<128)||(i=t[this.pos++],n|=(i&127)<<21,i<128)?n:(i=t[this.pos],n|=(i&15)<<28,du(n,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=pu&&xi?xi.decode(this.buf.subarray(t,e)):zu(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const n=this.readPackedEnd();for(;this.pos<n;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===dt?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===Ar)for(;this.buf[this.pos++]>127;);else if(t===dt)this.pos=this.readVarint()+this.pos;else if(t===Nt)this.pos+=4;else if(t===Lt)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.dataView=new DataView(n.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*vi),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*vi),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){hu(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=Fu(this.buf,e,this.pos);const n=this.pos-t;n>=128&&bi(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let n=0;n<t;n++)this.buf[this.pos++]=e[n]}writeRawMessage(e,t){this.pos++;const n=this.pos;e(t,this);const i=this.pos-n;i>=128&&bi(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i}writeMessage(e,t,n){this.writeTag(e,dt),this.writeRawMessage(t,n)}writePackedVarint(e,t){t.length&&this.writeMessage(e,gu,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,vu,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,wu,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,xu,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,bu,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,Tu,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,ku,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,Su,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,Eu,t)}writeBytesField(e,t){this.writeTag(e,dt),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,Nt),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,Nt),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,Lt),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,Lt),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,Ar),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,Ar),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,dt),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,Nt),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,Lt),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function du(r,e,t){const n=t.buf;let i,o;if(o=n[t.pos++],i=(o&112)>>4,o<128||(o=n[t.pos++],i|=(o&127)<<3,o<128)||(o=n[t.pos++],i|=(o&127)<<10,o<128)||(o=n[t.pos++],i|=(o&127)<<17,o<128)||(o=n[t.pos++],i|=(o&127)<<24,o<128)||(o=n[t.pos++],i|=(o&1)<<31,o<128))return Xe(r,i,e);throw new Error("Expected varint not more than 10 bytes")}function Xe(r,e,t){return t?e*4294967296+(r>>>0):(e>>>0)*4294967296+(r>>>0)}function hu(r,e){let t,n;if(r>=0?(t=r%4294967296|0,n=r/4294967296|0):(t=~(-r%4294967296),n=~(-r/4294967296),t^4294967295?t=t+1|0:(t=0,n=n+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),mu(t,n,e),yu(n,e)}function mu(r,e,t){t.buf[t.pos++]=r&127|128,r>>>=7,t.buf[t.pos++]=r&127|128,r>>>=7,t.buf[t.pos++]=r&127|128,r>>>=7,t.buf[t.pos++]=r&127|128,r>>>=7,t.buf[t.pos]=r&127}function yu(r,e){const t=(r&7)<<4;e.buf[e.pos++]|=t|((r>>>=3)?128:0),r&&(e.buf[e.pos++]=r&127|((r>>>=7)?128:0),r&&(e.buf[e.pos++]=r&127|((r>>>=7)?128:0),r&&(e.buf[e.pos++]=r&127|((r>>>=7)?128:0),r&&(e.buf[e.pos++]=r&127|((r>>>=7)?128:0),r&&(e.buf[e.pos++]=r&127)))))}function bi(r,e,t){const n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(n);for(let i=t.pos-1;i>=r;i--)t.buf[i+n]=t.buf[i]}function gu(r,e){for(let t=0;t<r.length;t++)e.writeVarint(r[t])}function vu(r,e){for(let t=0;t<r.length;t++)e.writeSVarint(r[t])}function xu(r,e){for(let t=0;t<r.length;t++)e.writeFloat(r[t])}function bu(r,e){for(let t=0;t<r.length;t++)e.writeDouble(r[t])}function wu(r,e){for(let t=0;t<r.length;t++)e.writeBoolean(r[t])}function Tu(r,e){for(let t=0;t<r.length;t++)e.writeFixed32(r[t])}function ku(r,e){for(let t=0;t<r.length;t++)e.writeSFixed32(r[t])}function Su(r,e){for(let t=0;t<r.length;t++)e.writeFixed64(r[t])}function Eu(r,e){for(let t=0;t<r.length;t++)e.writeSFixed64(r[t])}function zu(r,e,t){let n="",i=e;for(;i<t;){const o=r[i];let s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a>t)break;let l,u,c;a===1?o<128&&(s=o):a===2?(l=r[i+1],(l&192)===128&&(s=(o&31)<<6|l&63,s<=127&&(s=null))):a===3?(l=r[i+1],u=r[i+2],(l&192)===128&&(u&192)===128&&(s=(o&15)<<12|(l&63)<<6|u&63,(s<=2047||s>=55296&&s<=57343)&&(s=null))):a===4&&(l=r[i+1],u=r[i+2],c=r[i+3],(l&192)===128&&(u&192)===128&&(c&192)===128&&(s=(o&15)<<18|(l&63)<<12|(u&63)<<6|c&63,(s<=65535||s>=1114112)&&(s=null))),s===null?(s=65533,a=1):s>65535&&(s-=65536,n+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),n+=String.fromCharCode(s),i+=a}return n}function Fu(r,e,t){for(let n=0,i,o;n<e.length;n++){if(i=e.charCodeAt(n),i>55295&&i<57344)if(o)if(i<56320){r[t++]=239,r[t++]=191,r[t++]=189,o=i;continue}else i=o-55296<<10|i-56320|65536,o=null;else{i>56319||n+1===e.length?(r[t++]=239,r[t++]=191,r[t++]=189):o=i;continue}else o&&(r[t++]=239,r[t++]=191,r[t++]=189,o=null);i<128?r[t++]=i:(i<2048?r[t++]=i>>6|192:(i<65536?r[t++]=i>>12|224:(r[t++]=i>>18|240,r[t++]=i>>12&63|128),r[t++]=i>>6&63|128),r[t++]=i&63|128)}return t}class En extends ms{constructor(e){super(),e=e||{},this.dataProjection=new Zo({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:Dr,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,n,i){e.pos=t.geometry;const o=e.readVarint()+e.pos;let s=1,a=0,l=0,u=0,c=0,p=0;for(;e.pos<o;){if(!a){const f=e.readVarint();s=f&7,a=f>>3}if(a--,s===1||s===2)l+=e.readSVarint(),u+=e.readSVarint(),s===1&&c>p&&(i.push(c),p=c),n.push(l,u),c+=2;else if(s===7)c>p&&(n.push(n[p],n[p+1]),c+=2);else throw new Error("Invalid command found in the PBF")}c>p&&(i.push(c),p=c)}createFeature_(e,t,n){const i=t.type;if(i===0)return null;let o;const s=t.properties;let a;this.idProperty_?(a=s[this.idProperty_],delete s[this.idProperty_]):a=t.id,s[this.layerName_]=t.layer.name;const l=[],u=[];this.readRawGeometry_(e,t,l,u);const c=Ru(i,u.length);if(this.featureClass===Dr)o=new this.featureClass(c,l,u,2,s,a),o.transform(n.dataProjection);else{let p;if(c=="Polygon"){const h=Ho(l,u);p=h.length>1?new fs(l,"XY",h):new Xo(l,"XY",u)}else p=c==="Point"?new Wo(l,"XY"):c==="LineString"?new ps(l,"XY"):c==="MultiPoint"?new ds(l,"XY"):c==="MultiLineString"?new hs(l,"XY",u):null;const f=this.featureClass;o=new f,this.geometryName_&&o.setGeometryName(this.geometryName_);const d=ys(p,!1,n);o.setGeometry(d),a!==void 0&&o.setId(a),o.setProperties(s,!0)}return o}getType(){return"arraybuffer"}readFeatures(e,t){const n=this.layers_;t=this.adaptOptions(t);const i=tt(t.dataProjection);i.setWorldExtent(t.extent),t.dataProjection=i;const o=new fu(e),s=o.readFields(Cu,{}),a=[];for(const l in s){if(n&&!n.includes(l))continue;const u=s[l],c=u?[0,0,u.extent,u.extent]:null;i.setExtent(c);for(let p=0,f=u.length;p<f;++p){const d=Mu(o,u,p),h=this.createFeature_(o,d,t);h!==null&&a.push(h)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function Cu(r,e,t){if(r===3){const n={keys:[],values:[],features:[]},i=t.readVarint()+t.pos;t.readFields(Iu,n,i),n.length=n.features.length,n.length&&(e[n.name]=n)}}function Iu(r,e,t){if(r===15)e.version=t.readVarint();else if(r===1)e.name=t.readString();else if(r===5)e.extent=t.readVarint();else if(r===2)e.features.push(t.pos);else if(r===3)e.keys.push(t.readString());else if(r===4){let n=null;const i=t.readVarint()+t.pos;for(;t.pos<i;)r=t.readVarint()>>3,n=r===1?t.readString():r===2?t.readFloat():r===3?t.readDouble():r===4?t.readVarint64():r===5?t.readVarint():r===6?t.readSVarint():r===7?t.readBoolean():null;e.values.push(n)}}function Pu(r,e,t){if(r==1)e.id=t.readVarint();else if(r==2){const n=t.readVarint()+t.pos;for(;t.pos<n;){const i=e.layer.keys[t.readVarint()],o=e.layer.values[t.readVarint()];e.properties[i]=o}}else r==3?e.type=t.readVarint():r==4&&(e.geometry=t.pos)}function Mu(r,e,t){r.pos=e.features[t];const n=r.readVarint()+r.pos,i={layer:e,type:0,properties:{}};return r.readFields(Pu,i,n),i}function Ru(r,e){let t;return r===1?t=e===1?"Point":"MultiPoint":r===2?t=e===1?"LineString":"MultiLineString":r===3&&(t="Polygon"),t}function _u(r,e=512){return r.getExtent()?Kr({extent:r.getExtent(),tileSize:e,maxZoom:22}).getResolutions():ur}function Au(r,e){return e.accessToken||(e=Object.assign({},e),new URL(r).searchParams.forEach((n,i)=>{e.accessToken=n,e.accessTokenParam=i})),e}function ju(r,e,t="",n={},i=void 0){let o,s,a,l,u=!0;return typeof t!="string"&&!Array.isArray(t)?(a=t,l=a.source||a.layers,n=a):l=t,typeof n=="string"?(o=n,a={}):(o=n.styleUrl,a=n),a.updateSource===!1&&(u=!1),i||(i=a.resolutions),!o&&typeof e=="string"&&!e.trim().startsWith("{")&&(o=e),o&&(o=o.startsWith("data:")?location.href:to(o,a.accessToken),a=Au(o,a)),new Promise(function(c,p){no(e,a).then(function(f){if(f.version!=8)return p(new Error("glStyle version 8 required."));if(!(r instanceof Lr||r instanceof yt))return p(new Error("Can only apply to VectorLayer or VectorTileLayer"));const d=r instanceof yt?"vector":"geojson";if(l?Array.isArray(l)?s=f.layers.find(function(C){return C.id===l[0]}).source:s=l:(s=Object.keys(f.sources).find(function(C){return f.sources[C].type===d}),l=s),!s)return p(new Error(`No ${d} source found in the glStyle.`));function h(){if(!u)return Promise.resolve();if(r instanceof yt)return qu(f.sources[s],o,a).then(function(T){const I=r.getSource();I?T!==I&&(I.setTileUrlFunction(T.getTileUrlFunction()),typeof I.setUrls=="function"&&typeof T.getUrls=="function"&&I.setUrls(T.getUrls()),I.format_||(I.format_=T.format_),I.getAttributions()||I.setAttributions(T.getAttributions()),I.getTileLoadFunction()===Mi&&I.setTileLoadFunction(T.getTileLoadFunction()),Qo(I.getProjection(),T.getProjection())&&(I.tileGrid=T.getTileGrid())):r.setSource(T);const L=r.getSource().getTileGrid();!isFinite(r.getMaxResolution())&&!isFinite(r.getMinZoom())&&L.getMinZoom()>0&&r.setMaxResolution(Jl(Math.max(0,L.getMinZoom()-1e-12),L.getResolutions()))});const C=f.sources[s];let S=r.getSource();(!S||S.get("mapbox-source")!==C)&&(S=Vu(C,o,a));const j=r.getSource();return j?S!==j&&(j.getAttributions()||j.setAttributions(S.getAttributions()),j.format_||(j.format_=S.getFormat()),j.url_=S.getUrl()):r.setSource(S),Promise.resolve()}let g,m,P,z;function F(){if(!z&&(!f.sprite||m)){if(a.projection&&!i){const S=tt(a.projection).getUnits();S!=="m"&&(i=ur.map(j=>j/Jo[S]))}z=cu(r,f,l,i,m,P,(C,S=a.webfonts)=>nu(C,S),a.getImage),r.getStyle()?h().then(c).catch(p):p(new Error(`Nothing to show for source [${s}]`))}else z?(r.setStyle(z),h().then(c).catch(p)):p(new Error("Something went wrong trying to apply style."))}if(f.sprite){const C=new URL(Ul(f.sprite,a.accessToken,o||location.href));g=window.devicePixelRatio>=1.5?.5:1;const S=g==.5?"@2x":"";let j=C.origin+C.pathname+S+".json"+C.search;new Promise(function(T,I){nt("Sprite",j,a).then(T).catch(function(L){j=C.origin+C.pathname+".json"+C.search,nt("Sprite",j,a).then(T).catch(I)})}).then(function(T){if(T===void 0&&p(new Error("No sprites found.")),m=T,P=C.origin+C.pathname+S+".png"+C.search,a.transformRequest){const I=a.transformRequest(P,"SpriteImage")||P;(I instanceof Request||I instanceof Promise)&&(P=I)}F()}).catch(function(T){p(new Error(`Sprites cannot be loaded: ${j}: ${T.message}`))})}else F()}).catch(p)})}const wi={};function Du(r,e,t){e.layers.some(function(n){if(n.type==="background"){if(r instanceof Ii)return r.setBackground(function(i){return oo(n,i,t,{})}),!0;if(r instanceof Ko||r instanceof Yo)return r.getLayers().insertAt(0,$u(n,t,{})),!0}})}function Lu(r,e,t={}){return no(e,t).then(function(n){Du(r,n,t)})}function Nu(r,e){const t=r.bounds;if(t){const n=An([t[0],t[1]],e),i=An([t[2],t[3]],e);return[n[0],n[1],i[0],i[1]]}return tt(e).getExtent()}function Ou(r,e,t){const n=new Fs({tileJSON:e,tileSize:r.tileSize||e.tileSize||512}),i=n.getTileJSON(),o=n.getTileGrid(),s=tt(t.projection||"EPSG:3857"),a=Nu(i,s),l=s.getExtent(),u=i.minzoom||0,c=i.maxzoom||22,p={attributions:n.getAttributions(),projection:s,tileGrid:new Fi({origin:l?Si(l):o.getOrigin(0),extent:a||o.getExtent(),minZoom:u,resolutions:_u(s,e.tileSize).slice(0,c+1),tileSize:o.getTileSize(0)})};return Array.isArray(i.tiles)?p.urls=i.tiles:p.url=i.tiles,p}function oo(r,e,t,n){const i={id:r.id,type:r.type},o=r.layout||{},s=r.paint||{};i.paint=s;const a=ro(e,t.resolutions||ur);let l;const u=E(i,"paint","background-color",a,wi,n);return s["background-opacity"]!==void 0&&(l=E(i,"paint","background-opacity",a,wi,n)),o.visibility=="none"?void 0:Me(u,l)}function $u(r,e,t){const n=document.createElement("div");return n.className="ol-mapbox-style-background",n.style.position="absolute",n.style.width="100%",n.style.height="100%",new Ii({source:new es({}),render(i){const o=oo(r,i.viewState.resolution,e,t);return n.style.backgroundColor=o,n}})}function qu(r,e,t){return new Promise(function(n,i){Kl(r,e,t).then(function({tileJson:o,tileLoadFunction:s}){const a=Ou(r,o,t);a.tileLoadFunction=s,a.format=new En,n(new Yr(a))}).catch(i)})}function Gu(r){return`{bbox-${(r?r.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function Vu(r,e,t){const n=t.projection?new Ln({dataProjection:t.projection}):new Ln,i=r.data,o={};if(typeof i=="string"){const[a]=$t(i,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(a)){const u=(p,f,d)=>{const h=Gu(d);return a.replace(h,`${p.join(",")}`)},c=new yr({attributions:r.attribution,format:n,loader:(p,f,d,h,g)=>{const m=typeof u=="function"?u(p,f,d):u;nt("GeoJSON",m,t).then(P=>{const z=c.getFormat().readFeatures(P,{featureProjection:d});c.addFeatures(z),h(z)}).catch(P=>{c.removeLoadedExtent(p),g()})},strategy:ts});return c.set("mapbox-source",r),c}const l=new yr({attributions:r.attribution,format:n,url:a,loader:(u,c,p,f,d)=>{nt("GeoJSON",a,t).then(h=>{const g=l.getFormat().readFeatures(h,{featureProjection:p});l.addFeatures(g),f(g)}).catch(h=>{l.removeLoadedExtent(u),d()})}});return l}o.features=n.readFeatures(i,{featureProjection:"EPSG:3857"});const s=new yr(Object.assign({attributions:r.attribution,format:n},o));return s.set("mapbox-source",r),s}class Uu extends rs{constructor(e){super(jr.ERROR),this.error=e}}class Bu extends yt{constructor(e){const t="declutter"in e?e.declutter:!0,n=new Yr({state:"loading",format:new En});super({source:n,background:e.background===!1?null:e.background,declutter:t,className:e.className,opacity:e.opacity,visible:e.visible,zIndex:e.zIndex,minResolution:e.minResolution,maxResolution:e.maxResolution,minZoom:e.minZoom,maxZoom:e.maxZoom,renderOrder:e.renderOrder,renderBuffer:e.renderBuffer,renderMode:e.renderMode,map:e.map,updateWhileAnimating:e.updateWhileAnimating,updateWhileInteracting:e.updateWhileInteracting,preload:e.preload,useInterimTilesOnError:e.useInterimTilesOnError,properties:e.properties}),e.accessToken&&(this.accessToken=e.accessToken);const i=e.styleUrl,o=[ju(this,i,e.layers||e.source,{accessToken:this.accessToken})];this.getBackground()===void 0&&o.push(Lu(this,e.styleUrl,{accessToken:this.accessToken})),Promise.all(o).then(()=>{n.setState("ready")}).catch(s=>{this.dispatchEvent(new Uu(s)),this.getSource().setState("error")})}}const so="main";class Zu{mapId=so;vectorSourceFactory;constructor({references:e}){this.vectorSourceFactory=e.vectorSourceFactory}async getMapConfig(){return{projection:"EPSG:3857",initialView:{kind:"position",center:{x:848890,y:6793350},zoom:13},layers:[new pt({title:"OSM",visible:!0,isBaseLayer:!0,olLayer:new ns({source:new is})}),new pt({id:"inspire-us-kindergarten",title:"Kindertageseinrichtungen in NRW",visible:!0,olLayer:new Lr({style:new Re({image:new Ci({fill:new Ke({color:"blue"}),radius:5})}),source:this.vectorSourceFactory.createVectorSource({baseUrl:"https://ogc-api.nrw.de/inspire-us-kindergarten/v1",collectionId:"governmentalservice",crs:"http://www.opengis.net/def/crs/EPSG/0/3857",attributions:"<a href='https://www.govdata.de/dl-de/by-2-0'>Datenlizenz Deutschland - Namensnennung - Version 2.0</a>"})})}),new pt({id:"ogc_katasterbezirk",title:"Liegenschaftskatasterbezirke in NRW (viele Daten)",visible:!1,olLayer:new Lr({source:this.vectorSourceFactory.createVectorSource({baseUrl:"https://ogc-api.nrw.de/lika/v1",collectionId:"katasterbezirk",limit:1e3,crs:"http://www.opengis.net/def/crs/EPSG/0/3857",attributions:"<a href='https://www.govdata.de/dl-de/by-2-0'>Datenlizenz Deutschland - Namensnennung - Version 2.0</a>"})})}),new pt({title:"Abschnitte / ste mit Unfllen (Mapbox Style)",visible:!1,olLayer:new Bu({styleUrl:"https://demo.ldproxy.net/strassen/styles/default?f=mbs"})}),new pt({title:"Pendleratlas",visible:!0,olLayer:new yt({source:new Yr({url:"https://pendleratlas.statistikportal.de/_vector_tiles/2022/vg250/{z}/{x}/{y}.pbf",format:new En,projection:"EPSG:3857",attributions:`&copy; Statistische mter der Lnder ${new Date().getFullYear()} | GeoBasis-DE/BKG ${new Date().getFullYear()}`}),style:new Re({fill:new Ke({color:"rgba(173, 209, 158, 0.6)"}),stroke:new ht({color:"#2d7d9f",width:3})})})})]}}}class Hu{beforeRequest({target:e,options:t}){e.protocol==="https:"&&e.hostname==="ogc-api.nrw.de"&&t.headers.set("Authorization","Bearer 12345")}}const Xu={"ogc-api-app":{name:"ogc-api-app",services:{MapConfigProviderImpl:{name:"MapConfigProviderImpl",clazz:Zu,provides:[{name:"map.MapConfigProvider",qualifier:void 0}],references:{vectorSourceFactory:{name:"ogc-features.VectorSourceFactory",qualifier:void 0,all:!1}}},SampleTokenInterceptor:{name:"SampleTokenInterceptor",clazz:Hu,provides:[{name:"http.Interceptor",qualifier:void 0}],references:{}}},ui:{references:[]},properties:{}},"@open-pioneer/chakra-integration":{name:"@open-pioneer/chakra-integration",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime":{name:"@open-pioneer/runtime",services:{},ui:{references:[]},properties:{}},"@open-pioneer/react-utils":{name:"@open-pioneer/react-utils",services:{},ui:{references:[]},properties:{}},"@open-pioneer/http":{name:"@open-pioneer/http",services:{HttpServiceImpl:{name:"HttpServiceImpl",clazz:ss,provides:[{name:"http.HttpService",qualifier:"http.HttpService"}],references:{interceptors:{name:"http.Interceptor",qualifier:void 0,all:!0}}}},ui:{references:[]},properties:{}},"@open-pioneer/map":{name:"@open-pioneer/map",services:{MapRegistryImpl:{name:"MapRegistryImpl",clazz:os,provides:[{name:"map.MapRegistry",qualifier:void 0}],references:{providers:{name:"map.MapConfigProvider",qualifier:void 0,all:!0},httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[{name:"map.MapRegistry",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/theme":{name:"@open-pioneer/theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/ogc-features":{name:"@open-pioneer/ogc-features",services:{VectorSourceFactory:{name:"VectorSourceFactory",clazz:xs,provides:[{name:"ogc-features.VectorSourceFactory",qualifier:void 0}],references:{httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}},SearchSourceFactory:{name:"SearchSourceFactory",clazz:vs,provides:[{name:"ogc-features.SearchSourceFactory",qualifier:void 0}],references:{httpService:{name:"http.HttpService",qualifier:void 0,all:!1}}}},ui:{references:[]},properties:{}},"@open-pioneer/basemap-switcher":{name:"@open-pioneer/basemap-switcher",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map-navigation":{name:"@open-pioneer/map-navigation",services:{},ui:{references:[]},properties:{}},"@open-pioneer/toc":{name:"@open-pioneer/toc",services:{},ui:{references:[]},properties:{}},"@open-pioneer/base-theme":{name:"@open-pioneer/base-theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/core":{name:"@open-pioneer/core",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime-react-support":{name:"@open-pioneer/runtime-react-support",services:{},ui:{references:[]},properties:{}},"@open-pioneer/reactivity":{name:"@open-pioneer/reactivity",services:{},ui:{references:[]},properties:{}},"@open-pioneer/map-ui-components":{name:"@open-pioneer/map-ui-components",services:{},ui:{references:[]},properties:{}}},Wu=':root,:host{--ol-background-color: white;--ol-accent-background-color: #F5F5F5;--ol-subtle-background-color: rgba(128, 128, 128, .25);--ol-partial-background-color: rgba(255, 255, 255, .75);--ol-foreground-color: #333333;--ol-subtle-foreground-color: #666666;--ol-brand-color: #00AAFF}.ol-box{box-sizing:border-box;border-radius:2px;border:1.5px solid var(--ol-background-color);background-color:var(--ol-partial-background-color)}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:var(--ol-partial-background-color);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid var(--ol-subtle-foreground-color);border-top:none;color:var(--ol-foreground-color);font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-bar-inner{display:flex}.ol-scale-step-marker{width:1px;height:15px;background-color:var(--ol-foreground-color);float:right;z-index:10}.ol-scale-step-text{position:absolute;bottom:-5px;font-size:10px;z-index:11;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-text{position:absolute;font-size:12px;text-align:center;bottom:25px;color:var(--ol-foreground-color);text-shadow:-1.5px 0 var(--ol-partial-background-color),0 1.5px var(--ol-partial-background-color),1.5px 0 var(--ol-partial-background-color),0 -1.5px var(--ol-partial-background-color)}.ol-scale-singlebar{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid var(--ol-foreground-color)}.ol-scale-singlebar-even{background-color:var(--ol-subtle-foreground-color)}.ol-scale-singlebar-odd{background-color:var(--ol-background-color)}.ol-unsupported{display:none}.ol-viewport,.ol-unselectable{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-viewport canvas{all:unset;overflow:hidden}.ol-viewport{touch-action:pan-x pan-y}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.ol-control{position:absolute;background-color:var(--ol-subtle-background-color);border-radius:4px}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:var(--ol-subtle-foreground-color);font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:var(--ol-background-color);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:hover,.ol-control button:focus{text-decoration:none;outline:1px solid var(--ol-subtle-foreground-color);color:var(--ol-foreground-color)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution a{color:var(--ol-subtle-foreground-color);text-decoration:none}.ol-attribution ul{margin:0;padding:1px .5em;color:var(--ol-foreground-color);text-shadow:0 0 2px var(--ol-background-color);font-size:12px}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button{flex-shrink:0}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:var(--ol-partial-background-color)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:block}.ol-overviewmap .ol-overviewmap-map{border:1px solid var(--ol-subtle-foreground-color);height:150px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:0;left:0;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:var(--ol-subtle-background-color)}.ol-overviewmap-box{border:1.5px dotted var(--ol-subtle-foreground-color)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}.ol-overviewmap .ol-viewport:hover{cursor:pointer}.map-container .ol-viewport .ol-attribution{bottom:var(--map-padding-bottom);right:var(--map-padding-right)}',Ju=["en","de"];function Ku(r){switch(r){case"en":return Nn(()=>import("./CQRU2o-rqIdt.js"),[],import.meta.url).then(e=>e.default);case"de":return Nn(()=>import("./XAsebEBvbSkT.js"),[],import.meta.url).then(e=>e.default)}throw new Error(`Unsupported locale: '${r}'`)}const Yu=co(Wu),Qu=Object.freeze(Object.defineProperty({__proto__:null,loadMessages:Ku,locales:Ju,packages:Xu,styles:Yu},Symbol.toStringTag,{value:"Module"})),ec="ogc-api-app",tc=as.bind(void 0,ec);function rc(){const r=tc(),{map:e}=ls(so);return e&&W.jsx(us,{map:e,children:W.jsx(gr,{height:"100%",direction:"column",overflow:"hidden",children:W.jsx(jn,{title:W.jsx(In,{textAlign:"center",py:1,children:W.jsx(Dn,{size:"md",children:"Open Pioneer - OGC API Features and OGC API Tiles Sample"})}),children:W.jsx(gr,{flex:"1",direction:"column",position:"relative",children:W.jsxs(cs,{children:[W.jsx(vr,{position:"top-left",horizontalGap:20,verticalGap:20,children:W.jsx(In,{backgroundColor:"white",borderWidth:"1px",borderRadius:"lg",padding:2,boxShadow:"lg",children:W.jsx(jn,{title:W.jsx(Dn,{size:"md",children:r.formatMessage({id:"tocTitle"})}),children:W.jsx(gs,{basemapSwitcherProps:{allowSelectingEmptyBasemap:!0}})})})}),W.jsx(vr,{position:"top-right",horizontalGap:10,verticalGap:10,children:W.jsxs(po,{backgroundColor:"whiteAlpha.900",borderWidth:"1px",borderRadius:"lg",padding:2,boxShadow:"lg",maxWidth:"400px",children:[W.jsx(xr,{as:"b",children:"Description"}),W.jsx(xr,{children:"This application can be used to test OGC API Features and OGC API Tiles."}),W.jsx(xr,{children:"Vector Tiles cannot be reprojected and require the map to use the same projection. Currently all known MVT vector tile sets are using WebMercator, making them unusable in the Default Sample App which uses ETRS89/UTM zone 32N. This Sample App uses WebMercator."})]})}),W.jsx(vr,{position:"bottom-right",horizontalGap:10,verticalGap:30,children:W.jsxs(gr,{direction:"column",gap:1,padding:1,children:[W.jsx(bs,{}),W.jsx(ws,{}),W.jsx(Ts,{})]})})]})})})})})}const nc=fo({component:rc,theme:ho,appMetadata:Qu,async resolveConfig(r){const e=r.getAttribute("forced-locale");if(e)return{locale:e}}});customElements.define("ogc-api-app",nc);const ic=document.getElementsByTagName("body")[0];oc();function oc(){const r=window.location.search,t=new URLSearchParams(r).get("lang"),n=document.createElement("ogc-api-app");n.classList.add("full-height"),n.setAttribute("id","test"),t&&n.setAttribute("forced-locale",t),ic.appendChild(n)}
