var we=t=>{throw TypeError(t)};var xe=(t,e,i)=>e.has(t)||we("Cannot "+i);var f=(t,e,i)=>(xe(t,e,"read from private field"),i?i.call(t):e.get(t)),_=(t,e,i)=>e.has(t)?we("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),x=(t,e,i,r)=>(xe(t,e,"write to private field"),r?r.call(t,i):e.set(t,i),i),oe=(t,e,i)=>(xe(t,e,"access private method"),i);import{bO as mt,bP as St,y as Ue,br as He,x as De,bQ as Ge,bR as C,J as yt,bS as pt,aI as be,aH as _e,B as Rt,K as ye,bT as Et,av as bt,bU as We,b1 as Ze,bV as qe,bW as _t,bX as Lt,aO as At,a9 as Ye,b8 as xt,bY as It,az as Tt,bZ as Mt,ay as pe,A as Ot,b_ as me,b$ as Ke,aC as Ct,af as B,c0 as Ne,c1 as Re,c2 as ze,c3 as Ve,b3 as Pt,bN as vt,bb as wt,b4 as Ht,w as Dt,b5 as Nt,bM as Vt,r as je,aa as jt,b0 as Ft,ae as Bt,c4 as Ut,c5 as Fe}from"./BG1csYss1834.js";import{c as Gt,C as Wt,i as Zt}from"./BuzKODatzB5V.js";import{G as j}from"./CoUGgK57dLCV.js";function Ce(t,e){const i=(""+t).split("."),r=(""+e).split(".");for(let n=0;n<Math.max(i.length,r.length);n++){const s=parseInt(i[n]||"0",10),a=parseInt(r[n]||"0",10);if(s>a)return 1;if(a>s)return-1}return 0}function Pe(t,e){return Xe(t,e,[]).join("")}function Xe(t,e,i){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)i.push(t.nodeValue);else{let r;for(r=t.firstChild;r;r=r.nextSibling)Xe(r,e,i)}return i}function qt(t){return"documentElement"in t}function Yt(t){return new DOMParser().parseFromString(t,"application/xml")}function $e(t,e){return function(i,r){const n=t.call(this,i,r);n!==void 0&&r[r.length-1].push(n)}}function I(t,e,i){return function(r,n){const s=t.call(this,r,n);if(s!==void 0){const a=n[n.length-1],o=r.localName;let u;o in a?u=a[o]:(u=[],a[o]=u),u.push(s)}}}function c(t,e,i){return function(r,n){const s=t.call(this,r,n);if(s!==void 0){const a=n[n.length-1],o=r.localName;a[o]=s}}}function E(t,e,i){i=i!==void 0?i:{};let r,n;for(r=0,n=t.length;r<n;++r)i[t[r]]=e;return i}function Kt(t,e,i,r){let n;for(n=e.firstElementChild;n;n=n.nextElementSibling){const s=t[n.namespaceURI];if(s!==void 0){const a=s[n.localName];a!==void 0&&a.call(r,n,i)}}}function L(t,e,i,r,n){return r.push(t),Kt(e,i,r,n),r.pop()}class zt{read(e){if(!e)return null;if(typeof e=="string"){const i=Yt(e);return this.readFromDocument(i)}return qt(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let i=e.firstChild;i;i=i.nextSibling)if(i.nodeType==Node.ELEMENT_NODE)return this.readFromNode(i);return null}readFromNode(e){mt()}}const Xt="http://www.w3.org/1999/xlink";function ve(t){return t.getAttributeNS(Xt,"href")}function V(t){const e=/^\s*(true|1)|(false|0)\s*$/.exec(t);if(e)return e[1]!==void 0||!1}function J(t){const e=Pe(t,!1);return N(e)}function N(t){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);if(e)return parseFloat(e[1])}function Ie(t){const e=Pe(t,!1);return Ee(e)}function Ee(t){const e=/^\s*(\d+)\s*$/.exec(t);if(e)return parseInt(e[1],10)}function g(t){return Pe(t,!1).trim()}const b=[null,"http://www.opengis.net/wms"];function se(t){return Ce(t[0].version,"1.3")>=0}const $t=E(b,{Service:c(Ri),Capability:c(pi)}),ke={Request:c(Mi),Exception:c(Li),Layer:c(Ai)},kt=E(b,{...ke,UserDefinedSymbolization:c(Si)}),Qt=E(b,ke);class Jt extends zt{constructor(){super(),this.version=void 0}readFromNode(e){this.version=e.getAttribute("version").trim();const i=L({version:this.version},$t,e,[]);return i||null}}const Qe={Name:c(g),Title:c(g),Abstract:c(g),KeywordList:c(nt),OnlineResource:c(ve),ContactInformation:c(Ei),Fees:c(g),AccessConstraints:c(g)},ei=E(b,Qe),ti=E(b,{...Qe,LayerLimit:c(Ie),MaxWidth:c(Ie),MaxHeight:c(Ie)}),ii=E(b,{ContactPersonPrimary:c(bi),ContactPosition:c(g),ContactAddress:c(_i),ContactVoiceTelephone:c(g),ContactFacsimileTelephone:c(g),ContactElectronicMailAddress:c(g)}),ri=E(b,{ContactPerson:c(g),ContactOrganization:c(g)}),ni=E(b,{AddressType:c(g),Address:c(g),City:c(g),StateOrProvince:c(g),PostCode:c(g),Country:c(g)}),si=E(b,{Format:$e(g)}),Je={Name:c(g),Title:c(g),Abstract:c(g),KeywordList:c(nt),BoundingBox:I(it),Dimension:I(xi),Attribution:c(mi),AuthorityURL:I(Pi),Identifier:I(g),MetadataURL:I(vi),DataURL:I(W),FeatureListURL:I(W),Style:I(wi),Layer:I(Le)},et=E(b,{...Je,SRS:I(g),Extent:c(Ii),ScaleHint:I(Ti),LatLonBoundingBox:c((t,e)=>it(t,e,!1)),Layer:I(Le)}),tt=E(b,{...Je,CRS:I(g),EX_GeographicBoundingBox:c(yi),MinScaleDenominator:c(J),MaxScaleDenominator:c(J),Layer:I(Le)}),ai=E(b,{Title:c(g),OnlineResource:c(ve),LogoURL:c(rt)}),oi=E(b,{westBoundLongitude:c(J),eastBoundLongitude:c(J),southBoundLatitude:c(J),northBoundLatitude:c(J)}),ui=E(b,{GetCapabilities:c(Te),GetMap:c(Te),GetFeatureInfo:c(Te)}),ci=E(b,{Format:I(g),DCPType:I(Oi)}),li=E(b,{HTTP:c(Ci)}),di=E(b,{Get:c(W),Post:c(W)}),hi=E(b,{Name:c(g),Title:c(g),Abstract:c(g),LegendURL:I(rt),StyleSheetURL:c(W),StyleURL:c(W)}),gi=E(b,{Format:c(g),OnlineResource:c(ve)}),fi=E(b,{Keyword:$e(g)});function mi(t,e){return L({},ai,t,e)}function Si(t,e){return{SupportSLD:!!V(t.getAttribute("UserDefinedSymbolization")),UserLayer:!!V(t.getAttribute("UserLayer")),UserStyle:!!V(t.getAttribute("UserStyle")),RemoteWFS:!!V(t.getAttribute("RemoteWFS"))}}function it(t,e,i=!0){const r=[N(t.getAttribute("minx")),N(t.getAttribute("miny")),N(t.getAttribute("maxx")),N(t.getAttribute("maxy"))],n=[N(t.getAttribute("resx")),N(t.getAttribute("resy"))],s={extent:r,res:n};return i&&(se(e)?s.crs=t.getAttribute("CRS"):s.srs=t.getAttribute("SRS")),s}function yi(t,e){const i=L({},oi,t,e);if(!i)return;const r=i.westBoundLongitude,n=i.southBoundLatitude,s=i.eastBoundLongitude,a=i.northBoundLatitude;if(!(r===void 0||n===void 0||s===void 0||a===void 0))return[r,n,s,a]}function pi(t,e){return L({},se(e)?Qt:kt,t,e)}function Ri(t,e){return L({},se(e)?ti:ei,t,e)}function Ei(t,e){return L({},ii,t,e)}function bi(t,e){return L({},ri,t,e)}function _i(t,e){return L({},ni,t,e)}function Li(t,e){return L([],si,t,e)}function Ai(t,e){const i=L({},se(e)?tt:et,t,e);return i.Layer===void 0?Object.assign(i,Le(t,e)):i}function Le(t,e){const i=se(e),r=e[e.length-1],n=L({},i?tt:et,t,e);if(!n)return;let s=V(t.getAttribute("queryable"));s===void 0&&(s=r.queryable),n.queryable=s!==void 0?s:!1;let a=Ee(t.getAttribute("cascaded"));a===void 0&&(a=r.cascaded),n.cascaded=a;let o=V(t.getAttribute("opaque"));o===void 0&&(o=r.opaque),n.opaque=o!==void 0?o:!1;let u=V(t.getAttribute("noSubsets"));u===void 0&&(u=r.noSubsets),n.noSubsets=u!==void 0?u:!1;let l=N(t.getAttribute("fixedWidth"));l||(l=r.fixedWidth),n.fixedWidth=l;let d=N(t.getAttribute("fixedHeight"));d||(d=r.fixedHeight),n.fixedHeight=d;const m=["Style","AuthorityURL"];i?m.push("CRS"):m.push("SRS","Dimension"),m.forEach(function(y){if(y in r){const P=n[y]||[];n[y]=P.concat(r[y])}});const S=["BoundingBox","Attribution"];return i?S.push("Dimension","EX_GeographicBoundingBox","MinScaleDenominator","MaxScaleDenominator"):S.push("LatLonBoundingBox","ScaleHint","Extent"),S.forEach(function(y){if(!(y in n)){const P=r[y];n[y]=P}}),n}function xi(t,e){const i={name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol")};return se(e)&&Object.assign(i,{default:t.getAttribute("default"),multipleValues:V(t.getAttribute("multipleValues")),nearestValue:V(t.getAttribute("nearestValue")),current:V(t.getAttribute("current")),values:g(t)}),i}function Ii(t,e){return{name:t.getAttribute("name"),default:t.getAttribute("default"),nearestValue:V(t.getAttribute("nearestValue"))}}function Ti(t,e){return{min:N(t.getAttribute("min")),max:N(t.getAttribute("max"))}}function W(t,e){return L({},gi,t,e)}function Mi(t,e){return L({},ui,t,e)}function Oi(t,e){return L({},li,t,e)}function Ci(t,e){return L({},di,t,e)}function Te(t,e){return L({},ci,t,e)}function rt(t,e){const i=W(t,e);if(i){const r=[Ee(t.getAttribute("width")),Ee(t.getAttribute("height"))];return i.size=r,i}}function Pi(t,e){const i=W(t,e);if(i)return i.name=t.getAttribute("name"),i}function vi(t,e){const i=W(t,e);if(i)return i.type=t.getAttribute("type"),i}function wi(t,e){return L({},hi,t,e)}function nt(t,e){return L([],fi,t,e)}class Hi extends St{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const i=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,n=e.viewState,s=n.resolution,a=this.getLayer().getSource(),o=e.viewHints;let u=e.extent;if(i.extent!==void 0&&(u=Ue(u,He(i.extent,n.projection))),!o[De.ANIMATING]&&!o[De.INTERACTING]&&!Ge(u))if(a){const l=n.projection,d=a.getImage(u,s,r,l);d&&(this.loadImage(d)?this.image=d:d.getState()===C.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const i=this.frameState;if(!i)return null;const r=this.getLayer(),n=yt(i.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!pt(s,n))return null;const a=this.image.getExtent(),o=this.image.getImage(),u=be(a),l=Math.floor(o.width*((n[0]-a[0])/u));if(l<0||l>=o.width)return null;const d=_e(a),m=Math.floor(o.height*((a[3]-n[1])/d));return m<0||m>=o.height?null:this.getImageData(o,l,m)}renderFrame(e,i){const r=this.image,n=r.getExtent(),s=r.getResolution(),[a,o]=Array.isArray(s)?s:[s,s],u=r.getPixelRatio(),l=e.layerStatesArray[e.layerIndex],d=e.pixelRatio,m=e.viewState,S=m.center,y=m.resolution,P=d*a/(y*u),F=d*o/(y*u);this.prepareContainer(e,i);const H=this.context.canvas.width,M=this.context.canvas.height,p=this.getRenderContext(e);let R=!1,O=!0;if(l.extent){const K=He(l.extent,m.projection);O=Rt(K,e.extent),R=O&&!ye(K,e.extent),R&&this.clipUnrotated(p,e,K)}const v=r.getImage(),D=Et(this.tempTransform,H/2,M/2,P,F,0,u*(n[0]-S[0])/a,u*(S[1]-n[3])/o);this.renderedResolution=o*d/u;const T=v.width*D[0],Q=v.height*D[3];if(this.getLayer().getSource().getInterpolate()||(p.imageSmoothingEnabled=!1),this.preRender(p,e),O&&T>=.5&&Q>=.5){const K=D[4],z=D[5],w=l.opacity;w!==1&&(p.save(),p.globalAlpha=w),p.drawImage(v,0,0,+v.width,+v.height,K,z,T,Q),w!==1&&p.restore()}return this.postRender(this.context,e),R&&p.restore(),p.imageSmoothingEnabled=!0,this.container}}class Di extends bt{constructor(e){e=e||{},super(e)}}class Ni extends Di{constructor(e){super(e)}createRenderer(){return new Hi(this)}getData(e){return super.getData(e)}}function Oe(t){return Array.isArray(t)?Math.min(...t):t}class Vi extends We{constructor(e,i,r,n,s,a,o){let u=e.getExtent();u&&e.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0);let l=i.getExtent();l&&i.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);const d=l?Ue(r,l):r,m=Ze(d),S=qe(e,i,m,n),y=It,P=new _t(e,i,d,u,S*y,n),F=P.calculateSourceExtent(),H=Ge(F)?null:a(F,S,s),M=H?C.IDLE:C.EMPTY,p=H?H.getPixelRatio():1;super(r,n,p,M),this.targetProj_=i,this.maxSourceExtent_=u,this.triangulation_=P,this.targetResolution_=n,this.targetExtent_=r,this.sourceImage_=H,this.sourcePixelRatio_=p,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==C.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==C.LOADED){const i=be(this.targetExtent_)/this.targetResolution_,r=_e(this.targetExtent_)/this.targetResolution_;this.canvas_=Lt(i,r,this.sourcePixelRatio_,Oe(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==C.IDLE){this.state=C.LOADING,this.changed();const e=this.sourceImage_.getState();e==C.LOADED||e==C.ERROR?this.reproject_():(this.sourceListenerKey_=At(this.sourceImage_,Ye.CHANGE,i=>{const r=this.sourceImage_.getState();(r==C.LOADED||r==C.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){xt(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Y=4,Me={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class ji extends Ct{constructor(e,i){super(e),this.image=i}}class Fi extends Tt{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const i=this.getResolutions();if(i){const r=Mt(i,e,0);e=i[r]}return e}getImage(e,i,r,n){const s=this.getProjection();if(!s||!n||pe(s,n))return s&&(n=s),this.getImageInternal(e,i,r,n);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&pe(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==i&&Ot(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Vi(s,n,e,i,r,(a,o,u)=>this.getImageInternal(a,o,u,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,i,r,n){if(this.loader){const s=st(e,i,r,1),a=this.findNearestResolution(i);if(this.image&&(this.static_||this.wantedProjection_===n&&(this.wantedExtent_&&ye(this.wantedExtent_,s)||ye(this.image.getExtent(),s))&&(this.wantedResolution_&&Oe(this.wantedResolution_)===a||Oe(this.image.getResolution())===a)))return this.image;this.wantedProjection_=n,this.wantedExtent_=s,this.wantedResolution_=a,this.image=new We(s,a,r,this.loader),this.image.addEventListener(Ye.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const i=e.target;let r;switch(i.getState()){case C.LOADING:this.loading=!0,r=Me.IMAGELOADSTART;break;case C.LOADED:this.loading=!1,r=Me.IMAGELOADEND;break;case C.ERROR:this.loading=!1,r=Me.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new ji(r,i))}}function Bi(t,e){t.getImage().src=e}function st(t,e,i,r){const n=e/i,s=Ze(t),a=me(be(t)/n,Y),o=me(_e(t)/n,Y),u=me((r-1)*a/2,Y),l=a+2*u,d=me((r-1)*o/2,Y),m=o+2*d;return Ke(s,n,0,[l,m])}const at="1.3.0",Be=[101,101];function ot(t,e,i,r,n){n.WIDTH=i[0],n.HEIGHT=i[1];const s=r.getAxisOrientation(),a=Ce(n.VERSION,"1.3")>=0;n[a?"CRS":"SRS"]=r.getCode();const o=a&&s.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return n.BBOX=o.join(","),Re(t,n)}function Ui(t,e,i,r,n,s,a){s=Object.assign({REQUEST:"GetMap"},s);const o=e/i,u=[Ve(be(t)/o,Y),Ve(_e(t)/o,Y)];if(i!=1)switch(a){case"geoserver":const d=90*i+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+d:s.FORMAT_OPTIONS="dpi:"+d;break;case"mapserver":s.MAP_RESOLUTION=90*i;break;case"carmentaserver":case"qgis":s.DPI=90*i;break;default:throw new Error("Unknown `serverType` configured")}return ot(n,t,u,r,s)}function ut(t,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:at,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},t)}function Gi(t){const e=t.hidpi===void 0?!0:t.hidpi,i=B(t.projection||"EPSG:3857"),r=t.ratio||1.5,n=t.load||ze,s=t.crossOrigin??null;return(a,o,u)=>{a=st(a,o,u,r),u!=1&&(!e||t.serverType===void 0)&&(u=1);const l=Ui(a,o,u,i,t.url,ut(t.params,"GetMap"),t.serverType),d=new Image;return d.crossOrigin=s,n(d,l).then(m=>({image:m,extent:a,pixelRatio:u}))}}function Wi(t,e,i){if(t.url===void 0)return;const r=B(t.projection||"EPSG:3857"),n=Ke(e,i,0,Be),s={QUERY_LAYERS:t.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(s,ut(t.params,"GetFeatureInfo"),t.params);const a=Ne((e[0]-n[0])/i,Y),o=Ne((n[3]-e[1])/i,Y),u=Ce(s.VERSION,"1.3")>=0;return s[u?"I":"X"]=a,s[u?"J":"Y"]=o,ot(t.url,n,Be,r,s)}function Zi(t,e){if(t.url===void 0)return;const i={SERVICE:"WMS",VERSION:at,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e!==void 0){const r=B(t.projection||"EPSG:3857").getMetersPerUnit()||1,n=28e-5;i.SCALE=e*r/n}if(Object.assign(i,t.params),t.params!==void 0&&i.LAYER===void 0){const r=i.LAYERS;if(!(!Array.isArray(r)||r.length!==1))return;i.LAYER=r}return Re(t.url,i)}class qi extends Fi{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:Bi,this.params_=Object.assign({},e.params),this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(e,i,r,n){const s=B(r),a=this.getProjection();a&&a!==s&&(i=qe(a,s,e,i),e=Pt(e,s,a));const o={url:this.url_,params:{...this.params_,...n},projection:a||s};return Wi(o,e,i)}getLegendUrl(e,i){return Zi({url:this.url_,params:{...this.params_,...i}},e)}getParams(){return this.params_}getImageInternal(e,i,r,n){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==n)&&(this.loaderProjection_=n,this.loader=Gi({crossOrigin:this.crossOrigin_,params:this.params_,projection:n,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,a)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,a),ze(s))})),super.getImageInternal(e,i,r,n))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}async function Yi(t,e,i){const r=await e.fetch(t,{signal:i});if(!r.ok)throw new Error("Request failed: "+r.status);return await r.text()}var q;class ct{constructor(e){_(this,q);x(this,q,e)}destroy(){for(const e of f(this,q))e.destroy();x(this,q,[])}getItems(e){return this.getSublayers(e)}getSublayers(e){return f(this,q).slice()}getRecursiveLayers(e){return vt({from:this,sortByDisplayOrder:e?.sortByDisplayOrder,filter:e?.filter})}__getRawSublayers(){return f(this,q)}}q=new WeakMap;const Se=Gt("map:WMSLayer");var ee,X,te,ie,ue,ce,le,de,re,U,lt,dt,ht,gt;class Ki extends wt{constructor(i){const r=new Ni;super({...i,olLayer:r});_(this,U);_(this,ee);_(this,X);_(this,te);_(this,ie);_(this,ue);_(this,ce);_(this,le,new AbortController);_(this,de);_(this,re);const n=new qi({...i.sourceOptions,url:i.url,params:{...i.sourceOptions?.params},imageLoadFunction:(s,a)=>oe(this,U,gt).call(this,s,a).catch(o=>{Se.error(`Failed to load tile at '${a}'`,o)})});x(this,ee,i.url),x(this,ue,i.fetchCapabilities??!0),x(this,ie,n),x(this,te,r),x(this,X,new ct(ft(i.sublayers))),x(this,de,Ht(()=>oe(this,U,dt).call(this),{equal(s,a){return s.length===a.length&&s.every((o,u)=>o===a[u])}})),x(this,re,Dt(()=>[f(this,de).value],([s])=>{oe(this,U,lt).call(this,s)},{immediate:!0}))}destroy(){f(this,le).abort(),x(this,re,Wt(f(this,re))),super.destroy()}get type(){return"wms"}get legend(){}get url(){return f(this,ee)}get layers(){}get sublayers(){return f(this,X)}get capabilities(){return f(this,ce)}__attachToMap(i){super.__attachToMap(i);for(const n of f(this,X).getSublayers())n.__attach(i,this,this);const r=(n,s)=>{for(const a of n){const o=a.sublayers.getSublayers();o.length?r(o,s):a.name&&s.push(a)}};f(this,ue)&&oe(this,U,ht).call(this).then(n=>{Nt(()=>{const a=new Jt().read(n);x(this,ce,a);const o=[];r(f(this,X).getSublayers(),o);for(const u of o){const l=Xi(a,u.name);u.__setLegend(l)}})}).catch(n=>{if(Zt(n)){Se.debug(`Layer ${this.id} has been destroyed before fetching capabilities`);return}Se.error(`Failed to fetch WMS capabilities for layer ${this.id}`,n)})}}ee=new WeakMap,X=new WeakMap,te=new WeakMap,ie=new WeakMap,ue=new WeakMap,ce=new WeakMap,le=new WeakMap,de=new WeakMap,re=new WeakMap,U=new WeakSet,lt=function(i){f(this,ie).updateParams({LAYERS:i});const r=i.length===0?null:f(this,ie);f(this,te).getSource()!==r&&f(this,te).setSource(r)},dt=function(){const i=[],r=n=>{if(!n.visible)return;const s=n.sublayers.__getRawSublayers();if(s.length)for(const a of s)r(a);else n.name&&i.push(n.name)};for(const n of this.sublayers.__getRawSublayers())r(n);return i},ht=async function(){const i=this.map.__sharedDependencies.httpService,r=`${f(this,ee)}?LANGUAGE=ger&SERVICE=WMS&REQUEST=GetCapabilities`;return Yi(r,i,f(this,le).signal)},gt=async function(i,r){const n=this.map.__sharedDependencies.httpService,s=i.getImage(),a=await n.fetch(r);if(!a.ok)throw new Error(`Request failed with status ${a.status}.`);const o=await a.blob(),u=URL.createObjectURL(o),l=()=>{URL.revokeObjectURL(u),s.removeEventListener("load",l),s.removeEventListener("error",l)};s.addEventListener("load",l),s.addEventListener("error",l),s.src=u};var $,k,he,ge,fe,ne;class zi extends Vt{constructor(i){super(i);_(this,$);_(this,k);_(this,he);_(this,ge,je());_(this,fe);_(this,ne);x(this,he,i.name),x(this,ne,je(i.visible??!0)),x(this,fe,new ct(ft(i.sublayers)))}get type(){return"wms-sublayer"}get name(){return f(this,he)}get layers(){}get sublayers(){return f(this,fe)}get parent(){const i=f(this,$);if(!i)throw new Error(`WMS sublayer ${this.id} has not been attached to its parent yet.`);return i}get parentLayer(){const i=f(this,k);if(!i)throw new Error(`WMS sublayer ${this.id} has not been attached to its parent yet.`);return i}get legend(){return f(this,ge).value}get visible(){return f(this,ne).value}__attach(i,r,n){if(super.__attachToMap(i),f(this,$))throw new Error(`WMS sublayer '${this.id}' has already been attached to parent '${f(this,$).id}'`);if(x(this,$,n),f(this,k))throw new Error(`WMS sublayer '${this.id}' has already been attached to parent layer '${f(this,k).id}'`);x(this,k,r);for(const s of this.sublayers.__getRawSublayers())s.__attach(i,r,this)}__setLegend(i){f(this,ge).value=i}setVisible(i){f(this,ne).value=i}}$=new WeakMap,k=new WeakMap,he=new WeakMap,ge=new WeakMap,fe=new WeakMap,ne=new WeakMap;function ft(t=[]){const e=[];try{for(const i of t)e.push(new zi(i));return e}catch(i){for(;e.length;)e.pop()?.destroy();throw new Error("Failed to construct sublayers.",{cause:i})}}function Xi(t,e){const r=t?.Capability?.Layer;let n;const s=a=>{for(const o of a)if(o?.Name===e){const l=o.Style;if(!l||!l.length){Se.debug("No style in WMS layer capabilities - giving up.");return}n=l[0].LegendURL?.[0]?.OnlineResource}else o.Layer&&s(o.Layer)};return r&&s(r.Layer),n}const ir=Ki;class $i extends jt{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function ki(t,e,i){const r=[],n=[],s=[],a=[],o=[];i=i!==void 0?i:[];const u="SupportedCRS",l="TileMatrix",d="Identifier",m="ScaleDenominator",S="TopLeftCorner",y="TileWidth",P="TileHeight",F=t[u],H=B(F),M=H.getMetersPerUnit(),p=H.getAxisOrientation().startsWith("ne");return t[l].sort(function(R,O){return O[m]-R[m]}),t[l].forEach(function(R){let O;if(i.length>0?O=i.find(function(v){return R[d]==v[l]?!0:R[d].includes(":")?!1:t[d]+":"+R[d]===v[l]}):O=!0,O){n.push(R[d]);const v=R[m]*28e-5/M,D=R[y],T=R[P];p?s.push([R[S][1],R[S][0]]):s.push(R[S]),r.push(v),a.push(D==T?D:[D,T]),o.push([R.MatrixWidth,R.MatrixHeight])}}),new $i({extent:e,origins:s,resolutions:r,matrixIds:n,tileSizes:a,sizes:o})}class rr extends Bt{constructor(e){const i=e.requestEncoding!==void 0?e.requestEncoding:"KVP",r=e.tileGrid;let n=e.urls;n===void 0&&e.url!==void 0&&(n=Ut(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:n,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=i,this.setKey(this.getKeyForDimensions_()),n&&n.length>0&&(this.tileUrlFunction=Fe(n.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const i=e.join(`
`);this.setTileUrlFunction(Fe(e.map(this.createFromWMTSTemplate.bind(this))),i)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const i in this.dimensions_)e.push(i+"-"+this.dimensions_[i]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const i=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};i=="KVP"&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=i=="KVP"?Re(e,r):e.replace(/\{(\w+?)\}/g,function(a,o){return o.toLowerCase()in r?r[o.toLowerCase()]:a});const n=this.tileGrid,s=this.dimensions_;return function(a,o,u){if(!a)return;const l={TileMatrix:n.getMatrixId(a[0]),TileCol:a[1],TileRow:a[2]};Object.assign(l,s);let d=e;return i=="KVP"?d=Re(d,l):d=d.replace(/\{(\w+?)\}/g,function(m,S){return encodeURIComponent(l[S])}),d}}}function nr(t,e){const r=t.Contents.Layer?.find(function(h){return h.Identifier==e.layer});if(!r)return null;const n=t.Contents.TileMatrixSet;let s;r.TileMatrixSetLink.length>1?"projection"in e?s=r.TileMatrixSetLink.findIndex(function(h){const Z=n.find(function(Ae){return Ae.Identifier==h.TileMatrixSet}).SupportedCRS,ae=B(Z),G=B(e.projection);return ae&&G?pe(ae,G):Z==e.projection}):s=r.TileMatrixSetLink.findIndex(function(h){return h.TileMatrixSet==e.matrixSet}):s=0,s<0&&(s=0);const a=r.TileMatrixSetLink[s].TileMatrixSet,o=r.TileMatrixSetLink[s].TileMatrixSetLimits;let u=r.Format[0];"format"in e&&(u=e.format),s=r.Style.findIndex(function(h){return"style"in e?h.Title==e.style:h.isDefault}),s<0&&(s=0);const l=r.Style[s].Identifier,d={};"Dimension"in r&&r.Dimension.forEach(function(h,A,Z){const ae=h.Identifier;let G=h.Default;G===void 0&&(G=h.Value[0]),d[ae]=G});const S=t.Contents.TileMatrixSet.find(function(h){return h.Identifier==a});let y;const P=S.SupportedCRS;if(P&&(y=B(P)),"projection"in e){const h=B(e.projection);h&&(!y||pe(h,y))&&(y=h)}let F=!1;const H=y.getAxisOrientation().startsWith("ne");let M=S.TileMatrix[0],p={MinTileCol:0,MinTileRow:0,MaxTileCol:M.MatrixWidth-1,MaxTileRow:M.MatrixHeight-1};if(o){p=o[o.length-1];const h=S.TileMatrix.find(A=>A.Identifier===p.TileMatrix||S.Identifier+":"+A.Identifier===p.TileMatrix);h&&(M=h)}const R=M.ScaleDenominator*28e-5/y.getMetersPerUnit(),O=H?[M.TopLeftCorner[1],M.TopLeftCorner[0]]:M.TopLeftCorner,v=M.TileWidth*R,D=M.TileHeight*R;let T=S.BoundingBox;T&&H&&(T=[T[1],T[0],T[3],T[2]]);let Q=[O[0]+v*p.MinTileCol,O[1]-D*(1+p.MaxTileRow),O[0]+v*(1+p.MaxTileCol),O[1]-D*p.MinTileRow];if(T!==void 0&&!ye(T,Q)){const h=r.WGS84BoundingBox,A=B("EPSG:4326").getExtent();if(Q=T,h)F=h[0]===A[0]&&h[2]===A[2];else{const Z=Ft(T,S.SupportedCRS,"EPSG:4326");F=Z[0]-1e-10<=A[0]&&Z[2]+1e-10>=A[2]}}const K=ki(S,Q,o),z=[];let w=e.requestEncoding;if(w=w!==void 0?w:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata){const h=t.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let A=0,Z=h.length;A<Z;++A)if(h[A].Constraint){const G=h[A].Constraint.find(function(Ae){return Ae.name=="GetEncoding"}).AllowedValues.Value;if(w===""&&(w=G[0]),w==="KVP")G.includes("KVP")&&z.push(h[A].href);else break}else h[A].href&&(w="KVP",z.push(h[A].href))}return z.length===0&&(w="REST",r.ResourceURL.forEach(function(h){h.resourceType==="tile"&&(u=h.format,z.push(h.template))})),{urls:z,layer:e.layer,matrixSet:a,format:u,projection:y,requestEncoding:w,tileGrid:K,style:l,dimensions:d,wrapX:F,crossOrigin:e.crossOrigin}}function sr(t){return j({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M156,40a12,12,0,0,1-12,12H112a12,12,0,0,1,0-24h32A12,12,0,0,1,156,40ZM144,204H112a12,12,0,0,0,0,24h32a12,12,0,0,0,0-24ZM204,52V72a12,12,0,0,0,24,0V48a20,20,0,0,0-20-20H184a12,12,0,0,0,0,24Zm12,48a12,12,0,0,0-12,12v32a12,12,0,0,0,24,0V112A12,12,0,0,0,216,100ZM40,156a12,12,0,0,0,12-12V112a12,12,0,0,0-24,0v32A12,12,0,0,0,40,156Zm32,48H52V184a12,12,0,0,0-24,0v24a20,20,0,0,0,20,20H72a12,12,0,0,0,0-24ZM72,28H48A20,20,0,0,0,28,48V72a12,12,0,0,0,24,0V52H72a12,12,0,0,0,0-24ZM240,204H228V192a12,12,0,0,0-24,0v12H192a12,12,0,0,0,0,24h12v12a12,12,0,0,0,24,0V228h12a12,12,0,0,0,0-24Z"},child:[]}]})(t)}function ar(t){return j({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M32,64a8,8,0,0,1,8-8H216a8,8,0,0,1,0,16H40A8,8,0,0,1,32,64Zm8,72h72a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Zm88,48H40a8,8,0,0,0,0,16h88a8,8,0,0,0,0-16Zm109.66,2.34L217.36,166A40,40,0,1,0,206,177.36l20.3,20.3a8,8,0,0,0,11.32-11.32Z"},child:[]}]})(t)}function or(t){return j({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216,42H72A14,14,0,0,0,58,56V74H40A14,14,0,0,0,26,88V200a14,14,0,0,0,14,14H184a14,14,0,0,0,14-14V182h18a14,14,0,0,0,14-14V56A14,14,0,0,0,216,42ZM70,56a2,2,0,0,1,2-2H216a2,2,0,0,1,2,2v67.57L204.53,110.1a14,14,0,0,0-19.8,0l-21.42,21.41L117.9,86.1a14,14,0,0,0-19.8,0L70,114.2ZM186,200a2,2,0,0,1-2,2H40a2,2,0,0,1-2-2V88a2,2,0,0,1,2-2H58v82a14,14,0,0,0,14,14H186Zm30-30H72a2,2,0,0,1-2-2V131.17l36.58-36.58a2,2,0,0,1,2.83,0l49.66,49.66a6,6,0,0,0,8.49,0l25.65-25.66a2,2,0,0,1,2.83,0l22,22V168A2,2,0,0,1,216,170ZM162,84a10,10,0,1,1,10,10A10,10,0,0,1,162,84Z"},child:[]}]})(t)}function ur(t){return j({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M222,128a6,6,0,0,1-6,6H40a6,6,0,0,1,0-12H216A6,6,0,0,1,222,128ZM40,70H216a6,6,0,0,0,0-12H40a6,6,0,0,0,0,12ZM216,186H40a6,6,0,0,0,0,12H216a6,6,0,0,0,0-12Z"},child:[]}]})(t)}function cr(t){return j({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M214.67,74H198V40a6,6,0,0,0-6-6H64a6,6,0,0,0-6,6V74H41.33C28.47,74,18,83.87,18,96v80a6,6,0,0,0,6,6H58v34a6,6,0,0,0,6,6H192a6,6,0,0,0,6-6V182h34a6,6,0,0,0,6-6V96C238,83.87,227.53,74,214.67,74ZM70,46H186V74H70ZM186,210H70V158H186Zm40-40H198V152a6,6,0,0,0-6-6H64a6,6,0,0,0-6,6v18H30V96c0-5.51,5.08-10,11.33-10H214.67C220.92,86,226,90.49,226,96Zm-28-54a10,10,0,1,1-10-10A10,10,0,0,1,198,116Z"},child:[]}]})(t)}function lr(t){return j({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M233.91,74.79,181.22,22.1a14,14,0,0,0-19.8,0L22.09,161.41a14,14,0,0,0,0,19.8L74.78,233.9a14,14,0,0,0,19.8,0L233.91,94.59A14,14,0,0,0,233.91,74.79ZM225.42,86.1,86.1,225.41h0a2,2,0,0,1-2.83,0L30.58,172.73a2,2,0,0,1,0-2.83L64,136.48l27.76,27.76a6,6,0,1,0,8.48-8.48L72.48,128,96,104.48l27.76,27.76a6,6,0,0,0,8.48-8.48L104.48,96,128,72.49l27.76,27.75a6,6,0,0,0,8.48-8.48L136.49,64,169.9,30.59a2,2,0,0,1,2.83,0l52.69,52.68A2,2,0,0,1,225.42,86.1Z"},child:[]}]})(t)}function dr(t){return j({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216,50H40a6,6,0,0,0,0,12H50V208a14,14,0,0,0,14,14H192a14,14,0,0,0,14-14V62h10a6,6,0,0,0,0-12ZM194,208a2,2,0,0,1-2,2H64a2,2,0,0,1-2-2V62H194ZM82,24a6,6,0,0,1,6-6h80a6,6,0,0,1,0,12H88A6,6,0,0,1,82,24Z"},child:[]}]})(t)}function hr(t){return j({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M88,24V16a8,8,0,0,1,16,0v8a8,8,0,0,1-16,0ZM16,104h8a8,8,0,0,0,0-16H16a8,8,0,0,0,0,16ZM124.42,39.16a8,8,0,0,0,10.74-3.58l8-16a8,8,0,0,0-14.31-7.16l-8,16A8,8,0,0,0,124.42,39.16Zm-96,81.69-16,8a8,8,0,0,0,7.16,14.31l16-8a8,8,0,1,0-7.16-14.31ZM219.31,184a16,16,0,0,1,0,22.63l-12.68,12.68a16,16,0,0,1-22.63,0L132.7,168,115,214.09c0,.1-.08.21-.13.32a15.83,15.83,0,0,1-14.6,9.59l-.79,0a15.83,15.83,0,0,1-14.41-11L32.8,52.92A16,16,0,0,1,52.92,32.8L213,85.07a16,16,0,0,1,1.41,29.8l-.32.13L168,132.69ZM208,195.31,156.69,144h0a16,16,0,0,1,4.93-26l.32-.14,45.95-17.64L48,48l52.2,159.86,17.65-46c0-.11.08-.22.13-.33a16,16,0,0,1,11.69-9.34,16.72,16.72,0,0,1,3-.28,16,16,0,0,1,11.3,4.69L195.31,208Z"},child:[]}]})(t)}function gr(t){return j({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M228.92,49.69a8,8,0,0,0-6.86-1.45L160.93,63.52,99.58,32.84a8,8,0,0,0-5.52-.6l-64,16A8,8,0,0,0,24,56V200a8,8,0,0,0,9.94,7.76l61.13-15.28,61.35,30.68A8.15,8.15,0,0,0,160,224a8,8,0,0,0,1.94-.24l64-16A8,8,0,0,0,232,200V56A8,8,0,0,0,228.92,49.69ZM104,52.94l48,24V203.06l-48-24ZM40,62.25l48-12v127.5l-48,12Zm176,131.5-48,12V78.25l48-12Z"},child:[]}]})(t)}function fr(t){return j({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M53.92,34.62A8,8,0,1,0,42.08,45.38l48.2,53L36.68,152A15.89,15.89,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31l50.4-50.39,47.69,52.46a8,8,0,1,0,11.84-10.76Zm63,93.12L68,176.69,51.31,160l49.75-49.74ZM48,179.31,76.69,208H48Zm48,25.38L79.32,188l48.41-48.41,15.89,17.48ZM227.32,73.37,182.63,28.69a16,16,0,0,0-22.63,0L118.33,70.36a8,8,0,0,0,11.32,11.31L136,75.31,152.69,92,145,99.69A8,8,0,1,0,156.31,111l7.69-7.69L180.69,120l-9,9A8,8,0,0,0,183,140.34L227.32,96A16,16,0,0,0,227.32,73.37ZM192,108.69,147.32,64l24-24L216,84.69Z"},child:[]}]})(t)}function mr(t){return j({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM51.31,160,136,75.31,152.69,92,68,176.68ZM48,179.31,76.69,208H48Zm48,25.38L79.31,188,164,103.31,180.69,120Zm96-96L147.31,64l24-24L216,84.68Z"},child:[]}]})(t)}export{hr as P,ir as W,zt as X,ar as a,ur as b,or as c,cr as d,fr as e,mr as f,lr as g,sr as h,dr as i,gr as j,c as k,I as l,E as m,ve as n,$e as o,L as p,Ie as q,g as r,J as s,nr as t,rr as u,Yi as v,$i as w};
