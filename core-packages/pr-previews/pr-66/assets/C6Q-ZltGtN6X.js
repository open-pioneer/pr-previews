var E=t=>{throw TypeError(t)};var w=(t,n,s)=>n.has(t)||E("Cannot "+s);var p=(t,n,s)=>(w(t,n,"read from private field"),s?s.call(t):n.get(t)),v=(t,n,s)=>n.has(t)?E("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(t):n.set(t,s),c=(t,n,s,r)=>(w(t,n,"write to private field"),r?r.call(t,s):n.set(t,s),s);import{p as q,q as I,j as e,d as _,r as d,P as b,Q as L,R as H,S as U,a as O,b as D}from"./BDSkedxQL-YV.js";import{E as G}from"./vOBnYnib6xFk.js";import{u as V,I as K}from"./BBqZuIpGOykZ.js";import{I as y}from"./BBOfnrDe2AAt.js";import{C as N,H as P}from"./5stHmKxIU7Tc.js";import{V as Q}from"./C0hHtFCAuNhL.js";import{T as Y}from"./CeUxMt2o2frV.js";import{F as C}from"./DbKSOxf4U0_D.js";import{F}from"./WHJqEeOJ0jCx.js";import{B as g}from"./C-3gFyvvFlJ-.js";import{H as $}from"./DjPh_fjIHlsf.js";import{A as J,u as W,F as X}from"./BV1D5stxe15_.js";import{u as Z}from"./B0WlhuaTcrRe.js";import{F as ee}from"./DrD7mCLjNnbP.js";import{B as te}from"./CNWuYlzDx_4w.js";import"./CJWy3CnFOLh6.js";var ne=q("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),j=I(function(n,s){var r,l;const{placement:a="left",...h}=n,m=V(),i=m.field,A={[a==="left"?"insetStart":"insetEnd"]:"0",width:(r=i?.height)!=null?r:i?.h,height:(l=i?.height)!=null?l:i?.h,fontSize:i?.fontSize,...m.element};return e.jsx(ne,{ref:s,__css:A,...h})});j.id="InputElement";j.displayName="InputElement";var T=I(function(n,s){const{className:r,...l}=n,a=_("chakra-input__left-element",r);return e.jsx(j,{ref:s,placement:"left",className:a,...l})});T.id="InputLeftElement";T.displayName="InputLeftElement";var k=I(function(n,s){const{className:r,...l}=n,a=_("chakra-input__right-element",r);return e.jsx(j,{ref:s,placement:"right",className:a,...l})});k.id="InputRightElement";k.displayName="InputRightElement";function se({doLogin:t,doFail:n,wasLoggedIn:s}){const[r,l]=d.useState(""),[a,h]=d.useState(""),[m,i]=d.useState(!1),[S,A]=d.useState(),[M,z]=d.useState(s),B=f=>{f.preventDefault();const R=t(r,a);A(R||""),z(!1)};return e.jsx(N,{p:5,children:e.jsxs(Q,{as:"form",onSubmit:B,spacing:4,children:[e.jsx(P,{as:"h1",textAlign:"center",children:"Login"}),e.jsxs(Y,{textAlign:"center",children:["Please enter your user name and password to authenticate.",e.jsx("br",{}),"Note: credentials are ",'"admin"'," / ",'"admin"']}),S&&e.jsxs(b,{status:"error",children:[e.jsx(L,{}),e.jsx(H,{children:S})]}),M&&e.jsxs(b,{status:"info",mb:5,children:[e.jsx(L,{}),e.jsxs(U,{children:["Logout successful.",e.jsx("br",{}),"You can use the form below to log in again."]})]}),e.jsxs(C,{children:[e.jsx(F,{children:"User name"}),e.jsx(y,{placeholder:"User name",value:r,onChange:f=>l(f.target.value),autoComplete:"username"})]}),e.jsxs(C,{children:[e.jsx(F,{children:"Password"}),e.jsxs(K,{children:[e.jsx(y,{pr:"4.5rem",type:m?"text":"password",placeholder:"Enter password",value:a,onChange:f=>h(f.target.value),autoComplete:"current-password"}),e.jsx(k,{width:"4.5rem",children:e.jsx(g,{h:"1.75rem",size:"sm",onClick:()=>i(!m),children:m?"Hide":"Show"})})]})]}),e.jsxs($,{children:[e.jsx(g,{colorScheme:"red",onClick:n,children:"Let it fail!"}),e.jsx(g,{type:"submit",children:"Login"})]})]})})}var o,u,x;class re extends G{constructor(){super();v(this,o,{kind:"pending"});v(this,u);v(this,x,!1);c(this,u,setTimeout(()=>{c(this,o,{kind:"not-authenticated"}),this.emit("changed")},500))}destroy(){clearTimeout(p(this,u)),c(this,u,void 0)}getAuthState(){return p(this,o)}getLoginBehavior(){const s=(a,h)=>{if(a==="admin"&&h==="admin")c(this,o,{kind:"authenticated",sessionInfo:{userId:"admin",userName:"Arnold Administrator"}}),c(this,x,!0),this.emit("changed");else return"Invalid user name or password!"},r=()=>{c(this,o,{kind:"error",error:new Error("Login failed!")}),this.emit("changed")};return{kind:"fallback",Fallback:()=>d.createElement(se,{doLogin:s,doFail:r,wasLoggedIn:p(this,x)})}}logout(){(p(this,o).kind==="authenticated"||p(this,o).kind==="pending")&&(c(this,o,{kind:"not-authenticated"}),clearTimeout(p(this,u)),c(this,u,void 0),this.emit("changed"))}}o=new WeakMap,u=new WeakMap,x=new WeakMap;const ie={"auth-app":{name:"auth-app",services:{TestAuthPlugin:{name:"TestAuthPlugin",clazz:re,provides:[{name:"authentication.AuthPlugin",qualifier:void 0}],references:{}}},ui:{references:[{name:"authentication.AuthService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/runtime":{name:"@open-pioneer/runtime",services:{},ui:{references:[]},properties:{}},"@open-pioneer/chakra-integration":{name:"@open-pioneer/chakra-integration",services:{},ui:{references:[]},properties:{}},"@open-pioneer/core":{name:"@open-pioneer/core",services:{},ui:{references:[]},properties:{}},"@open-pioneer/authentication":{name:"@open-pioneer/authentication",services:{AuthServiceImpl:{name:"AuthServiceImpl",clazz:J,provides:[{name:"authentication.AuthService",qualifier:void 0}],references:{plugin:{name:"authentication.AuthPlugin",qualifier:void 0,all:!1}}}},ui:{references:[{name:"authentication.AuthService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/base-theme":{name:"@open-pioneer/base-theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime-react-support":{name:"@open-pioneer/runtime-react-support",services:{},ui:{references:[]},properties:{}}},ae="",oe=[];function le(t){throw new Error(`Unsupported locale: '${t}'`)}const ce=O(ae),ue=Object.freeze(Object.defineProperty({__proto__:null,loadMessages:le,locales:oe,packages:ie,styles:ce},Symbol.toStringTag,{value:"Module"})),pe="auth-app",me=Z.bind(void 0,pe);function de(){const t=me("authentication.AuthService"),n=W(t),s=()=>{t.logout()};return n.kind==="not-authenticated"||n.kind==="pending"?null:e.jsx(g,{colorScheme:"red",onClick:s,children:"Log out"})}function he(){return e.jsx(X,{errorFallback:fe,children:e.jsxs(N,{p:5,children:[e.jsx(P,{as:"h1",children:"Authenticated"}),"This is the actual content of the app. Authentication was successful.",e.jsx(ee,{pt:5,flexDirection:"row",justifyContent:"center",children:e.jsx(de,{})})]})})}function fe(t){return e.jsxs(e.Fragment,{children:[e.jsx(te,{margin:2,color:"red",children:t.error.message}),e.jsx(g,{margin:2,onClick:()=>window.location.reload(),children:"reload"})]})}const ge=D({component:he,appMetadata:ue});customElements.define("auth-app",ge);
