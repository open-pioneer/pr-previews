var E=t=>{throw TypeError(t)};var k=(t,n,s)=>n.has(t)||E("Cannot "+s);var p=(t,n,s)=>(k(t,n,"read from private field"),s?s.call(t):n.get(t)),x=(t,n,s)=>n.has(t)?E("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(t):n.set(t,s),c=(t,n,s,r)=>(k(t,n,"write to private field"),r?r.call(t,s):n.set(t,s),s);import{n as U,h as S,j as e,l as F,r as m,V as q,H as P,R as w,U as _,W as D,X as H,a as V,O as G,b as K}from"./CYZ7khv4DcGF.js";import{E as W}from"./vOBnYnib6xFk.js";import{u as X,I as Y}from"./DWM3CRFodm5U.js";import{C as N}from"./DWKfDpFVYxxT.js";import{T as $}from"./BQSun6DldMtT.js";import{F as b}from"./Cjh9EF-Jwxs9.js";import{F as L}from"./BjfbegHNPFhj.js";import{I as y}from"./C1GjK3yrjfdP.js";import{B as d}from"./5EJZye4qYx87.js";import{H as J}from"./DYQzGZL0tP1g.js";import{A as Q,u as Z,F as ee}from"./bdshPnlMqmve.js";import{_ as C}from"./CmsKOCeNyeyo.js";import{u as te}from"./KiofL265efcS.js";import{F as ne}from"./D-9rzZGHG6UU.js";const se=U("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),j=S(function(n,s){const{placement:r="left",...l}=n,i=X(),o=i.field,v={[r==="left"?"insetStart":"insetEnd"]:"0",width:o?.height??o?.h,height:o?.height??o?.h,fontSize:o?.fontSize,...i.element};return e.jsx(se,{ref:s,__css:v,...l})});j.id="InputElement";j.displayName="InputElement";const T=S(function(n,s){const{className:r,...l}=n,i=F("chakra-input__left-element",r);return e.jsx(j,{ref:s,placement:"left",className:i,...l})});T.id="InputLeftElement";T.displayName="InputLeftElement";const A=S(function(n,s){const{className:r,...l}=n,i=F("chakra-input__right-element",r);return e.jsx(j,{ref:s,placement:"right",className:i,...l})});A.id="InputRightElement";A.displayName="InputRightElement";function re({doLogin:t,doFail:n,wasLoggedIn:s}){const[r,l]=m.useState(""),[i,o]=m.useState(""),[g,v]=m.useState(!1),[I,M]=m.useState(),[z,R]=m.useState(s),O=h=>{h.preventDefault();const B=t(r,i);M(B||""),R(!1)};return e.jsx(N,{p:5,children:e.jsxs(q,{as:"form",onSubmit:O,spacing:4,children:[e.jsx(P,{as:"h1",textAlign:"center",children:"Login"}),e.jsxs($,{textAlign:"center",children:["Please enter your user name and password to authenticate.",e.jsx("br",{}),"Note: credentials are ",'"admin"'," / ",'"admin"']}),I&&e.jsxs(w,{status:"error",children:[e.jsx(_,{}),e.jsx(D,{children:I})]}),z&&e.jsxs(w,{status:"info",mb:5,children:[e.jsx(_,{}),e.jsxs(H,{children:["Logout successful.",e.jsx("br",{}),"You can use the form below to log in again."]})]}),e.jsxs(b,{children:[e.jsx(L,{children:"User name"}),e.jsx(y,{placeholder:"User name",value:r,onChange:h=>l(h.target.value),autoComplete:"username"})]}),e.jsxs(b,{children:[e.jsx(L,{children:"Password"}),e.jsxs(Y,{children:[e.jsx(y,{pr:"4.5rem",type:g?"text":"password",placeholder:"Enter password",value:i,onChange:h=>o(h.target.value),autoComplete:"current-password"}),e.jsx(A,{width:"4.5rem",children:e.jsx(d,{h:"1.75rem",size:"sm",onClick:()=>v(!g),children:g?"Hide":"Show"})})]})]}),e.jsxs(J,{children:[e.jsx(d,{colorScheme:"red",onClick:n,children:"Let it fail!"}),e.jsx(d,{type:"submit",children:"Login"})]})]})})}var a,u,f;class ie extends W{constructor(){super();x(this,a,{kind:"pending"});x(this,u);x(this,f,!1);c(this,u,setTimeout(()=>{c(this,a,{kind:"not-authenticated"}),this.emit("changed")},500))}destroy(){clearTimeout(p(this,u)),c(this,u,void 0)}getAuthState(){return p(this,a)}getLoginBehavior(){const s=(i,o)=>{if(i==="admin"&&o==="admin")c(this,a,{kind:"authenticated",sessionInfo:{userId:"admin",userName:"Arnold Administrator"}}),c(this,f,!0),this.emit("changed");else return"Invalid user name or password!"},r=()=>{c(this,a,{kind:"error",error:new Error("Login failed!")}),this.emit("changed")};return{kind:"fallback",Fallback:()=>m.createElement(re,{doLogin:s,doFail:r,wasLoggedIn:p(this,f)})}}logout(){(p(this,a).kind==="authenticated"||p(this,a).kind==="pending")&&(c(this,a,{kind:"not-authenticated"}),clearTimeout(p(this,u)),c(this,u,void 0),this.emit("changed"))}}a=new WeakMap,u=new WeakMap,f=new WeakMap;const ae={"auth-app":{name:"auth-app",services:{TestAuthPlugin:{name:"TestAuthPlugin",clazz:ie,provides:[{name:"authentication.AuthPlugin",qualifier:void 0}],references:{}}},ui:{references:[{name:"authentication.AuthService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/chakra-integration":{name:"@open-pioneer/chakra-integration",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime":{name:"@open-pioneer/runtime",services:{},ui:{references:[]},properties:{}},"@open-pioneer/core":{name:"@open-pioneer/core",services:{},ui:{references:[]},properties:{}},"@open-pioneer/authentication":{name:"@open-pioneer/authentication",services:{AuthServiceImpl:{name:"AuthServiceImpl",clazz:Q,provides:[{name:"authentication.AuthService",qualifier:void 0}],references:{plugin:{name:"authentication.AuthPlugin",qualifier:void 0,all:!1}}}},ui:{references:[{name:"authentication.AuthService",qualifier:void 0,all:!1}]},properties:{}},"@open-pioneer/base-theme":{name:"@open-pioneer/base-theme",services:{},ui:{references:[]},properties:{}},"@open-pioneer/runtime-react-support":{name:"@open-pioneer/runtime-react-support",services:{},ui:{references:[]},properties:{}}},oe="",ce=["en","de"];function le(t){switch(t){case"en":return C(()=>import("./P9WplnIxWHzS.js"),[],import.meta.url).then(n=>n.default);case"de":return C(()=>import("./z2D46c5wMnzO.js"),[],import.meta.url).then(n=>n.default)}throw new Error(`Unsupported locale: '${t}'`)}const ue=V(oe),pe=Object.freeze(Object.defineProperty({__proto__:null,loadMessages:le,locales:ce,packages:ae,styles:ue},Symbol.toStringTag,{value:"Module"})),me="auth-app",he=te.bind(void 0,me);function de(){const t=he("authentication.AuthService"),n=Z(t),s=()=>{t.logout()};return n.kind==="not-authenticated"||n.kind==="pending"?null:e.jsx(d,{colorScheme:"red",onClick:s,children:"Log out"})}function fe(){return e.jsx(ee,{errorFallback:ge,children:e.jsxs(N,{p:5,children:[e.jsx(P,{as:"h1",children:"Authenticated"}),"This is the actual content of the app. Authentication was successful.",e.jsx(ne,{pt:5,flexDirection:"row",justifyContent:"center",children:e.jsx(de,{})})]})})}function ge(t){return e.jsxs(e.Fragment,{children:[e.jsx(G,{margin:2,color:"red",children:t.error.message}),e.jsx(d,{margin:2,onClick:()=>window.location.reload(),children:"reload"})]})}const xe=K({component:fe,appMetadata:pe});customElements.define("auth-app",xe);
