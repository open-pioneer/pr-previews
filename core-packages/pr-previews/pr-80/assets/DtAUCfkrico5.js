import{n as C,u as X,a as Y}from"./bgg7NsiHtd-1.js";import{ai as F,W as G,k as q,aj as z,ak as Z,al as k,am as J,an as Q,ao as tt,ap as O,aq as M,ar as et,as as st,at as ot,au as at,av as nt,aw as it,ac as v,d as rt,r as E,g as S,j as m,w as ct,v as lt,ax as N,ay as ut,az as dt}from"./Ct2cL4NPGWPh.js";import{a as A}from"./LkaQJSyPl0Nt.js";var gt=Q("toast").parts("group","root","title","description","actionTrigger","closeTrigger"),I=gt.build(),f=z({getRegionId:e=>`toast-group:${e}`,getRegionEl:(e,a)=>f.getById(e,`toast-group:${a}`),getRootId:e=>`toast:${e.id}`,getRootEl:e=>f.getById(e,f.getRootId(e)),getTitleId:e=>`toast:${e.id}:title`,getDescriptionId:e=>`toast:${e.id}:description`,getCloseTriggerId:e=>`toast${e.id}:close`});function x(e,a){return e.filter(t=>t.state.context.placement===a)}var U={info:5e3,error:5e3,success:2e3,loading:1/0,DEFAULT:5e3};function w(e,a){return e??U[a]??U.DEFAULT}function pt(e,a){const t=e.offsets,s=typeof t=="string"?{left:t,right:t,bottom:t,top:t}:t,r=e.dir==="rtl",i=a.replace("-start",r?"-right":"-left").replace("-end",r?"-left":"-right"),d=i.includes("right"),p=i.includes("left"),l={position:"fixed",pointerEvents:e.count>0?void 0:"none",display:"flex",flexDirection:"column","--gap":`${e.gap}px`,"--first-height":`${e.heights[0]?.height||0}px`,zIndex:it};let n="center";if(d&&(n="flex-end"),p&&(n="flex-start"),l.alignItems=n,i.includes("top")){const o=s.top;l.top=`max(env(safe-area-inset-top, 0px), ${o})`}if(i.includes("bottom")){const o=s.bottom;l.bottom=`max(env(safe-area-inset-bottom, 0px), ${o})`}if(!i.includes("left")){const o=s.right;l.insetInlineEnd=`calc(env(safe-area-inset-right, 0px) + ${o})`}if(!i.includes("right")){const o=s.left;l.insetInlineStart=`calc(env(safe-area-inset-left, 0px) + ${o})`}return l}function ft(e,a){const[t]=e.placement.split("-"),s=!e.frontmost,r=!e.stacked,i={position:"absolute",pointerEvents:"auto","--opacity":"0","--remove-delay":`${e.removeDelay}ms`,"--duration":`${e.type==="loading"?Number.MAX_SAFE_INTEGER:e.duration}ms`,"--initial-height":`${e.height}px`,"--offset":`${e.offset}px`,"--index":e.index,"--z-index":e.zIndex,"--lift-amount":"calc(var(--lift) * var(--gap))","--y":"100%","--x":"0"},d=p=>Object.assign(i,p);return t==="top"?d({top:"0","--sign":"-1","--y":"-100%","--lift":"1"}):t==="bottom"&&d({bottom:"0","--sign":"1","--y":"100%","--lift":"-1"}),e.mounted&&(d({"--y":"0","--opacity":"1"}),e.stacked&&d({"--y":"calc(var(--lift) * var(--offset))","--height":"var(--initial-height)"})),a||d({"--opacity":"0",pointerEvents:"none"}),s&&r&&(d({"--base-scale":"var(--index) * 0.05 + 1","--y":"calc(var(--lift-amount) * var(--index))","--scale":"calc(-1 * var(--base-scale))","--height":"var(--first-height)"}),a||d({"--y":"calc(var(--sign) * 40%)"})),s&&e.stacked&&!a&&d({"--y":"calc(var(--lift) * var(--offset) + var(--lift) * -100%)"}),e.frontmost&&!a&&d({"--y":"calc(var(--lift) * -100%)"}),i}function ht(e,a){const t={position:"absolute",inset:"0",scale:"1 2",pointerEvents:a?"none":"auto"},s=r=>Object.assign(t,r);return e.frontmost&&!a&&s({height:"calc(var(--initial-height) + 80%)"}),t}function mt(e,a){return{position:"absolute",left:"0",height:"calc(var(--gap) + 2px)",bottom:"100%",width:"100%"}}function Tt(e,a,t){function s(){return nt(e)?e.getState():e}function r(o){return x(s().context.toasts,o)}function i(o){const c=s().context.toasts;return c.length?!!c.find(u=>u.id==o):!1}function d(o){const c=`toast:${at()}`,u=o.id?o.id:c;return i(u)||a({type:"ADD_TOAST",toast:{...o,id:u}}),u}function p(o,c){return i(o)&&a({type:"UPDATE_TOAST",id:o,toast:c}),o}function l(o){const{id:c}=o;return(c?i(c):!1)&&c!=null?p(c,o):d(o)}function n(o){o==null?a("DISMISS_ALL"):i(o)&&a({type:"DISMISS_TOAST",id:o})}return{getCount(){return s().context.count},getPlacements(){const c=s().context.toasts.map(u=>u.state.context.placement);return Array.from(new Set(c))},getToastsByPlacement:r,isVisible:i,create:d,update:p,upsert:l,dismiss:n,remove(o){o==null?a("REMOVE_ALL"):i(o)&&a({type:"REMOVE_TOAST",id:o})},dismissByPlacement(o){r(o).forEach(u=>n(u.id))},loading(o){return l({...o,type:"loading"})},success(o){return l({...o,type:"success"})},error(o){return l({...o,type:"error"})},promise(o,c,u={}){const g=l({...u,...c.loading,type:"loading"});return O(o).then(h=>{const T=O(c.success,h);l({...u,...T,id:g,type:"success"})}).catch(h=>{const T=O(c.error,h);l({...u,...T,id:g,type:"error"})}).finally(()=>{c.finally?.()}),g},pause(o){o==null?a("PAUSE_ALL"):i(o)&&a({type:"PAUSE_TOAST",id:o})},resume(o){o==null?a("RESUME_ALL"):i(o)&&a({type:"RESUME_TOAST",id:o})},getGroupProps(o){const{placement:c,label:u="Notifications"}=o,g=s(),h=g.context.hotkey.join("+").replace(/Key/g,"").replace(/Digit/g,""),[T,P="center"]=c.split("-");return t.element({...I.group.attrs,dir:g.context.dir,tabIndex:-1,"aria-label":`${c} ${u} ${h}`,id:f.getRegionId(c),"data-placement":c,"data-side":T,"data-align":P,"aria-live":"polite",role:"region",style:pt(g.context,c),onMouseMove(){a({type:"REGION.POINTER_ENTER",placement:c})},onMouseLeave(){a({type:"REGION.POINTER_LEAVE",placement:c})},onFocus(y){a({type:"REGION.FOCUS",target:y.relatedTarget})},onBlur(y){g.context.isFocusWithin&&!tt(y.currentTarget,y.relatedTarget)&&a({type:"REGION.BLUR"})}})},subscribe(o){const c=s();return J(c.context.toasts,()=>{const g=r(c.context.placement).map(h=>h.getState().context);o(g)})}}}var{not:yt,and:Et,or:vt}=ot;function It(e){const{type:a="info",duration:t,id:s="1",placement:r="bottom",removeDelay:i=200,...d}=e,p=F(d),l=w(t,a);return G({id:s,context:{id:s,type:a,remaining:l,duration:l,removeDelay:i,createdAt:Date.now(),placement:r,...p,height:0,offset:0,frontmost:!1,mounted:!1,index:-1,zIndex:0},initial:a==="loading"?"visible:persist":"visible",on:{UPDATE:[{guard:Et("hasTypeChanged","isChangingToLoading"),target:"visible:persist",actions:["setContext"]},{guard:vt("hasDurationChanged","hasTypeChanged"),target:"visible:updating",actions:["setContext"]},{actions:["setContext"]}],MEASURE:{actions:["measureHeight"]}},entry:["invokeOnVisible"],activities:["trackHeight"],states:{"visible:updating":{tags:["visible","updating"],after:{0:"visible"}},"visible:persist":{tags:["visible","paused"],on:{RESUME:{guard:yt("isLoadingType"),target:"visible",actions:["setCreatedAt"]},DISMISS:"dismissing"}},visible:{tags:["visible"],after:{VISIBLE_DURATION:"dismissing"},on:{DISMISS:"dismissing",PAUSE:{target:"visible:persist",actions:"setRemainingDuration"}}},dismissing:{entry:"invokeOnDismiss",after:{REMOVE_DELAY:{target:"unmounted",actions:"notifyParentToRemove"}}},unmounted:{entry:"invokeOnUnmount",type:"final"}}},{activities:{trackHeight(n,o,{self:c}){let u;return M(()=>{const g=f.getRootEl(n);if(!g)return;n.mounted=!0;const h=et(g,"[data-ghost]");st(h.length!==2,"[toast] No ghost element found in toast. Render the `ghostBefore` and `ghostAfter` elements");const T=()=>{const W=g.style.height;g.style.height="auto";const L=g.getBoundingClientRect().height;g.style.height=W,n.height=L,c.sendParent({type:"UPDATE_HEIGHT",id:c.id,height:L,placement:n.placement})};T();const P=f.getWin(n),y=new P.MutationObserver(T);y.observe(g,{childList:!0,subtree:!0,characterData:!0}),u=()=>y.disconnect()}),()=>u?.()}},guards:{isChangingToLoading:(n,o)=>o.toast?.type==="loading",isLoadingType:n=>n.type==="loading",hasTypeChanged:(n,o)=>o.toast?.type!=null&&o.toast.type!==n.type,hasDurationChanged:(n,o)=>o.toast?.duration!=null&&o.toast.duration!==n.duration},delays:{VISIBLE_DURATION:n=>n.remaining,REMOVE_DELAY:n=>n.removeDelay},actions:{measureHeight(n,o,{self:c}){M(()=>{const u=f.getRootEl(n);if(!u)return;n.mounted=!0;const g=u.style.height;u.style.height="auto";const h=u.getBoundingClientRect().height;u.style.height=g,n.height=h,c.sendParent({type:"UPDATE_HEIGHT",id:c.id,height:h,placement:n.placement})})},setRemainingDuration(n){n.remaining-=Date.now()-n.createdAt},setCreatedAt(n){n.createdAt=Date.now()},notifyParentToRemove(n,o,{self:c}){c.sendParent({type:"REMOVE_TOAST",id:c.id})},invokeOnDismiss(n){n.onStatusChange?.({status:"dismissing"})},invokeOnUnmount(n){n.onStatusChange?.({status:"unmounted"})},invokeOnVisible(n){n.onStatusChange?.({status:"visible"})},setContext(n,o){const c=o.toast?.duration,u=o.toast?.type??n.type,g=w(c,u);Object.assign(n,{...o.toast,duration:g,remaining:g})}}})}function St(e){const a=F(e);return G({id:"toaster",initial:a.overlap?"overlap":"stack",context:{dir:"ltr",max:Number.MAX_SAFE_INTEGER,gap:16,pauseOnPageIdle:!1,hotkey:["altKey","KeyT"],offsets:"1rem",placement:"bottom",removeDelay:200,...a,toasts:[],lastFocusedEl:null,isFocusWithin:!1,heights:[]},computed:{count:t=>t.toasts.length},activities:["trackDocumentVisibility","trackHotKeyPress"],watch:{toasts:["collapsedIfEmpty","setDismissableBranch"]},exit:["removeToasts","clearDismissableBranch","clearLastFocusedEl"],on:{PAUSE_TOAST:{actions:["pauseToast"]},PAUSE_ALL:{actions:["pauseToasts"]},RESUME_TOAST:{actions:["resumeToast"]},RESUME_ALL:{actions:["resumeToasts"]},ADD_TOAST:{guard:"isWithinRange",actions:["createToast","syncToastIndex"]},UPDATE_TOAST:{actions:["updateToast"]},DISMISS_TOAST:{actions:["dismissToast"]},DISMISS_ALL:{actions:["dismissToasts"]},REMOVE_TOAST:{actions:["removeToast","syncToastIndex","syncToastOffset"]},REMOVE_ALL:{actions:["removeToasts"]},UPDATE_HEIGHT:{actions:["syncHeights","syncToastOffset"]},"DOC.HOTKEY":{actions:["focusRegionEl"]},"REGION.BLUR":[{guard:"isOverlapping",target:"overlap",actions:["resumeToasts","restoreLastFocusedEl"]},{actions:["resumeToasts","restoreLastFocusedEl"]}]},states:{stack:{entry:["expandToasts"],on:{"REGION.POINTER_LEAVE":[{guard:"isOverlapping",target:"overlap",actions:["resumeToasts"]},{actions:["resumeToasts"]}],"REGION.OVERLAP":{target:"overlap"},"REGION.FOCUS":{actions:["setLastFocusedEl","pauseToasts"]},"REGION.POINTER_ENTER":{actions:["pauseToasts"]}}},overlap:{entry:["collapseToasts"],on:{"REGION.STACK":{target:"stack"},"REGION.POINTER_ENTER":{target:"stack",actions:["pauseToasts"]},"REGION.FOCUS":{target:"stack",actions:["setLastFocusedEl","pauseToasts"]}}}}},{guards:{isWithinRange:t=>t.toasts.length<t.max,isOverlapping:t=>!!t.overlap},activities:{trackHotKeyPress(t,s,{send:r}){return k(document,"keydown",d=>{t.hotkey.every(l=>d[l]||d.code===l)&&r({type:"DOC.HOTKEY"})},{capture:!0})},trackDocumentVisibility(t,s,{send:r}){if(!t.pauseOnPageIdle)return;const i=f.getDoc(t);return k(i,"visibilitychange",()=>{r(i.visibilityState==="hidden"?"PAUSE_ALL":"RESUME_ALL")})}},actions:{setDismissableBranch(t){const r=x(t.toasts,t.placement).length>0;if(!r){t._cleanup?.();return}if(r&&t._cleanup)return;const i=()=>f.getRegionEl(t,t.placement);t._cleanup=Z(i,{defer:!0})},clearDismissableBranch(t){t._cleanup?.()},focusRegionEl(t){queueMicrotask(()=>{f.getRegionEl(t,t.placement)?.focus()})},expandToasts(t){b(t,s=>{s.state.context.stacked=!0})},collapseToasts(t){b(t,s=>{s.state.context.stacked=!1})},collapsedIfEmpty(t,s,{send:r}){!t.overlap||t.toasts.length>1||r("REGION.OVERLAP")},pauseToast(t,s,{self:r}){r.sendChild("PAUSE",s.id)},pauseToasts(t){t.toasts.forEach(s=>s.send("PAUSE"))},resumeToast(t,s,{self:r}){r.sendChild("RESUME",s.id)},resumeToasts(t){t.toasts.forEach(s=>s.send("RESUME"))},measureToasts(t){t.toasts.forEach(s=>s.send("MEASURE"))},createToast(t,s,{self:r,getState:i}){const d={placement:t.placement,duration:t.duration,removeDelay:t.removeDelay,...s.toast,dir:t.dir,getRootNode:t.getRootNode,stacked:i().matches("stack")},p=It(d),l=r.spawn(p);t.toasts=[l,...t.toasts]},updateToast(t,s,{self:r}){r.sendChild({type:"UPDATE",toast:s.toast},s.id)},dismissToast(t,s,{self:r}){r.sendChild("DISMISS",s.id)},dismissToasts(t){t.toasts.forEach(s=>s.send("DISMISS"))},removeToast(t,s,{self:r}){r.stopChild(s.id),t.toasts=t.toasts.filter(i=>i.id!==s.id),t.heights=t.heights.filter(i=>i.id!==s.id)},removeToasts(t,s,{self:r}){t.toasts.forEach(i=>r.stopChild(i.id)),t.toasts=[],t.heights=[]},syncHeights(t,s){const r=t.heights.find(i=>i.id===s.id);if(r)r.height=s.height,r.placement=s.placement;else{const i={id:s.id,height:s.height,placement:s.placement};t.heights=[i,...t.heights]}},syncToastIndex(t){b(t,(s,r,i)=>{s.state.context.index=r,s.state.context.frontmost=r===0,s.state.context.zIndex=i.length-r})},syncToastOffset(t,s){const r=s.placement??t.placement;b({...t,placement:r},i=>{const d=Math.max(t.heights.findIndex(l=>l.id===i.id),0),p=t.heights.reduce((l,n,o)=>o>=d?l:l+n.height,0);i.state.context.offset=d*t.gap+p})},setLastFocusedEl(t,s){t.isFocusWithin||!s.target||(t.isFocusWithin=!0,t.lastFocusedEl=q(s.target))},restoreLastFocusedEl(t){t.isFocusWithin=!1,t.lastFocusedEl&&(t.lastFocusedEl.focus({preventScroll:!0}),t.lastFocusedEl=null)},clearLastFocusedEl(t){t.lastFocusedEl&&(t.lastFocusedEl.focus({preventScroll:!0}),t.lastFocusedEl=null,t.isFocusWithin=!1)}}})}function b(e,a){x(e.toasts,e.placement).forEach(a)}function Rt(e,a,t){const s=e.hasTag("visible"),r=e.hasTag("paused"),i=e.context.placement,d=e.context.type,[p,l="center"]=i.split("-");return{type:d,title:e.context.title,description:e.context.description,placement:i,visible:s,paused:r,pause(){a("PAUSE")},resume(){a("RESUME")},dismiss(){a("DISMISS")},getRootProps(){return t.element({...I.root.attrs,dir:e.context.dir,id:f.getRootId(e.context),"data-state":s?"open":"closed","data-type":d,"data-placement":i,"data-align":l,"data-side":p,"data-mounted":v(e.context.mounted),"data-paused":v(r),"data-first":v(e.context.frontmost),"data-sibling":v(!e.context.frontmost),"data-stack":v(e.context.stacked),"data-overlap":v(!e.context.stacked),role:"status","aria-atomic":"true","aria-describedby":e.context.description?f.getDescriptionId(e.context):void 0,"aria-labelledby":e.context.title?f.getTitleId(e.context):void 0,tabIndex:0,style:ft(e.context,s),onKeyDown(n){n.defaultPrevented||n.key=="Escape"&&(a("DISMISS"),n.preventDefault())}})},getGhostBeforeProps(){return t.element({"data-ghost":"before",style:ht(e.context,s)})},getGhostAfterProps(){return t.element({"data-ghost":"after",style:mt()})},getTitleProps(){return t.element({...I.title.attrs,id:f.getTitleId(e.context)})},getDescriptionProps(){return t.element({...I.description.attrs,id:f.getDescriptionId(e.context)})},getActionTriggerProps(){return t.button({...I.actionTrigger.attrs,type:"button",onClick(n){n.defaultPrevented||(e.context.action?.onClick?.(),a("DISMISS"))}})},getCloseTriggerProps(){return t.button({id:f.getCloseTriggerId(e.context),...I.closeTrigger.attrs,type:"button","aria-label":"Dismiss notification",onClick(n){n.defaultPrevented||a("DISMISS")}})}}}var _={connect:Tt,machine:St};const Lt=e=>{const a=_.machine({id:"1",...e});return{..._.connect(a,a.send,C),machine:a}},[At,R]=rt({name:"ToastContext",hookName:"useToastContext",providerName:"<ToastProvider />"}),$=E.forwardRef((e,a)=>{const t=R(),s=S(t.getActionTriggerProps(),e);return m.jsx(A.button,{...s,ref:a})});$.displayName="ToastActionTrigger";const H=E.forwardRef((e,a)=>{const t=R(),s=S(t.getCloseTriggerProps(),e);return m.jsx(A.button,{...s,ref:a})});H.displayName="ToastCloseTrigger";const B=E.forwardRef((e,a)=>{const t=R(),s=S(t.getDescriptionProps(),e);return m.jsx(A.div,{...s,ref:a})});B.displayName="ToastDescription";const j=E.forwardRef((e,a)=>{const t=R(),s=S(t.getRootProps(),e);return m.jsxs("div",{...s,ref:a,children:[m.jsx("div",{...t.getGhostBeforeProps()}),e.children,m.jsx("div",{...t.getGhostAfterProps()})]})});j.displayName="ToastRoot";const V=E.forwardRef((e,a)=>{const t=R(),s=S(t.getTitleProps(),e);return m.jsx(A.div,{...s,ref:a})});V.displayName="ToastTitle";const K=E.forwardRef((e,a)=>{const{toaster:t,children:s,...r}=e,[i,d]=X(t.machine),p=i.context.placement,l=_.connect(i,d,C),n=l.getToastsByPlacement(p),o=S(l.getGroupProps({placement:p}),r);return m.jsx(A.div,{...o,ref:a,children:n.map(c=>m.jsx(bt,{value:c,children:u=>s(u)},c.id))})});K.displayName="Toaster";const bt=e=>{const[a,t]=Y(e.value),s=Rt(a,t,C);return m.jsx(At,{value:s,children:e.children(a.context)})},{withProvider:Dt,withContext:D,useStyles:Pt}=lt({key:"toast"}),kt=ct(K,{},{forwardAsChild:!0}),Mt=Dt(j,"root",{forwardAsChild:!0}),Nt=D(H,"closeTrigger",{forwardAsChild:!0,defaultProps:{children:m.jsx(dt,{})}}),Ut=D(V,"title",{forwardAsChild:!0}),wt=D(B,"description",{forwardAsChild:!0}),Ft=D($,"actionTrigger",{forwardAsChild:!0}),Ot={warning:N,success:ut,error:N},Gt=E.forwardRef(function(a,t){const s=R(),r=Pt(),i=Ot[s.type];return i?m.jsx(i,{ref:t,...a,css:[r.indicator,a.css]}):null});export{kt as T,Mt as a,Gt as b,Lt as c,Ut as d,wt as e,Ft as f,Nt as g,Pt as u};
